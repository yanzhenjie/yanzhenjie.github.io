<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä¸¥æŒ¯æ°</title>
  
  <subtitle>ä¸ªäººæŠ€æœ¯æ ˆ</subtitle>
  <link href="https://www.yanzhenjie.com/atom.xml" rel="self"/>
  
  <link href="https://www.yanzhenjie.com/"/>
  <updated>2025-10-18T02:40:47.713Z</updated>
  <id>https://www.yanzhenjie.com/</id>
  
  <author>
    <name>ä¸¥æŒ¯æ°</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä½ æƒ³æˆä¸ºç¬¬å…­ä½ï¼Ÿâ€”â€”ã€Šèµµæœ¨æœ¨å’Œä¸Šå®˜æ°ã€‹</title>
    <link href="https://www.yanzhenjie.com/post/20251017/f83a63e69480/"/>
    <id>https://www.yanzhenjie.com/post/20251017/f83a63e69480/</id>
    <published>2025-10-16T23:01:34.000Z</published>
    <updated>2025-10-18T02:40:47.713Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¯¥è¯´çš„åˆ«è¯´äº†ï¼Œä½ æ‡‚å¾—å°±å¤Ÿäº†ï¼ŒçœŸçš„æœ‰æŸä¸€ç§æ‚²å“€ï¼Œè¿æ³ªä¹Ÿä¸èƒ½æµï¼Œåªèƒ½ç›®é€ï¼</p><div style="text-align:right;">â€”â€”ã€Šæˆ‘ä»¬ã€‹</div></blockquote><p>è¿™é¦–æ­Œé…æœ¬æ–‡åˆšåˆšå¥½ï¼Œå»ºè®®è¾¹å¬è¾¹çœ‹ï¼š<br><audio controls><br> <source src="/audio/output.mp3" type="audio/ogg"><br> ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒæ­Œæ›²<br></audio></p><p>èµµæœ¨æœ¨å’Œä¸Šå®˜æ°ï¼Œä¸¤ä¸ªåŸå¸‚é‡Œå„è‡ªè½¬åŠ¨çš„é½¿è½®ï¼Œæœ¬ä¸è¯¥ç›¸äº¤ã€‚ä¸Šå®˜æ°ä¸ºè¿é”å“ç‰Œè®¾è®¡è¥é”€æ–¹æ¡ˆï¼Œèµµæœ¨æœ¨ç»è¥ç€ä¸€å®¶è¿é”å’–å•¡åº—ï¼Œåº—åå°±å«â€œæœ¨æœ¨â€ã€‚ä¸€æ¬¡å‡ºå·®ï¼Œä¸Šå®˜æ°èµ°è¿›èµµæœ¨æœ¨çš„åŸå¸‚ï¼Œæ¨å¼€äº†é‚£æ‰‡æŒ‚ç€é£é“ƒçš„é—¨ã€‚ä»–ä»¬å› ä¸šåŠ¡èŠåˆ°æ·±å¤œï¼Œç«Ÿåœ¨å’–å•¡é¦™é‡Œæ’è§äº†å¦ä¸€ä¸ªè‡ªå·±â€”â€”ä»¿ä½›çµé­‚è¢«è£å‰ªæˆç›¸åŒçš„å½¢çŠ¶ã€‚</p><p>åæ¥ä»–ä»¬é€æ¸å¯¹å½¼æ­¤è®¤è¯†æ·±å…¥ï¼Œå¯èƒ½ä¹Ÿæœ‰ä¸€äº›æ‡µæ‡‚çš„æƒ…æ„«ï¼š</p><blockquote><p>â€¦<br>ä¸Šå®˜æ°ï¼šä¿ºè¿˜ä»¥ä¸ºä½ å–œæ¬¢åç”·äºº<br>ä¸Šå®˜æ°ï¼šæœ‰ç‚¹æƒŠè®¶<br>èµµæœ¨æœ¨ï¼šğŸ˜…æ€ä¹ˆå¯èƒ½<br>ä¸Šå®˜æ°ï¼šæ€ä¹ˆä¸å¯èƒ½<br>ä¸Šå®˜æ°ï¼šæœ‰çš„å¥³ç”Ÿå°±å–œæ¬¢ååçš„ç”·ç”Ÿ å“ˆå“ˆ<br>ä¸Šå®˜æ°ï¼šå¾ˆæ­£å¸¸<br>èµµæœ¨æœ¨ï¼šä¿ºâ€¦ä¿ºå’‹è¯´<br>èµµæœ¨æœ¨ï¼šä¿ºå¼€ä¸äº†å£<br>ä¸Šå®˜æ°ï¼šæ²¡äº‹ï¼Œä»¥åå–œæ¬¢å“ªä¸ªå¸…å“¥è·Ÿä¿ºè¯´<br>ä¸Šå®˜æ°ï¼šä¿ºæ›¿ä½ ä¿å¯†<br>ä¸Šå®˜æ°ï¼šæ­£å¸¸äººæ¯ä¸ªé˜¶æ®µéƒ½æœ‰è‡ªå·±å–œæ¬¢çš„äººï¼Œåœç•™åœ¨å–œæ¬¢è€Œå·²<br>èµµæœ¨æœ¨ï¼šä»æ€§æ ¼æ¥è¯´å§<br>èµµæœ¨æœ¨ï¼šä¿ºå–œæ¬¢è·Ÿä¿ºæ€§æ ¼åƒä¸€æ ·çš„<br>ä¸Šå®˜æ°ï¼šä½ å–œæ¬¢æˆ‘å•Š<br>èµµæœ¨æœ¨ï¼šğŸ˜…<br>ä¸Šå®˜æ°ï¼šğŸ˜‹<br>èµµæœ¨æœ¨ï¼šğŸ˜„<br>ä¸Šå®˜æ°ï¼šç­‰ç€å›å®¶è·ªç€å§<br>èµµæœ¨æœ¨ï¼šä¿ºæ²¡è¯´ å“ˆå“ˆå“ˆå“ˆ<br>èµµæœ¨æœ¨ï¼šä½ è°ˆè¿‡å‡ ä¸ª<br>ä¸Šå®˜æ°ï¼šä¸‰ä½å§<br>èµµæœ¨æœ¨ï¼šå“ˆå“ˆå“ˆå“ˆå“ˆ è¿˜æ˜¯æˆ‘ç®—ä¸€ä¸‹<br>èµµæœ¨æœ¨ï¼šè¿™é‡Œä¸€ä¸ªï¼Œé‚£é‡Œä¸€ä¸ªâ€¦<br>ä¸Šå®˜æ°ï¼šè¿˜æœ‰å¾ˆä¹…ä¹‹åè¡¨ç™½çš„<br>ä¸Šå®˜æ°ï¼šä½†æ˜¯ä¸æ˜¯è¡¨ç™½<br>èµµæœ¨æœ¨ï¼šå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ<br>ä¸Šå®˜æ°ï¼š<font color="red">æ˜¯è¯´ä¹‹å‰å’‹åœ°å’‹åœ°</font><br>èµµæœ¨æœ¨ï¼šä½ è°ˆçš„å¤šï¼Œä½ ç‰›<br>ä¸Šå®˜æ°ï¼šè¿™ä¸å«è°ˆ<br>ä¸Šå®˜æ°ï¼šè¿™å«æš—æ‹<br>èµµæœ¨æœ¨ï¼šå“ˆå“ˆå“ˆå“ˆå“ˆ<br>èµµæœ¨æœ¨ï¼šä½ è°ˆçš„å¤š<br>èµµæœ¨æœ¨ï¼šé‚£æˆ‘ä¸ç®¡<br>èµµæœ¨æœ¨ï¼šåŠ ä¸Šè¡¨ç™½çš„<br>èµµæœ¨æœ¨ï¼šäº”ä¸ª<br>èµµæœ¨æœ¨ï¼šå¥½å®¶ä¼™<br>ä¸Šå®˜æ°ï¼š9ä¸ª<br>ä¸Šå®˜æ°ï¼šä½ <br>ä¸Šå®˜æ°ï¼šå¥½å®¶ä¼™<br>èµµæœ¨æœ¨ï¼šæœ‰çš„æˆ‘éƒ½ä¸è®¤è¯†å•Š<br>èµµæœ¨æœ¨ï¼šå°±å½“æ—¶æˆ‘è¿åå­—éƒ½ä¸çŸ¥é“<br>èµµæœ¨æœ¨ï¼šè¿™èƒ½ç®—ï¼Ÿ<br>èµµæœ¨æœ¨ï¼šè¿™æ‰å«æš—æ‹<br>ä¸Šå®˜æ°ï¼šä½ æƒ³æˆä¸ºç¬¬å…­ä½ï¼Ÿ<br>ä¸Šå®˜æ°ï¼šè¿™æ•°å­—æŒºå¥½çš„<br>èµµæœ¨æœ¨ï¼šğŸ˜…ğŸ˜…ğŸ˜…<br>ä¸Šå®˜æ°ï¼šæ²¡æ¥è§¦ï¼Œéƒ½æ˜¯æœ‹å‹<br>ä¸Šå®˜æ°ï¼šä¿ºèº«è¾¹é‚£æ˜¯æœ‹å‹<br>ä¸Šå®˜æ°ï¼šåˆ«äººå–œæ¬¢ï¼Œä¿ºä¹Ÿç®¡ä¸ç€<br>èµµæœ¨æœ¨ï¼šå¥½å®¶ä¼™ï¼Œçœ‹æ¥è¿˜ä¸æ­¢<br>ä¸Šå®˜æ°ï¼šä½ ä¹Ÿè¦åŠ å…¥å…¶ä¸­ï¼Ÿ<br>èµµæœ¨æœ¨ï¼šå“ˆå“ˆå“ˆ ä¸è¦ä¸ºéš¾æˆ‘<br>èµµæœ¨æœ¨ï¼šä½ çœ‹ä¸Šé¢ä¿ºéƒ½æ²¡å›<br>ä¸Šå®˜æ°ï¼šä»¥ä¸ºä½ æ²¡çœ‹è§å‘¢<br>èµµæœ¨æœ¨ï¼šè¯·ä½ å†ä¸è¦ä¸ºéš¾ä¿ºäº†<br>èµµæœ¨æœ¨ï¼šå“ˆå“ˆå“ˆå“ˆ<br>ä¸Šå®˜æ°ï¼šå“ˆå“ˆå“ˆå“ˆ<br>ä¸Šå®˜æ°ï¼šé‚£ç¿»ç¯‡äº†<br>â€¦</p></blockquote><p>åæ¥ä¸Šå®˜æ°æ¥èµµæœ¨æœ¨çš„åŸå¸‚å‡ºå·®ï¼Œä»–ä»¬çº¦åœ¨æ²³è¾¹çš„é¤å…åƒåˆé¥­ï¼Œæ²³è¾¹é‚£æ¡äº”åˆ†é’Ÿè·¯ç¨‹ä½†æ²¡æœ‰å°½å¤´çš„æ—è«å°è·¯ï¼Œä¸Šå®˜æ°å’Œèµµæœ¨æœ¨ä»è¿™å¤´èµ°åˆ°é‚£å¤´ï¼Œåˆä»é‚£å¤´èµ°åˆ°è¿™å¤´ã€‚</p><p>èµµæœ¨æœ¨ç¬¨æ‹™åœ°ä»åŒ…é‡Œæå‡ºå°æ‘†ä»¶ï¼Œç¬‘ç€èœ·ç€æ‰‹å¡ç»™ä¸Šå®˜æ°ï¼šâ€œè¿™ä¸ªâ€¦ä½ ä¸Šæ¬¡å¤¸è¿‡ã€‚â€è¯éŸ³æœªè½ï¼Œå¥¹æ‰æƒ³èµ·è‡ªå·±æ ¹æœ¬æ²¡å¸¦å‡ºæ¥ï¼ŒåªæŠŠç©ºæ‰‹åœ¨ä¸Šå®˜æ°çœ¼å‰æ™ƒäº†æ™ƒï¼Œç¬‘å¾—å‘çƒ«ã€‚é˜³å…‰ç¢åœ¨å¶éš™é—´ï¼Œåƒæ— æ•°ç»†å°çš„æ³ªã€‚</p><p>éå¸¸ç¥å¥‡çš„æ˜¯ï¼Œå½“å‰æ™šä¸Šèµµæœ¨æœ¨è«åå…¶å¦™çš„å¤±çœ ï¼Œç™½å¤©å’Œä¸Šå®˜æ°è§é¢çš„åœºæ™¯ä¸€å¹•å¹•åœ¨å¥¹è„‘æµ·é‡Œé—ªè¿‡ï¼Œä¹Ÿè®¸é‚£2ä¸ªå°æ—¶çš„æ—¶å…‰åœ¨å¥¹è„‘æµ·é‡Œæ’­æ”¾äº†å‡ éï¼Œç›´åˆ°å‡Œæ™¨4:00å¥¹å¿ä¸ä½çš„æ‰“å¼€äº†èŠå¤©åˆ—è¡¨ï¼Œä½†æ˜¯ä¸Šå®˜æ°å·²ç»ä»å¥¹çš„å¥½å‹åˆ—è¡¨å½»åº•æ¶ˆå¤±äº†ï¼Œå°±åƒä»æ¥æ²¡æœ‰å‘ç”Ÿè¿‡ä¸€æ ·ï¼ŒåŸæ¥å†¥å†¥ä¹‹ä¸­å·²æœ‰å®šæ•°ã€‚å¥¹çç€çœ¼ï¼Œçœ‹çª—å¤–æœˆå…‰ä»é’ç™½å˜æˆç°ç™½ï¼Œåˆä»ç°ç™½å˜æˆæƒ¨ç™½ã€‚ç™½å¤©çš„æ¯å¥è¯ã€æ¯ä¸ªçœ¼ç¥ã€æ¯ç‰‡é£˜è½çš„å¶å­ï¼Œéƒ½åœ¨è„‘æµ·é‡Œåå¤æ’­æ”¾ã€‚</p><p>èµµæœ¨æœ¨åƒµåœ¨é»‘æš—é‡Œï¼Œæ‰‹æŒ‡æ‚¬åœ¨å±å¹•ä¸Šï¼Œå´è¿åˆ é™¤é”®éƒ½ä¸æ•¢æŒ‰ã€‚åŸæ¥å¤±çœ çš„æºå¤´ä¸æ˜¯å›å¿†ï¼Œæ˜¯å¿ƒè¢«æŠ½ç©ºåï¼Œè¿å‘¼å¸éƒ½æˆäº†å™ªéŸ³ã€‚å¥¹ä¸€ç›´èººåˆ°å¤©å…‰åˆºç ´çª—æ£‚ï¼Œæ‰æ…¢æ…¢æŠŠæ‰‹æœºæŒ‰ç­ã€‚çª—å¤–ï¼Œæ™¨é£å·ç€è½å¶ï¼Œåƒæ— æ•°ä¸ªæœªè¯´å‡ºå£çš„â€œå¥½å®¶ä¼™â€ã€‚</p><p>é‚£æ¡äº”åˆ†é’Ÿçš„æ—è«å°è·¯ï¼Œèµµæœ¨æœ¨å¯èƒ½è¦ç”¨ä½™ç”Ÿæ‰èƒ½èµ°å®Œï¼Œå®ƒä¸æ˜¯å•ç¨‹ç¥¨ï¼Œæ˜¯å¥¹æ°¸è¿œå›ä¸å»çš„è¿œæ–¹ã€‚å¥¹å¤šæƒ³å¯¹ä¸Šå®˜æ°è¯´â€œæˆ‘æƒ³æˆä¸ºç¬¬å…­ä½â€ï¼Œå¯è¿è¿™å¥è¯ï¼Œéƒ½æˆäº†åŸ‹åœ¨åœŸé‡Œçš„ç§å­ï¼Œå†ç­‰ä¸åˆ°æ˜¥å¤©ã€‚</p><blockquote><p>ä½†ç»ˆç©¶ï¼Œèµµæœ¨æœ¨ä¹Ÿä¸èƒ½é™ªä¸Šå®˜æ°åˆ°å›ä¸å»çš„è¿œæ–¹ï¼Œå¥¹æœ€å¤§çš„é—æ†¾ï¼Œæ˜¯ä»–çš„é—æ†¾ä¸å¥¹æœ‰å…³ï¼</p><div style="text-align:right;">â€”â€” cover from ã€Šæˆ‘ä»¬ã€‹</div></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è¯¥è¯´çš„åˆ«è¯´äº†ï¼Œä½ æ‡‚å¾—å°±å¤Ÿäº†ï¼ŒçœŸçš„æœ‰æŸä¸€ç§æ‚²å“€ï¼Œè¿æ³ªä¹Ÿä¸èƒ½æµï¼Œåªèƒ½ç›®é€ï¼&lt;/p&gt;
&lt;div style=&quot;text-align:right;&quot;&gt;â€”â€”ã€Šæˆ‘ä»¬ã€‹&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é¦–æ­Œé…æœ¬æ–‡åˆšåˆšå¥½ï¼Œå»ºè®®è¾¹å¬è¾¹çœ‹ï¼š&lt;br&gt;&lt;a</summary>
      
    
    
    
    <category term="æ‘˜æŠ„" scheme="https://www.yanzhenjie.com/categories/%E6%91%98%E6%8A%84/"/>
    
    
    <category term="æ‘˜æŠ„" scheme="https://www.yanzhenjie.com/tags/%E6%91%98%E6%8A%84/"/>
    
  </entry>
  
  <entry>
    <title>è®©å­å¼¹é£ä¸€ä¼šå„¿</title>
    <link href="https://www.yanzhenjie.com/post/20251015/e84871e2150b/"/>
    <id>https://www.yanzhenjie.com/post/20251015/e84871e2150b/</id>
    <published>2025-10-15T15:25:37.000Z</published>
    <updated>2025-10-16T02:12:31.814Z</updated>
    
    <content type="html"><![CDATA[<p>ä½ æœ‰æ²¡æœ‰æ€è€ƒè¿‡ä½ æ€§æ ¼çš„å¼±ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>æˆ‘è®¤ä¸ºæˆ‘ç¼ºçš„æ˜¯<font color="red">â€œè€å—åŠ›â€</font>ã€‚</p><p>ä¸€å®šè¦åŸ¹å…»å¯¹äº‹æƒ…ç„è€Œæœªè§‰çš„è€å—åŠ›ï¼Œ<br>é¿å…å› æ€¥äºæ±‚æˆè€Œé€ æˆç„¦è™‘å’Œçƒ¦æ¼ï¼Œ<br>è¦å…è®¸äº‹æƒ…å¤„äºç°è‰²åœ°å¸¦ï¼Œ<br>æ¥å—äº‹æƒ…çš„ä¸å¯æ§å› ç´ ï¼Œ<br>è¿‡åº¦è¿½æ±‚æŒæ§åè€Œå®¹æ˜“é™·å…¥ç„¦è™‘ä¸è‡ªæˆ‘æ¶ˆè€—ï¼Œ<br>ä»»ä½•é—®é¢˜çš„åˆ°æ¥ï¼Œ<br>ä½ éƒ½ä¸éœ€è¦å¤ªç€æ€¥å»å›åº”ï¼Œ<br>å¦åˆ™å°±æ˜¯åœ¨å’Œè‡ªå·±æ­»ç£•ã€‚<br>å­¦ä¼šè®©å­å¼¹é£ä¸€ä¼šå„¿æ˜¯å¤§æ™ºæ…§ï¼Œ<br>äº‹å®ä¸Šä¸ç®¡å¤šå¤§çš„äº‹æƒ…ï¼Œ<br>åˆ°æœ€åéƒ½ä¼šè¢«è§£å†³ï¼Œ<br>ä¸è¦ç»™è‡ªå·±å¤ªå¤§çš„å‹åŠ›ï¼Œ<br>ä½ çš„äººç”Ÿä¹Ÿç»å¯¹ä¸ä¼šå› ä¸ºä»»ä½•ä¸€ä»¶å•ä¸€çš„äº‹æƒ…å°±æ¯æ‰ã€‚</p><p>ä»¥ä¸Šï¼Œä¸è¯¸å›å…±å‹‰ï¼Œç¥å¥½~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä½ æœ‰æ²¡æœ‰æ€è€ƒè¿‡ä½ æ€§æ ¼çš„å¼±ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘è®¤ä¸ºæˆ‘ç¼ºçš„æ˜¯&lt;font color=&quot;red&quot;&gt;â€œè€å—åŠ›â€&lt;/font&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å®šè¦åŸ¹å…»å¯¹äº‹æƒ…ç„è€Œæœªè§‰çš„è€å—åŠ›ï¼Œ&lt;br&gt;é¿å…å› æ€¥äºæ±‚æˆè€Œé€ æˆç„¦è™‘å’Œçƒ¦æ¼ï¼Œ&lt;br&gt;è¦å…è®¸äº‹æƒ…å¤„äºç°è‰²åœ°å¸¦ï¼Œ&lt;br&gt;æ¥å—äº‹æƒ…çš„ä¸å¯æ§å› </summary>
      
    
    
    
    <category term="æ„Ÿæƒ³" scheme="https://www.yanzhenjie.com/categories/%E6%84%9F%E6%83%B3/"/>
    
    
    <category term="æ„Ÿæƒ³" scheme="https://www.yanzhenjie.com/tags/%E6%84%9F%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>æœ¬åœ°éƒ¨ç½²IndexTTS-2-Demo</title>
    <link href="https://www.yanzhenjie.com/post/20251001/87550f62e1a8/"/>
    <id>https://www.yanzhenjie.com/post/20251001/87550f62e1a8/</id>
    <published>2025-10-01T15:19:03.000Z</published>
    <updated>2025-10-02T08:28:15.919Z</updated>
    
    <content type="html"><![CDATA[<p>IndexTTS2 æ˜¯ B ç«™äº 2025 å¹´ 9 æœˆå¼€æºçš„ï¼Œ9 æœˆä»½ä¸€ç›´æƒ³ç©ä¸€ä¸‹ï¼Œä½†æ˜¯ 9 æœˆå·¥ä½œå¤ªå¿™äº†æ²¡æœ‰å°è¯•ï¼Œå›½åº†æœŸé—´è¶çƒ­æ‰“é“æ¥æœ¬åœ°éƒ¨ç½²ç©ä¸€ä¸‹ã€‚</p><p>IndexTTS2 æ˜¯é¦–ä¸ªè‡ªå›å½’é›¶æ ·æœ¬ TTS ç³»ç»Ÿï¼Œæ”¯æŒç²¾å‡†æ—¶é•¿æ§åˆ¶ã€éŸ³è‰²æƒ…æ„Ÿè§£è€¦ã€å¤šæ¨¡æ€è¾“å…¥ç­‰åˆ›æ–°åŠŸèƒ½ï¼Œå¯é€šè¿‡å®˜ç½‘è·å–æºç åŠæŠ€æœ¯æ–‡æ¡£ã€‚</p><p>ç‰¹è‰²ï¼š</p><ul><li>éŸ³è‰²å…‹éš†ï¼šä»…éœ€ 10 ç§’å‚è€ƒéŸ³é¢‘å³å¯ç²¾å‡†è¿˜åŸéŸ³è‰²ã€å£éŸ³åŠè¯´è¯èŠ‚å¥ã€‚</li><li>éŸ³è‰²ä¸æƒ…æ„Ÿè§£è€¦ï¼šæ”¯æŒç‹¬ç«‹æŒ‡å®šéŸ³è‰²æ¥æºå’Œæƒ…ç»ªæ¥æºï¼Œå®ç°éŸ³è‰²ä¸æƒ…æ„Ÿçš„åˆ†ç¦»æ§åˆ¶ã€‚</li><li>æƒ…ç»ªè°ƒèŠ‚ï¼šåœ¨éŸ³è‰²ä¸æƒ…æ„Ÿè§£è€¦åŸºç¡€ä¸Šï¼Œé€šè¿‡å‚è€ƒéŸ³é¢‘æˆ–æ–‡æœ¬æè¿°è°ƒæ•´æ„¤æ€’ã€å–œæ‚¦ç­‰æƒ…ç»ªæƒé‡ã€‚</li><li>å¤šæ¨¡æ€è¾“å…¥ï¼šæ”¯æŒæ–‡æœ¬æè¿°ã€éŸ³é¢‘æç¤ºæˆ–æƒ…æ„Ÿå‘é‡æ§åˆ¶è¯­è°ƒï¼Œè¦†ç›–éŸ³è‰²è¿˜åŸä¸æƒ…ç»ªè°ƒèŠ‚çš„è¾“å…¥æ–¹å¼ã€‚</li><li>å½±è§†çº§åº”ç”¨ï¼šéŸ³ç”»åŒæ­¥è¯¯å·®&lt;0.02%ï¼Œé€‚é…è§†é¢‘é…éŸ³åœºæ™¯ã€‚</li><li>å®è·µæ¡ˆä¾‹ï¼šå·²åº”ç”¨äºã€Šè®©å­å¼¹é£ã€‹ã€Šç”„å¬›ä¼ ã€‹ç­‰ç»å…¸å½±è§†ä½œå“ AI é…éŸ³ã€‚</li></ul><h2 id="1ã€é¡¹ç›®è·å–"><a href="#1ã€é¡¹ç›®è·å–" class="headerlink" title="1ã€é¡¹ç›®è·å–"></a>1ã€é¡¹ç›®è·å–</h2><p>æœ‰ 2 ç§è·å–æ–¹å¼ã€‚</p><ol><li><p>å¦‚æœä½ å¯ä»¥è®¿é—® huggingfaceï¼Œé‚£ä¹ˆï¼š</p><ul><li>IndexTTS-2ï¼š<a class="link"   href="https://huggingface.co/IndexTeam/IndexTTS-2" >https://huggingface.co/IndexTeam/IndexTTS-2<i class="fas fa-external-link-alt"></i></a></li><li>IndexTTS-2-Demoï¼š<a class="link"   href="https://huggingface.co/spaces/IndexTeam/IndexTTS-2-Demo" >https://huggingface.co/spaces/IndexTeam/IndexTTS-2-Demo<i class="fas fa-external-link-alt"></i></a></li></ul></li><li><p>å¦‚æœä¸èƒ½è®¿é—® huggingfaceï¼Œé‚£ä¹ˆè®¿é—®å›½å†…çš„ modelscopeï¼š</p><ul><li>IndexTTS-2ï¼š<a class="link"   href="https://www.modelscope.cn/models/IndexTeam/IndexTTS-2" >https://www.modelscope.cn/models/IndexTeam/IndexTTS-2<i class="fas fa-external-link-alt"></i></a></li><li>IndexTTS-2-Demoï¼š<a class="link"   href="https://www.modelscope.cn/studios/IndexTeam/IndexTTS-2-Demo" >https://www.modelscope.cn/studios/IndexTeam/IndexTTS-2-Demo<i class="fas fa-external-link-alt"></i></a></li></ul></li></ol><p>ä»¥ä¸Š 2 ä¸ª Demo åœ°å€éƒ½æ˜¯å¯ä»¥åœ¨çº¿ä½“éªŒçš„ã€‚</p><h2 id="2ã€æœ¬åœ°å®‰è£…"><a href="#2ã€æœ¬åœ°å®‰è£…" class="headerlink" title="2ã€æœ¬åœ°å®‰è£…"></a>2ã€æœ¬åœ°å®‰è£…</h2><p>æœ¬åœ°éƒ¨ç½²éå¸¸ç®€å•ï¼Œä½†æ˜¯ä¸­é—´ä¼šé‡åˆ° openfst å’Œ pynini çš„ä¸€äº›ç¼–è¯‘é—®é¢˜ã€‚</p><p>æˆ‘çš„ç¯å¢ƒï¼š</p><ul><li>MacOS Sequia 15.7</li><li>Command_Line_Tools_for_Xcode_16.4_MacOS_15.3</li><li>Homebrew 4.6.15</li><li>pyenv 2.6.8</li><li>Python 3.10.12</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew list</span></span><br><span class="line">==&gt; Formulae</span><br><span class="line">autoconf        gettext         libunistring    m4              openfst         pkgconf         readline        wget            zlib</span><br><span class="line">bzip2           libidn2         llvm            mpdecimal       openssl@1.1     pyenv           sqlite          xz              zstd</span><br><span class="line">ca-certificates libtommath      lz4             ncurses         openssl@3       python@3.13     tcl-tk          z3</span><br><span class="line"></span><br><span class="line">==&gt; Casks</span><br></pre></td></tr></table></figure><p>æŠŠé¡¹ç›®æ‹‰åˆ°æœ¬åœ°åï¼Œæ¿€æ´» python ç¯å¢ƒï¼Œå®‰è£…ä¾èµ–ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install -r requirements.txt</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè‚¯å®šæ˜¯å¤±è´¥äº†ï¼Œå¾ˆé¡ºåˆ©çš„è¯å°±ä¸ä¼šæœ‰è¿™ç¯‡æ–‡ç« äº†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">copying pynini/export/py.typed -&gt; build/lib.macosx-15.7-arm64-cpython-39/pynini/export</span><br><span class="line">running build_ext</span><br><span class="line">building &#x27;_pywrapfst&#x27; extension</span><br><span class="line">creating build/temp.macosx-15.7-arm64-cpython-39/extensions</span><br><span class="line">clang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -DOPENSSL_NO_SSL3 -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/Users/Harry/Workspace/ModelScope/IndexTTS-2-Demo/.venv/include -I/Users/Harry/.pyenv/versions/3.9.23/include/python3.9 -c extensions/_pywrapfst.cpp -o build/temp.macosx-15.7-arm64-cpython-39/extensions/_pywrapfst.o -std=c++17 -Wno-register -Wno-deprecated-declarations -Wno-unused-function -Wno-unused-local-typedefs -funsigned-char -stdlib=libc++ -mmacosx-version-min=10.12</span><br><span class="line">extensions/_pywrapfst.cpp:1191:10: fatal error: &#x27;fst/util.h&#x27; file not found</span><br><span class="line">  1191 | #include &lt;fst/util.h&gt;</span><br><span class="line">      |          ^~~~~~~~~~~~</span><br><span class="line">1 error generated.</span><br><span class="line">error: command &#x27;/usr/bin/clang++&#x27; failed with exit code 1</span><br><span class="line">[end of output]</span><br><span class="line"></span><br><span class="line">  note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class="line">  ERROR: Failed building wheel for pynini</span><br><span class="line">Failed to build pynini</span><br><span class="line">ERROR: Could not build wheels for pynini, which is required to install pyproject.toml-based projects</span><br></pre></td></tr></table></figure><p>æ ¸å¿ƒæ˜¯<code>&#39;fst/util.h&#39; file not found</code>ï¼Œåº”è¯¥ä¸å­˜åœ¨ openfstï¼Œé‚£ä¹ˆå®‰è£…<code>brew install openfst</code>ï¼Œç„¶åå†æ¬¡<code>pip install -r requirements.txt</code>ï¼Œä¾æ—§å¤±è´¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">building &#x27;_pywrapfst&#x27; extension</span><br><span class="line">creating build/temp.macosx-15.7-arm64-cpython-39/extensions</span><br><span class="line">clang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -DOPENSSL_NO_SSL3 -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/Users/Harry/Workspace/ModelScope/IndexTTS-2-Demo/.venv/include -I/Users/Harry/.pyenv/versions/3.9.23/include/python3.9 -c extensions/_pywrapfst.cpp -o build/temp.macosx-15.7-arm64-cpython-39/extensions/_pywrapfst.o -std=c++17 -Wno-register -Wno-deprecated-declarations -Wno-unused-function -Wno-unused-local-typedefs -funsigned-char -stdlib=libc++ -mmacosx-version-min=10.12</span><br><span class="line">clang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -DOPENSSL_NO_SSL3 -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -bundle -undefined dynamic_lookup build/temp.macosx-15.7-arm64-cpython-39/extensions/_pywrapfst.o -L/Users/Harry/.pyenv/versions/3.9.23/lib -lfstfarscript -lfstfar -lfstscript -lfst -lm -ldl -o build/lib.macosx-15.7-arm64-cpython-39/_pywrapfst.cpython-39-darwin.so</span><br><span class="line">ld: library &#x27;fstfarscript&#x27; not found</span><br><span class="line">clang++: error: linker command failed with exit code 1 (use -v to see invocation)</span><br><span class="line">error: command &#x27;/usr/bin/clang++&#x27; failed with exit code 1</span><br><span class="line">[end of output]</span><br><span class="line"></span><br><span class="line">note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class="line">ERROR: Failed building wheel for pynini</span><br><span class="line">Failed to build pynini</span><br><span class="line">error: failed-wheel-build-for-install</span><br><span class="line"></span><br><span class="line">Ã— Failed to build installable wheels for some pyproject.toml based projects</span><br><span class="line">â•°â”€&gt; pynini</span><br></pre></td></tr></table></figure><p>çœ‹ç€æ˜¯ pynini ç¼–è¯‘å®‰è£…å¤±è´¥äº†ï¼Œç„¶åè¿˜æ³¨æ„åˆ°<code>library &#39;fstfarscript&#39; not found</code>ï¼Œç½‘ä¸ŠæŸ¥èµ„æ–™çœ‹æ˜¯ openfst å’Œ pynini æœ‰ä¸åŒ¹é…ï¼Œå…¶å®ä»æ—¥å¿—å¯ä»¥çœ‹å‡ºæ¥ä¸æ˜¯ç¼ºå°‘åº“ï¼Œè€Œæ˜¯åº“é‡Œé¢ç¼ºå°‘<code>fstfarscript</code>ï¼Œæœ‰ç­”æ¡ˆæ¨èå®‰è£… openfst çš„å¼€å‘ç‰ˆï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…openfstå¼€å‘ç‰ˆ</span></span><br><span class="line">brew reinstall openfst --build-from-source</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®è¿æ¥å™¨è·¯å¾„</span></span><br><span class="line">export LDFLAGS=&quot;-L$(brew --prefix openfst)/lib $LDFLAGS&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ‰‹åŠ¨å°è¯•å®‰è£…pynini</span></span><br><span class="line">pip install pynini --no-cache-dir --global-option=build_ext --global-option=&quot;-L$(brew --prefix openfst)/lib&quot;</span><br></pre></td></tr></table></figure><p>OKï¼Œè¿™é‡Œ pynini å®‰è£…æˆåŠŸäº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Looking in indexes: https://mirrors.aliyun.com/pypi/simple/, https://pypi.tuna.tsinghua.edu.cn/simple/, https://mirrors.ustc.edu.cn/pypi/simple/, https://pypi.org/simple/</span><br><span class="line">Processing /Users/Harry/Workspace/ModelScope/IndexTTS-2-Demo/pynini-2.1.7</span><br><span class="line">  Installing build dependencies ... done</span><br><span class="line">  Getting requirements to build wheel ... done</span><br><span class="line">  Preparing metadata (pyproject.toml) ... done</span><br><span class="line">Building wheels for collected packages: pynini</span><br><span class="line">  Building wheel for pynini (pyproject.toml) ... done</span><br><span class="line">  Created wheel for pynini: filename=pynini-2.1.7-cp310-cp310-macosx_15_0_arm64.whl size=2023561 sha256=e2a86e63d5dfe7de6ef277e56d6d1f08016003410948b21259dc05b2c72e8b69</span><br><span class="line">  Stored in directory: /Users/Harry/Library/Caches/pip/wheels/81/07/cb/9d3f76d8da6b8b6791674ef8dc617e86bba48058c1165d11bb</span><br><span class="line">Successfully built pynini</span><br><span class="line">Installing collected packages: pynini</span><br><span class="line">Successfully installed pynini-2.1.7</span><br></pre></td></tr></table></figure><p>æˆ‘å¾ˆé«˜å…´çš„ç»§ç»­å®‰è£…ä¾èµ–<code>pip install -r requirements.txt</code>ï¼Œå®æ—¶è¯æ˜æˆ‘é«˜å…´çš„å¤ªæ—©äº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">      building &#x27;_pynini&#x27; extension</span><br><span class="line">      clang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -DOPENSSL_NO_SSL3 -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -Iextensions -I/Users/Harry/Workspace/ModelScope/IndexTTS-2-Demo/.venv/include -I/Users/Harry/.pyenv/versions/3.9.23/include/python3.9 -c extensions/_pynini.cpp -o build/temp.macosx-15.7-arm64-cpython-39/extensions/_pynini.o -std=c++17 -Wno-register -Wno-deprecated-declarations -Wno-unused-function -Wno-unused-local-typedefs -funsigned-char -stdlib=libc++ -mmacosx-version-min=10.12</span><br><span class="line">      In file included from extensions/_pynini.cpp:1252:</span><br><span class="line">      In file included from extensions/stringmapscript.h:31:</span><br><span class="line">      extensions/stringmap.h:185:26: error: no member named &#x27;StringJoin&#x27; in namespace &#x27;fst&#x27;; did you mean &#x27;StrJoin&#x27;?</span><br><span class="line">        185 |                  &lt;&lt; fst::StringJoin(line, &quot;\t&quot;) &lt;&lt; &quot;`&quot;;</span><br><span class="line">            |                     ~~~~~^~~~~~~~~~</span><br><span class="line">            |                          StrJoin</span><br><span class="line">      /opt/homebrew/opt/openfst/include/fst/compat.h:197:13: note: &#x27;StrJoin&#x27; declared here</span><br><span class="line">        197 | std::string StrJoin(const std::vector&lt;S&gt; &amp;elements, std::string_view delim) &#123;</span><br><span class="line">            |             ^</span><br><span class="line">      In file included from extensions/_pynini.cpp:1252:</span><br><span class="line">      In file included from extensions/stringmapscript.h:31:</span><br><span class="line">      extensions/stringmap.h:230:26: error: no member named &#x27;StringJoin&#x27; in namespace &#x27;fst&#x27;; did you mean &#x27;StrJoin&#x27;?</span><br><span class="line">        230 |                  &lt;&lt; fst::StringJoin(line, &quot;\t&quot;) &lt;&lt; &quot;`&quot;;</span><br><span class="line">            |                     ~~~~~^~~~~~~~~~</span><br><span class="line">            |                          StrJoin</span><br><span class="line">      /opt/homebrew/opt/openfst/include/fst/compat.h:197:13: note: &#x27;StrJoin&#x27; declared here</span><br><span class="line">        197 | std::string StrJoin(const std::vector&lt;S&gt; &amp;elements, std::string_view delim) &#123;</span><br><span class="line">            |             ^</span><br><span class="line">      2 errors generated.</span><br><span class="line">      error: command &#x27;/usr/bin/clang++&#x27; failed with exit code 1</span><br><span class="line">      [end of output]</span><br><span class="line"></span><br><span class="line">  note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class="line">  ERROR: Failed building wheel for pynini</span><br><span class="line">  Building wheel for distance (pyproject.toml) ... done</span><br><span class="line">  Created wheel for distance: filename=distance-0.1.3-py3-none-any.whl size=16321 sha256=5b3994bb5686de9bbc7f78ce4f2e702b482f572e8620f0e8216d827950dabdae</span><br><span class="line">  Stored in directory: /Users/Harry/Library/Caches/pip/wheels/fb/b3/aa/04241cced6d1722b132273b1d6aafba317887ec004f48b853a</span><br><span class="line">  Building wheel for argbind (pyproject.toml) ... done</span><br><span class="line">  Created wheel for argbind: filename=argbind-0.3.9-py2.py3-none-any.whl size=11816 sha256=d19bcc9a580acc68e2b638466adefc2ef26058064a3e8cab62acda610b7a539d</span><br><span class="line">  Stored in directory: /Users/Harry/Library/Caches/pip/wheels/3e/9e/9c/0ab23ae19848099a030aaa8f68a3875e629671d859a40a7fc9</span><br><span class="line">  Building wheel for julius (pyproject.toml) ... done</span><br><span class="line">  Created wheel for julius: filename=julius-0.2.7-py3-none-any.whl size=21966 sha256=fb8693a91aed2dd06389c064ff742fdb7f6d3d722ef79f5ad2f4707e10d178ab</span><br><span class="line">  Stored in directory: /Users/Harry/Library/Caches/pip/wheels/53/0a/a7/fc08f97438f4969d86afa7904336c2eb7eb422101359f3ad11</span><br><span class="line">  Building wheel for randomname (pyproject.toml) ... done</span><br><span class="line">  Created wheel for randomname: filename=randomname-0.2.1-py3-none-any.whl size=89288 sha256=472a9c1becbf4931603c4affad5c5748b46dca930643b795721cc0ecf8265bae</span><br><span class="line">  Stored in directory: /Users/Harry/Library/Caches/pip/wheels/32/f7/3b/a46d1bb5fd36d11db2d6c267513fb405f2457cbcd6b50c760f</span><br><span class="line">Successfully built jieba deepspeed antlr4-python3-runtime distance argbind julius randomname</span><br><span class="line">Failed to build pynini</span><br><span class="line">error: failed-wheel-build-for-install</span><br><span class="line"></span><br><span class="line">Ã— Failed to build installable wheels for some pyproject.toml based projects</span><br><span class="line">â•°â”€&gt; pynini</span><br></pre></td></tr></table></figure><p>openfst å’Œ pynini éƒ½å®‰è£…æˆåŠŸäº†ï¼Œå®‰è£…<code>requirements.txt</code>æŠ¥é”™å…³é”®ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">In file included from extensions/stringmapscript.h:31:</span><br><span class="line">extensions/stringmap.h:185:26: error: no member named &#x27;StringJoin&#x27; in namespace &#x27;fst&#x27;; did you mean &#x27;StrJoin&#x27;?</span><br><span class="line">  185 |                  &lt;&lt; fst::StringJoin(line, &quot;\t&quot;) &lt;&lt; &quot;`&quot;;</span><br><span class="line">      |                     ~~~~~^~~~~~~~~~</span><br><span class="line">      |                          StrJoin</span><br></pre></td></tr></table></figure><p>çœ‹ä¿¡æ¯æ˜¯å®‰è£… pynini extion æ—¶å¤±è´¥äº†ï¼Œä»<code>error: no member named &#39;StringJoin&#39; in namespace &#39;fst&#39;; did you mean &#39;StrJoin&#39;?</code>çœ‹è¿˜æ˜¯ pynini å’Œ openfst ä¸å…¼å®¹çš„é—®é¢˜ã€‚åœ¨ OpenFST 1.8.0 ä¸­ï¼Œ<code>StringJoin</code>å‡½æ•°è¢«é‡å‘½åä¸º<code>StrJoin</code>äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—ä¿®æ”¹ pynini æºç æ¥å®‰è£…äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸è½½å½“å‰ pynini</span></span><br><span class="line">pip uninstall pynini -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è½½ pynini æºç </span></span><br><span class="line">wget https://github.com/yanzhenjie/pynini/archive/refs/tags/v2.1.7.tar.gz</span><br><span class="line">tar -xzf v2.1.7.tar.gz</span><br><span class="line">cd pynini-2.1.7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åº”ç”¨ä¿®å¤è¡¥ä¸ (å°† StringJoin æ›¿æ¢ä¸º StrJoin)</span></span><br><span class="line">sed -i &#x27;&#x27; &#x27;s/fst::StringJoin/fst::StrJoin/g&#x27; extensions/stringmap.h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…pyniniçš„ä¾èµ–</span></span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°å®‰è£…ä¿®å¤åçš„ pynini</span></span><br><span class="line">pip install .</span><br></pre></td></tr></table></figure><blockquote><p><font color=red><b>ç‰¹åˆ«æ³¨æ„ï¼šè¿™é‡Œéœ€è¦æ‰‹åŠ¨æŠŠæœ¬åœ° pynini åŠ å…¥åˆ° requirements.txt ä¸­ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šä»è¿œç«¯å®‰è£…ã€‚</b></font></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./pynini-2.1.7</span><br><span class="line">accelerate==1.8.1</span><br></pre></td></tr></table></figure></blockquote><p>ä»æºç å®‰è£… pynini åˆæˆåŠŸäº†ï¼Œç´§æ¥ç€æˆ‘åˆå¼€å§‹ç»§ç»­å®‰è£…é¡¹ç›®ä¾èµ–<code>pip install -r requirements.txt</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">Using cached wcwidth-0.2.14-py2.py3-none-any.whl (37 kB)</span><br><span class="line">Building wheels for collected packages: pynini</span><br><span class="line">  Building wheel for pynini (pyproject.toml) ... error</span><br><span class="line">  error: subprocess-exited-with-error</span><br><span class="line"></span><br><span class="line">  Ã— Building wheel for pynini (pyproject.toml) did not run successfully.</span><br><span class="line">  â”‚ exit code: 1</span><br><span class="line">  â•°â”€&gt; [68 lines of output]</span><br><span class="line">      /private/var/folders/wh/33kqcmn975z7bsfmvmlrsy880000gp/T/pip-build-env-o0w8wif1/overlay/lib/python3.10/site-packages/setuptools/config/_apply_pyprojecttoml.py:82: SetuptoolsDeprecationWarning: `project.license` as a TOML table is deprecated</span><br><span class="line">      !!</span><br><span class="line"></span><br><span class="line">              ********************************************************************************</span><br><span class="line">              Please use a simple string containing a SPDX expression for `project.license`. You can also use `project.license-files`. (Both options available on setuptools&gt;=77.0.0).</span><br><span class="line"></span><br><span class="line">              By 2026-Feb-18, you need to update your project and remove deprecated calls</span><br><span class="line">              or your builds will no longer be supported.</span><br><span class="line"></span><br><span class="line">              See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license for details.</span><br><span class="line">              ********************************************************************************</span><br><span class="line"></span><br><span class="line">      !!</span><br><span class="line">        corresp(dist, value, root_dir)</span><br><span class="line">      /private/var/folders/wh/33kqcmn975z7bsfmvmlrsy880000gp/T/pip-build-env-o0w8wif1/overlay/lib/python3.10/site-packages/setuptools/config/_apply_pyprojecttoml.py:61: SetuptoolsDeprecationWarning: License classifiers are deprecated.</span><br><span class="line">      !!</span><br><span class="line"></span><br><span class="line">              ********************************************************************************</span><br><span class="line">              Please consider removing the following classifiers in favor of a SPDX license expression:</span><br><span class="line"></span><br><span class="line">              License :: OSI Approved :: Apache Software License</span><br><span class="line"></span><br><span class="line">              See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license for details.</span><br><span class="line">              ********************************************************************************</span><br><span class="line"></span><br><span class="line">      !!</span><br><span class="line">        dist._finalize_license_expression()</span><br><span class="line">      /private/var/folders/wh/33kqcmn975z7bsfmvmlrsy880000gp/T/pip-build-env-o0w8wif1/overlay/lib/python3.10/site-packages/setuptools/dist.py:759: SetuptoolsDeprecationWarning: License classifiers are deprecated.</span><br><span class="line">      !!</span><br><span class="line"></span><br><span class="line">              ********************************************************************************</span><br><span class="line">              Please consider removing the following classifiers in favor of a SPDX license expression:</span><br><span class="line"></span><br><span class="line">              License :: OSI Approved :: Apache Software License</span><br><span class="line"></span><br><span class="line">              See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license for details.</span><br><span class="line">              ********************************************************************************</span><br><span class="line"></span><br><span class="line">      !!</span><br><span class="line">        self._finalize_license_expression()</span><br><span class="line">      running bdist_wheel</span><br><span class="line">      running build</span><br><span class="line">      running build_py</span><br><span class="line">      running egg_info</span><br><span class="line">      writing pynini.egg-info/PKG-INFO</span><br><span class="line">      writing dependency_links to pynini.egg-info/dependency_links.txt</span><br><span class="line">      writing top-level names to pynini.egg-info/top_level.txt</span><br><span class="line">      reading manifest file &#x27;pynini.egg-info/SOURCES.txt&#x27;</span><br><span class="line">      reading manifest template &#x27;MANIFEST.in&#x27;</span><br><span class="line">      adding license file &#x27;LICENSE&#x27;</span><br><span class="line">      adding license file &#x27;AUTHORS&#x27;</span><br><span class="line">      writing manifest file &#x27;pynini.egg-info/SOURCES.txt&#x27;</span><br><span class="line">      running build_ext</span><br><span class="line">      building &#x27;_pywrapfst&#x27; extension</span><br><span class="line">      clang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/opt/homebrew/opt/openfst/include -I/Users/Harry/Workspace/ModelScope/IndexTTS-2-Demo/.venv/include -I/Users/Harry/.pyenv/versions/3.10.12/include/python3.10 -c extensions/_pywrapfst.cpp -o build/temp.macosx-15.7-arm64-cpython-310/extensions/_pywrapfst.o -std=c++17 -Wno-register -Wno-deprecated-declarations -Wno-unused-function -Wno-unused-local-typedefs -funsigned-char -stdlib=libc++ -mmacosx-version-min=10.12</span><br><span class="line">      In file included from extensions/_pywrapfst.cpp:1193:</span><br><span class="line">      In file included from /opt/homebrew/opt/openfst/include/fst/fstlib.h:57:</span><br><span class="line">      /opt/homebrew/opt/openfst/include/fst/const-fst.h:403:25: warning: comparison of integers of different signs: &#x27;int64_t&#x27; (aka &#x27;long long&#x27;) and &#x27;size_t&#x27; (aka &#x27;unsigned long&#x27;) [-Wsign-compare]</span><br><span class="line">        403 |     if (hdr.NumStates() != num_states) &#123;</span><br><span class="line">            |         ~~~~~~~~~~~~~~~ ^  ~~~~~~~~~~</span><br><span class="line">      /opt/homebrew/opt/openfst/include/fst/const-fst.h:407:23: warning: comparison of integers of different signs: &#x27;int64_t&#x27; (aka &#x27;long long&#x27;) and &#x27;size_t&#x27; (aka &#x27;unsigned long&#x27;) [-Wsign-compare]</span><br><span class="line">        407 |     if (hdr.NumArcs() != num_arcs) &#123;</span><br><span class="line">            |         ~~~~~~~~~~~~~ ^  ~~~~~~~~</span><br><span class="line">      2 warnings generated.</span><br><span class="line">      clang++ -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/opt/homebrew/opt/openfst/include -bundle -undefined dynamic_lookup -I/opt/homebrew/opt/openfst/include build/temp.macosx-15.7-arm64-cpython-310/extensions/_pywrapfst.o -L/Users/Harry/.pyenv/versions/3.10.12/lib -lfstfarscript -lfstfar -lfstscript -lfst -lm -ldl -o build/lib.macosx-15.7-arm64-cpython-310/_pywrapfst.cpython-310-darwin.so</span><br><span class="line">      ld: library &#x27;fstfarscript&#x27; not found</span><br><span class="line">      clang++: error: linker command failed with exit code 1 (use -v to see invocation)</span><br><span class="line">      error: command &#x27;/usr/bin/clang++&#x27; failed with exit code 1</span><br><span class="line">      [end of output]</span><br><span class="line"></span><br><span class="line">  note: This error originates from a subprocess, and is likely not a problem with pip.</span><br><span class="line">  ERROR: Failed building wheel for pynini</span><br><span class="line">Failed to build pynini</span><br><span class="line">error: failed-wheel-build-for-install</span><br><span class="line"></span><br><span class="line">Ã— Failed to build installable wheels for some pyproject.toml based projects</span><br><span class="line">â•°â”€&gt; pynini</span><br></pre></td></tr></table></figure><p>å¥½å®¶ä¼™ï¼Œè¿˜æ˜¯é“¾æ¥é”™è¯¯<code>ld: library &#39;fstfarscript&#39; not found</code>ï¼Œè¿™æ˜¯ç”±äº OpenFST çš„åº“å‘½ååœ¨ä¸åŒ Python ç‰ˆæœ¬ä¸‹è¡Œä¸ºä¸ä¸€è‡´å¯¼è‡´çš„ï¼ŒæŸ¥äº†ä¸€ä¸‹å¯èƒ½çš„åŸå› ï¼š</p><blockquote><p>OpenFST åº“å‘½åå˜åŒ–ï¼š</p><ul><li>OpenFST 1.8.0+ ç‰ˆæœ¬ä¸å†æä¾› libfstfarscript åº“</li><li>å®ƒè¢«æ‹†åˆ†ä¸º libfstfar å’Œ libfstscript ä¸¤ä¸ªç‹¬ç«‹åº“</li><li>ä½†åœ¨ pynini çš„æ„å»ºé…ç½®ä¸­ï¼Œä»ç„¶å°è¯•é“¾æ¥ fstfarscript</li></ul></blockquote><p>æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬è®©<code>-lfstfar -lfstscript</code>æ›¿ä»£<code>-lfstfarscript</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¡®ä¿è®¾ç½®æ­£ç¡®çš„ LDFLAGS</span></span><br><span class="line">export CFLAGS=&quot;-I$(brew --prefix openfst)/include $CFLAGS&quot;</span><br><span class="line">export CPPFLAGS=&quot;-I$(brew --prefix openfst)/include $CPPFLAGS&quot;</span><br><span class="line">export LDFLAGS=&quot;-L$(brew --prefix openfst)/lib -lfstfar -lfstscript $LDFLAGS&quot;</span><br></pre></td></tr></table></figure><p>é‡æ–°å®‰è£… pyniniï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd pynini-2.1.7</span><br><span class="line">pip uninstall pynini -y</span><br><span class="line">pip install -r requirements.txt</span><br><span class="line">pip install .</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åˆ°é¡¹ç›®æ ¹ç›®å½•å®‰è£…ä¾èµ–<code>pip install -r requirements.txt</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Looking in indexes: https://mirrors.aliyun.com/pypi/simple/, https://pypi.tuna.tsinghua.edu.cn/simple/, https://mirrors.ustc.edu.cn/pypi/simple/, https://pypi.org/simple/</span><br><span class="line">Processing ./pynini-2.1.7</span><br><span class="line">  Installing build dependencies ... done</span><br><span class="line">  ...</span><br><span class="line">Using cached wcwidth-0.2.14-py2.py3-none-any.whl (37 kB)</span><br><span class="line">Building wheels for collected packages: pynini</span><br><span class="line">  Building wheel for pynini (pyproject.toml) ... done</span><br><span class="line">  Created wheel for pynini: filename=pynini-2.1.7-cp310-cp310-macosx_15_0_arm64.whl size=2023566 sha256=97cba0df2440c1d0bf6c5ec910a40bc614d8e7ae41b815921dc3f0a086a68523</span><br><span class="line">  Stored in directory: /Users/Harry/Library/Caches/pip/wheels/81/07/cb/9d3f76d8da6b8b6791674ef8dc617e86bba48058c1165d11bb</span><br><span class="line">Successfully built pynini</span><br><span class="line">Installing ... spaces</span><br><span class="line">  Attempting uninstall: pynini</span><br><span class="line">    Found existing installation: pynini 2.1.7</span><br><span class="line">    Uninstalling pynini-2.1.7:</span><br><span class="line">      Successfully uninstalled pynini-2.1.7</span><br><span class="line">  Attempting uninstall: Cython</span><br><span class="line">    Found existing installation: Cython 3.1.4</span><br><span class="line">    Uninstalling Cython-3.1.4:</span><br><span class="line">      Successfully uninstalled Cython-3.1.4</span><br><span class="line">Successfully installed Cython-3.0.7 ... wetext-0.1.0</span><br></pre></td></tr></table></figure><p>æˆåŠŸäº†ï¼ŒâœŒğŸ»âœŒğŸ»âœŒğŸ»ï¼ï¼ï¼</p><h3 id="2-1ã€é—®é¢˜ä¿®å¤æ±‡æ€»"><a href="#2-1ã€é—®é¢˜ä¿®å¤æ±‡æ€»" class="headerlink" title="2.1ã€é—®é¢˜ä¿®å¤æ±‡æ€»"></a>2.1ã€é—®é¢˜ä¿®å¤æ±‡æ€»</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. å®‰è£… OpenFST</span></span><br><span class="line">brew install openfst</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. è·å– pynini æºç </span></span><br><span class="line">wget https://github.com/yanzhenjie/pynini/archive/refs/tags/v2.1.7.tar.gz</span><br><span class="line">tar -xzf v2.1.7.tar.gz</span><br><span class="line">cd pynini-2.1.7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3. ä¿®å¤ stringmap.h</span></span><br><span class="line">sed -i &#x27;&#x27; &#x27;s/fst::StringJoin/fst::StrJoin/g&#x27; extensions/stringmap.h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4. ä¿®å¤é“¾æ¥é—®é¢˜</span></span><br><span class="line">export CFLAGS=&quot;-I$(brew --prefix openfst)/include $CFLAGS&quot;</span><br><span class="line">export CPPFLAGS=&quot;-I$(brew --prefix openfst)/include $CPPFLAGS&quot;</span><br><span class="line">export LDFLAGS=&quot;-L$(brew --prefix openfst)/lib -lfstfar -lfstscript $LDFLAGS&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">5. å®‰è£… pynini</span></span><br><span class="line">pip uninstall pynini -y</span><br><span class="line">pip install -r requirements.txt .</span><br><span class="line">pip install .</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">6. ä¿®æ”¹ requirements.txtï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">./pynini-2.1.7</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">7. åœ¨é¡¹ç›®ä¸­å®‰è£…å…¶ä»–ä¾èµ–</span></span><br><span class="line">cd ..</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><h2 id="3ã€æœ¬åœ°é¢„è§ˆ"><a href="#3ã€æœ¬åœ°é¢„è§ˆ" class="headerlink" title="3ã€æœ¬åœ°é¢„è§ˆ"></a>3ã€æœ¬åœ°é¢„è§ˆ</h2><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ<code>python app.py</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Looking in indexes: https://mirrors.aliyun.com/pypi/simple/, https://pypi.tuna.tsinghua.edu.cn/simple/, https://mirrors.ustc.edu.cn/pypi/simple/, https://pypi.org/simple/</span><br><span class="line">Collecting protobuf==3.20.3</span><br><span class="line">...</span><br><span class="line">modelscope - INFO - Got n files, start to download ...</span><br><span class="line">...</span><br><span class="line">modelscope - INFO - Download model &#x27;IndexTeam/IndexTTS-2&#x27; successfully.</span><br><span class="line">---model_id--- nvidia/bigvgan_v2_22khz_80band_256x</span><br><span class="line">Loading weights from nv-community/bigvgan_v2_22khz_80band_256x</span><br><span class="line">Removing weight norm...</span><br><span class="line">&gt;&gt; bigvgan weights restored from: nvidia/bigvgan_v2_22khz_80band_256x</span><br><span class="line">&gt;&gt; TextNormalizer loaded</span><br><span class="line">&gt;&gt; bpe model loaded from: ./checkpoints/bpe.model</span><br><span class="line">* Running on local URL:  http://192.168.1.3:7860</span><br><span class="line">* To create a public link, set `share=True` in `launch()`.</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ ¹æ®ç½‘ç»œæƒ…å†µçš„ä¸åŒéœ€è¦å‡ ååˆ†é’Ÿï¼Œå› ä¸ºè¦ä¸‹è½½å¾ˆå¤šæ¨¡å‹æ–‡ä»¶ï¼Œç„¶åçœ‹åˆ°å¦‚ä¸Šæç¤ºå°±å¯ä»¥æœ¬åœ°è®¿é—®äº†ã€‚</p><p><img   src="/post/20240313/52aafdd7288f/demo.png" ></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;IndexTTS2 æ˜¯ B ç«™äº 2025 å¹´ 9 æœˆå¼€æºçš„ï¼Œ9 æœˆä»½ä¸€ç›´æƒ³ç©ä¸€ä¸‹ï¼Œä½†æ˜¯ 9 æœˆå·¥ä½œå¤ªå¿™äº†æ²¡æœ‰å°è¯•ï¼Œå›½åº†æœŸé—´è¶çƒ­æ‰“é“æ¥æœ¬åœ°éƒ¨ç½²ç©ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;IndexTTS2 æ˜¯é¦–ä¸ªè‡ªå›å½’é›¶æ ·æœ¬ TTS ç³»ç»Ÿï¼Œæ”¯æŒç²¾å‡†æ—¶é•¿æ§åˆ¶ã€éŸ³è‰²æƒ…æ„Ÿè§£è€¦ã€å¤šæ¨¡æ€è¾“å…¥ç­‰åˆ›æ–°åŠŸèƒ½ï¼Œ</summary>
      
    
    
    
    <category term="äººå·¥æ™ºèƒ½" scheme="https://www.yanzhenjie.com/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
    
    <category term="IndexTTS-2" scheme="https://www.yanzhenjie.com/tags/IndexTTS-2/"/>
    
  </entry>
  
  <entry>
    <title>No rule to make target &#39;pyconfig.h&#39;</title>
    <link href="https://www.yanzhenjie.com/post/20251001/8c338a8e95f2/"/>
    <id>https://www.yanzhenjie.com/post/20251001/8c338a8e95f2/</id>
    <published>2025-10-01T12:42:26.000Z</published>
    <updated>2025-10-01T13:27:25.432Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>No rule to make target <code>pyconfig.h&#39;, needed by </code>Programs&#x2F;python.oâ€™</p></blockquote><p>æˆ‘æ—¥å¸¸ä½¿ç”¨ pyenv ç®¡ç†ä¸åŒçš„ Python ç‰ˆæœ¬ï¼Œæœ€è¿‘åœ¨ MacOS 13.2 æµ‹è¯• IndexTTS 2 æ—¶å‘ç°ç¼–è¯‘ç¯å¢ƒéœ€è¦å‡çº§ï¼ˆç”±äºæœ¬æ–‡é‡åˆ°çš„é—®é¢˜æˆ‘æ€€ç–‘ä¸ç”¨å‡çº§ï¼‰ ï¼Œæœ€è¿‘ç”± MacOS 13.2 å‡çº§åˆ° MacOS 15.7 åï¼Œéœ€è¦é‡è£… pyenv ä¸­çš„å‡ ä¸ª python ç‰ˆæœ¬ã€‚</p><p>æˆ‘çš„ç¯å¢ƒï¼š</p><ul><li>MacOS Sequia 15.7</li><li>Command_Line_Tools_for_Xcode_16.4_MacOS_15.3</li><li>Homebrew 4.6.15</li><li>pyenv 2.6.8</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew list</span></span><br><span class="line">==&gt; Formulae</span><br><span class="line">autoconf        ca-certificates llvm            m4              ncurses         openssl@1.1     pkgconf         python@3.13     sqlite          xz              zlib</span><br><span class="line">bzip2           libtommath      lz4             mpdecimal       openfst         openssl@3       pyenv           readline        tcl-tk          z3              zstd</span><br><span class="line"></span><br><span class="line">==&gt; Casks</span><br></pre></td></tr></table></figure><p>æˆ‘çš„é—®é¢˜è¡¨ç°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">pyenv install 3.9</span><br><span class="line">python-build: use openssl@3 from homebrew</span><br><span class="line">python-build: use readline from homebrew</span><br><span class="line">Downloading Python-3.9.23.tar.xz...</span><br><span class="line"><span class="meta prompt_">-&gt; </span><span class="language-bash">https://www.python.org/ftp/python/3.9.23/Python-3.9.23.tar.xz</span></span><br><span class="line">Installing Python-3.9.23...</span><br><span class="line">python-build: use tcl-tk from homebrew</span><br><span class="line">python-build: use readline from homebrew</span><br><span class="line">python-build: use ncurses from homebrew</span><br><span class="line">python-build: use zlib from xcode sdk</span><br><span class="line"></span><br><span class="line">BUILD FAILED (OS X 15.7 using python-build 2.6.8)</span><br><span class="line"></span><br><span class="line">Inspect or clean up the working tree at /var/folders/wh/33kqcmn975z7bsfmvmlrsy880000gp/T/python-build.20251001200658.15776</span><br><span class="line">Results logged to /var/folders/wh/33kqcmn975z7bsfmvmlrsy880000gp/T/python-build.20251001200658.15776.log</span><br><span class="line"></span><br><span class="line">Last 10 log lines:</span><br><span class="line">creating Modules/Setup.local</span><br><span class="line">creating Makefile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">If you want a release build with all stable optimizations active (PGO, etc),</span><br><span class="line">please run ./configure --enable-optimizations</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">make: *** No rule to make target `pyconfig.h&#x27;, needed by `Programs/python.o&#x27;.  Stop.</span><br><span class="line">make: *** Waiting for unfinished jobs....</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„é”™è¯¯æ˜¯ï¼šNo rule to make target <code>pyconfig.h&#39;, needed by </code>Programs&#x2F;python.oâ€™ã€‚</p><p>ç„¶ååœ¨ pyenv é¡¹ç›®ä¸‹å’Œ StackOverflow æ‰¾äº†å¾ˆå¤šèµ„æ–™åšäº†ä¸€äº›å°è¯•ï¼Œæˆ‘åšè¿‡å“ªäº›å°è¯•ï¼Ÿ</p><ul><li><p>Wikiï¼Œè¿™é‡Œçš„å¾ˆå¤šç»†èŠ‚è¿˜æ˜¯å€¼å¾—ä¸€çœ‹ï¼š</p><ol><li>å‚è€ƒ<a class="link"   href="https://github.com/pyenv/pyenv/wiki#suggested-build-environment" >https://github.com/pyenv/pyenv/wiki#suggested-build-environment<i class="fas fa-external-link-alt"></i></a>ï¼Œæ¯ä¸€é¡¹éƒ½åšäº†æ£€æŸ¥å’Œå°è¯•ï¼Œå‡é‡åˆ°åŒæ ·çš„é—®é¢˜ã€‚</li><li>å‚è€ƒ<a class="link"   href="https://github.com/pyenv/pyenv/wiki/Common-build-problems" >https://github.com/pyenv/pyenv/wiki/Common-build-problems<i class="fas fa-external-link-alt"></i></a>ï¼Œæ¯ä¸€é¡¹éƒ½åšäº†æ£€æŸ¥å’Œå°è¯•ï¼Œå‡é‡åˆ°åŒæ ·çš„é—®é¢˜ã€‚</li></ol></li><li><p>StackOverflowï¼š</p><ol><li><a class="link"   href="https://stackoverflow.com/questions/51551557/pyenv-build-failed-installing-python-on-macos" >https://stackoverflow.com/questions/51551557/pyenv-build-failed-installing-python-on-macos<i class="fas fa-external-link-alt"></i></a></li></ol></li><li><p>Issuesï¼š</p><ol><li><a class="link"   href="https://github.com/pyenv/pyenv/issues/1354" >https://github.com/pyenv/pyenv/issues/1354<i class="fas fa-external-link-alt"></i></a>ï¼Œé—®é¢˜ç›¸åŒï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰ç†è§£ç­”æ¡ˆï¼Œå¿½ç•¥ç­”æ¡ˆæåˆ°çš„ä¸€ä¸ªå‘½ä»¤ï¼Œæ²¡æœ‰åšæ£€æŸ¥ã€‚</li><li><a class="link"   href="https://github.com/pyenv/pyenv/issues/3310" >https://github.com/pyenv/pyenv/issues/3310<i class="fas fa-external-link-alt"></i></a>ï¼Œé—®é¢˜ç±»ä¼¼ï¼Œä½†æ²¡æœ‰è§£å†³ã€‚</li><li><a class="link"   href="https://github.com/pyenv/pyenv/issues/3062" >https://github.com/pyenv/pyenv/issues/3062<i class="fas fa-external-link-alt"></i></a>ï¼Œåœ¨è¿™é‡Œæ‰¾åˆ°äº†ç­”æ¡ˆï¼Œä½†å†ç¨‹æœ‰ç‚¹æªå¿ƒã€‚</li></ol></li></ul><p>æœ€ç»ˆæ˜¯ Issues ä¸­çš„ 1 å’Œ 3 è§£å†³äº†æˆ‘çš„é—®é¢˜ï¼Œæˆ‘æ¥ä¸‹æ¥è¯´ä¸‹åŸå› ã€‚</p><p>æœ€å¼€å§‹ï¼Œæˆ‘æ˜¯åœ¨ Issues ä¸­æ‰¾ç­”æ¡ˆçš„ï¼Œæ‰€ä»¥ä¸€ç›´åœ¨çœ‹ Issuesï¼Œä½†æ˜¯å…¶å®é—®é¢˜<code>#1354</code>ä¸­å·²ç»è®²åˆ°äº†ï¼Œä½†æ˜¯æ²¡æœ‰å¼•èµ·æˆ‘çš„é‡è§†ï¼š</p><blockquote><p>Problem solved. I had overridden the diff command in my .bash_profile. Uncommenting those lines make the .&#x2F;configure step detect that pyconfig.h needed to be created!</p></blockquote><p>æˆ‘åœ¨<code>~/.zshrc</code>ã€<code>/etc/zshrc</code>ã€<code>/etc/zprofile</code>ã€<code>/etc/paths</code>ä¸­éƒ½æ‰¾äº†æœ‰æ²¡æœ‰ä»€ä¹ˆé…ç½®è¦†ç›–äº† diff å‘½ä»¤ï¼Œä½†æ˜¯æ²¡æœ‰æ‰¾åˆ°ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘å°±æœ‰ç‚¹éƒé—·äº†ï¼Œå°±ç»§ç»­å°è¯•äº† Wikiã€StackOverflow ä¸­æåˆ°çš„ä¸€äº›æ–¹æ¡ˆï¼Œæµªè´¹äº†ä¸ªæŠŠå°æ—¶çš„æ—¶é—´å§ã€‚</p><p>å°±åœ¨åˆšè¾ï¼Œç„¶åå›åˆ°é—®é¢˜<code>#3062</code>ä¸­å†è¿‡ä¸€éï¼Œå‘ç°æˆå‘˜æåˆ°ï¼š</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ eval &#x27;$AWK -f &quot;$ac_tmp/defines.awk&quot;&#x27; &#x27; &#x27;\&#x27;&#x27;pyconfig.h.in&#x27;\&#x27;&#x27;&#x27;</span><br><span class="line">++ awk -f ./confxRYd6w/defines.awk pyconfig.h.in</span><br><span class="line">+ diff pyconfig.h ./confxRYd6w/config.h</span><br></pre></td></tr></table></figure><p>This is where it goes wrong. Need to closely examine what happens at this moment: what is your and , if the file and look normal, what the command outputs, what code the returns.<code>awk</code> <code>diff</code> <code>.awk</code> <code>pyconfig.h.in</code> <code>awk</code> <code>diff</code><br>Perhaps we could arrange a remote access session for me to examine that on your system? Contact me on the e-mail in my profile if youâ€™re interested.</p></blockquote><p>ç„¶åæˆ‘ç«‹åˆ»åœ¨é¡µé¢ä¸Šæœç´¢<code>eval &#39;$AWK -f</code>ï¼Œå‘ç°å‡ºé—®é¢˜çš„äººæ—¥å¿—é‡Œç¡®å®æœ‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+ printf &#x27;%s\n&#x27; &#x27;/* pyconfig.h.  Generated from pyconfig.h.in by configure.  */&#x27;</span><br><span class="line">+ eval &#x27;$AWK -f &quot;$ac_tmp/defines.awk&quot;&#x27; &#x27; &#x27;\&#x27;&#x27;pyconfig.h.in&#x27;\&#x27;&#x27;&#x27;</span><br><span class="line">++ awk -f ./confxRYd6w/defines.awk pyconfig.h.in</span><br><span class="line">+ diff pyconfig.h ./confxRYd6w/config.h</span><br><span class="line">+ printf &#x27;%s\n&#x27; &#x27;config.status:1854: pyconfig.h is unchanged&#x27;</span><br><span class="line">+ printf &#x27;%s\n&#x27; &#x27;config.status: pyconfig.h is unchanged&#x27;</span><br><span class="line">config.status: pyconfig.h is unchanged</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°å…³é”®è¯<code>unchanged</code>ï¼Œæˆ‘åˆæƒ³åˆ°äº† diff å‘½ä»¤ï¼Œèµ¶ç´§æ ¹æ® log æç¤ºè·¯å¾„æ‰“å¼€è¯¦ç»†æ—¥å¿—&#x2F;var&#x2F;folders&#x2F;wh&#x2F;33kqcmn975z7bsfmvmlrsy880000gp&#x2F;T&#x2F;python-build.20251001200658.15776.logï¼š</p><p>æœç´¢<code>unchanged</code>æœç„¶çœ‹åˆ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">config.status: creating pyconfig.h</span><br><span class="line">config.status: pyconfig.h is unchanged</span><br><span class="line">creating Modules/Setup.local</span><br><span class="line">creating Makefile</span><br></pre></td></tr></table></figure><p>OKï¼ŒåŸºæœ¬ä¸Šç¡®è®¤å°±æ˜¯ diff å‘½ä»¤å¼•èµ·çš„ï¼Œäºæ˜¯æˆ‘é©¬ä¸Šå»ç¿»äº†<code>~/.zshrc</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Harmony</span></span><br><span class="line">export HM_CMD_LINE_TOOLS=$HOME/Developer/Harmony/command-line-tools</span><br><span class="line">export HM_SDK_HOME=$HM_CMD_LINE_TOOLS/sdk/default</span><br><span class="line">export PATH=$HM_CMD_LINE_TOOLS/bin:$HM_SDK_HOME/openharmony/toolchains:$PATH</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> HDC_SERVER_PORT=7035</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">launchctl setenv HDC_SERVER_PORT <span class="variable">$HDC_SERVER_PORT</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> HDC_SERVER_PORT</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Android</span></span><br><span class="line">export ANDROID_HOME=$HOME/Library/Android/sdk</span><br><span class="line">export PATH=$ANDROID_HOME/platform-tools:$PATH</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> ANDROID_NDK_HOME=<span class="variable">$ANDROID_HOME</span>/ndk/21.4.7075529</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> TOOLCHAIN=<span class="variable">$ANDROID_NDK_HOME</span>/toolchains/llvm/prebuilt/darwin-x86_64</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">export</span> PATH=<span class="variable">$ANDROID_HOME</span>/platform-tools2:<span class="variable">$TOOLCHAIN</span>:<span class="variable">$PATH</span></span></span><br></pre></td></tr></table></figure><p>æˆ‘å…³æ³¨åˆ°äº†è¿™ä¸€æ®µï¼ŒAndroid çš„ç¯å¢ƒæˆ‘ç”¨äº†å¾ˆå¤šå¹´äº†ï¼ŒæœŸé—´ä¹Ÿå®‰è£…è¿‡ pyenvï¼Œæ²¡æœ‰å‡ºè¿‡é—®é¢˜ï¼ŒHarmony çš„ç¯å¢ƒæ˜¯å»å¹´å®‰è£…çš„ï¼Œä½†æ˜¯ pyenv å’Œ pyenv å®‰è£…çš„ Python æ˜¯åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘æ„Ÿè§‰é—®é¢˜å°±åœ¨è¿™é‡Œã€‚</p><p>äºæ˜¯æˆ‘æŸ¥äº†ä¸‹ diff å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">which</span> diff</span></span><br><span class="line">~/Developer/Harmony/command-line-tools/sdk/default/openharmony/toolchains/diff</span><br></pre></td></tr></table></figure><p>ç‹å¾·å‘ï¼Ÿæœç„¶æ˜¯ä½ å°å­ï¼Œåœ¨è¿™å‡ ç§’ä¹‹å‰æˆ‘ç”šè‡³æ‰“å¼€äº† Harmony ç›®å½•éƒ½æ²¡çœ‹è§ï¼ˆç–å¿½äº†ï¼Œå¤ªç›¸ä¿¡åä¸ºäº†ï¼‰ã€‚</p><p>ç„¶åæ³¨ä» PATH ä¸­ç§»é™¤<code>$HM_SDK_HOME/openharmony/toolchains</code>åå°±æ¢å¤äº†ã€‚</p><hr><p>è´´ä¸€ä¸‹å®Œæ•´çš„æ—¥å¿—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br></pre></td><td class="code"><pre><span class="line">/var/folders/wh/33kqcmn975z7bsfmvmlrsy880000gp/T/python-build.20251001202802.30502 ~/Workspace/ModelScope/IndexTTS-2-Demo</span><br><span class="line">/var/folders/wh/33kqcmn975z7bsfmvmlrsy880000gp/T/python-build.20251001202802.30502/Python-3.9.23 /var/folders/wh/33kqcmn975z7bsfmvmlrsy880000gp/T/python-build.20251001202802.30502 ~/Workspace/ModelScope/IndexTTS-2-Demo</span><br><span class="line">checking build system type... aarch64-apple-darwin24.6.0</span><br><span class="line">checking host system type... aarch64-apple-darwin24.6.0</span><br><span class="line">checking for python3.9... no</span><br><span class="line">checking for python3... python3</span><br><span class="line">checking for --enable-universalsdk... no</span><br><span class="line">checking for --with-universal-archs... no</span><br><span class="line">checking MACHDEP... &quot;darwin&quot;</span><br><span class="line">checking for gcc... clang</span><br><span class="line">checking whether the C compiler works... yes</span><br><span class="line">checking for C compiler default output file name... a.out</span><br><span class="line">checking for suffix of executables...</span><br><span class="line">checking whether we are cross compiling... no</span><br><span class="line">checking for suffix of object files... o</span><br><span class="line">checking whether we are using the GNU C compiler... yes</span><br><span class="line">checking whether clang accepts -g... yes</span><br><span class="line">checking for clang option to accept ISO C89... none needed</span><br><span class="line">checking how to run the C preprocessor... clang -E</span><br><span class="line">checking for grep that handles long lines and -e... /usr/bin/grep</span><br><span class="line">checking for a sed that does not truncate output... /usr/bin/sed</span><br><span class="line">checking for --with-cxx-main=&lt;compiler&gt;... no</span><br><span class="line">checking for clang++... no</span><br><span class="line">configure:</span><br><span class="line"></span><br><span class="line">  By default, distutils will build C++ extension modules with &quot;clang++&quot;.</span><br><span class="line">  If this is not intended, then set CXX on the configure command line.</span><br><span class="line"></span><br><span class="line">checking for the platform triplet based on compiler characteristics... darwin</span><br><span class="line">checking for multiarch...</span><br><span class="line">checking for -Wl,--no-as-needed... no</span><br><span class="line">checking for egrep... /usr/bin/grep -E</span><br><span class="line">checking for ANSI C header files... yes</span><br><span class="line">checking for sys/types.h... yes</span><br><span class="line">checking for sys/stat.h... yes</span><br><span class="line">checking for stdlib.h... yes</span><br><span class="line">checking for string.h... yes</span><br><span class="line">checking for memory.h... yes</span><br><span class="line">checking for strings.h... yes</span><br><span class="line">checking for inttypes.h... yes</span><br><span class="line">checking for stdint.h... yes</span><br><span class="line">checking for unistd.h... yes</span><br><span class="line">checking minix/config.h usability... no</span><br><span class="line">checking minix/config.h presence... no</span><br><span class="line">checking for minix/config.h... no</span><br><span class="line">checking whether it is safe to define __EXTENSIONS__... yes</span><br><span class="line">checking for the Android API level... not Android</span><br><span class="line">checking for --with-suffix...</span><br><span class="line">checking for case-insensitive build directory... yes</span><br><span class="line">checking LIBRARY... libpython$(VERSION)$(ABIFLAGS).a</span><br><span class="line">checking LINKCC... $(PURIFY) $(MAINCC)</span><br><span class="line">checking EXPORTSYMS...</span><br><span class="line">checking for GNU ld... no</span><br><span class="line">checking for --enable-shared... yes</span><br><span class="line">checking for --enable-profiling... no</span><br><span class="line">checking LDLIBRARY... libpython$(LDVERSION).dylib</span><br><span class="line">checking for ar... ar</span><br><span class="line">checking for readelf... no</span><br><span class="line">checking for a BSD-compatible install... /usr/bin/install -c</span><br><span class="line">checking for a thread-safe mkdir -p... ./install-sh -c -d</span><br><span class="line">checking for --with-pydebug... no</span><br><span class="line">checking for --with-trace-refs... no</span><br><span class="line">checking for --with-assertions... no</span><br><span class="line">checking for --enable-optimizations... no</span><br><span class="line">checking PROFILE_TASK... -m test --pgo</span><br><span class="line">checking for --with-lto... no</span><br><span class="line">checking for llvm-profdata... no</span><br><span class="line">configure: llvm-profdata found via xcrun: /usr/bin/xcrun llvm-profdata</span><br><span class="line">checking for -Wextra... yes</span><br><span class="line">checking whether clang accepts and needs -fno-strict-aliasing... no</span><br><span class="line">checking if we can turn off clang unused result warning... yes</span><br><span class="line">checking if we can turn off clang unused parameter warning... yes</span><br><span class="line">checking if we can turn off clang missing field initializers warning... yes</span><br><span class="line">checking if we can turn on clang mixed sign comparison warning... yes</span><br><span class="line">checking if we can turn on clang unreachable code warning... yes</span><br><span class="line">checking if we can turn on clang strict-prototypes warning... no</span><br><span class="line">checking if we can make implicit function declaration an error in clang... yes</span><br><span class="line">checking if we can use visibility in clang... yes</span><br><span class="line">checking which MACOSX_DEPLOYMENT_TARGET to use... 15.7</span><br><span class="line">checking if specified universal architectures work... yes</span><br><span class="line">checking whether pthreads are available without options... yes</span><br><span class="line">checking whether clang++ also accepts flags for thread support... no</span><br><span class="line">checking for ANSI C header files... (cached) yes</span><br><span class="line">checking asm/types.h usability... no</span><br><span class="line">checking asm/types.h presence... no</span><br><span class="line">checking for asm/types.h... no</span><br><span class="line">checking crypt.h usability... no</span><br><span class="line">checking crypt.h presence... no</span><br><span class="line">checking for crypt.h... no</span><br><span class="line">checking conio.h usability... no</span><br><span class="line">checking conio.h presence... no</span><br><span class="line">checking for conio.h... no</span><br><span class="line">checking direct.h usability... no</span><br><span class="line">checking direct.h presence... no</span><br><span class="line">checking for direct.h... no</span><br><span class="line">checking dlfcn.h usability... yes</span><br><span class="line">checking dlfcn.h presence... yes</span><br><span class="line">checking for dlfcn.h... yes</span><br><span class="line">checking errno.h usability... yes</span><br><span class="line">checking errno.h presence... yes</span><br><span class="line">checking for errno.h... yes</span><br><span class="line">checking fcntl.h usability... yes</span><br><span class="line">checking fcntl.h presence... yes</span><br><span class="line">checking for fcntl.h... yes</span><br><span class="line">checking grp.h usability... yes</span><br><span class="line">checking grp.h presence... yes</span><br><span class="line">checking for grp.h... yes</span><br><span class="line">checking ieeefp.h usability... no</span><br><span class="line">checking ieeefp.h presence... no</span><br><span class="line">checking for ieeefp.h... no</span><br><span class="line">checking io.h usability... no</span><br><span class="line">checking io.h presence... no</span><br><span class="line">checking for io.h... no</span><br><span class="line">checking langinfo.h usability... yes</span><br><span class="line">checking langinfo.h presence... yes</span><br><span class="line">checking for langinfo.h... yes</span><br><span class="line">checking libintl.h usability... no</span><br><span class="line">checking libintl.h presence... no</span><br><span class="line">checking for libintl.h... no</span><br><span class="line">checking process.h usability... no</span><br><span class="line">checking process.h presence... no</span><br><span class="line">checking for process.h... no</span><br><span class="line">checking pthread.h usability... yes</span><br><span class="line">checking pthread.h presence... yes</span><br><span class="line">checking for pthread.h... yes</span><br><span class="line">checking sched.h usability... yes</span><br><span class="line">checking sched.h presence... yes</span><br><span class="line">checking for sched.h... yes</span><br><span class="line">checking shadow.h usability... no</span><br><span class="line">checking shadow.h presence... no</span><br><span class="line">checking for shadow.h... no</span><br><span class="line">checking signal.h usability... yes</span><br><span class="line">checking signal.h presence... yes</span><br><span class="line">checking for signal.h... yes</span><br><span class="line">checking stropts.h usability... no</span><br><span class="line">checking stropts.h presence... no</span><br><span class="line">checking for stropts.h... no</span><br><span class="line">checking termios.h usability... yes</span><br><span class="line">checking termios.h presence... yes</span><br><span class="line">checking for termios.h... yes</span><br><span class="line">checking utime.h usability... yes</span><br><span class="line">checking utime.h presence... yes</span><br><span class="line">checking for utime.h... yes</span><br><span class="line">checking poll.h usability... yes</span><br><span class="line">checking poll.h presence... yes</span><br><span class="line">checking for poll.h... yes</span><br><span class="line">checking sys/devpoll.h usability... no</span><br><span class="line">checking sys/devpoll.h presence... no</span><br><span class="line">checking for sys/devpoll.h... no</span><br><span class="line">checking sys/epoll.h usability... no</span><br><span class="line">checking sys/epoll.h presence... no</span><br><span class="line">checking for sys/epoll.h... no</span><br><span class="line">checking sys/poll.h usability... yes</span><br><span class="line">checking sys/poll.h presence... yes</span><br><span class="line">checking for sys/poll.h... yes</span><br><span class="line">checking sys/audioio.h usability... no</span><br><span class="line">checking sys/audioio.h presence... no</span><br><span class="line">checking for sys/audioio.h... no</span><br><span class="line">checking sys/xattr.h usability... yes</span><br><span class="line">checking sys/xattr.h presence... yes</span><br><span class="line">checking for sys/xattr.h... yes</span><br><span class="line">checking sys/bsdtty.h usability... no</span><br><span class="line">checking sys/bsdtty.h presence... no</span><br><span class="line">checking for sys/bsdtty.h... no</span><br><span class="line">checking sys/event.h usability... yes</span><br><span class="line">checking sys/event.h presence... yes</span><br><span class="line">checking for sys/event.h... yes</span><br><span class="line">checking sys/file.h usability... yes</span><br><span class="line">checking sys/file.h presence... yes</span><br><span class="line">checking for sys/file.h... yes</span><br><span class="line">checking sys/ioctl.h usability... yes</span><br><span class="line">checking sys/ioctl.h presence... yes</span><br><span class="line">checking for sys/ioctl.h... yes</span><br><span class="line">checking sys/kern_control.h usability... yes</span><br><span class="line">checking sys/kern_control.h presence... yes</span><br><span class="line">checking for sys/kern_control.h... yes</span><br><span class="line">checking sys/loadavg.h usability... no</span><br><span class="line">checking sys/loadavg.h presence... no</span><br><span class="line">checking for sys/loadavg.h... no</span><br><span class="line">checking sys/lock.h usability... yes</span><br><span class="line">checking sys/lock.h presence... yes</span><br><span class="line">checking for sys/lock.h... yes</span><br><span class="line">checking sys/mkdev.h usability... no</span><br><span class="line">checking sys/mkdev.h presence... no</span><br><span class="line">checking for sys/mkdev.h... no</span><br><span class="line">checking sys/modem.h usability... no</span><br><span class="line">checking sys/modem.h presence... no</span><br><span class="line">checking for sys/modem.h... no</span><br><span class="line">checking sys/param.h usability... yes</span><br><span class="line">checking sys/param.h presence... yes</span><br><span class="line">checking for sys/param.h... yes</span><br><span class="line">checking sys/random.h usability... yes</span><br><span class="line">checking sys/random.h presence... yes</span><br><span class="line">checking for sys/random.h... yes</span><br><span class="line">checking sys/select.h usability... yes</span><br><span class="line">checking sys/select.h presence... yes</span><br><span class="line">checking for sys/select.h... yes</span><br><span class="line">checking sys/sendfile.h usability... no</span><br><span class="line">checking sys/sendfile.h presence... no</span><br><span class="line">checking for sys/sendfile.h... no</span><br><span class="line">checking sys/socket.h usability... yes</span><br><span class="line">checking sys/socket.h presence... yes</span><br><span class="line">checking for sys/socket.h... yes</span><br><span class="line">checking sys/statvfs.h usability... yes</span><br><span class="line">checking sys/statvfs.h presence... yes</span><br><span class="line">checking for sys/statvfs.h... yes</span><br><span class="line">checking for sys/stat.h... (cached) yes</span><br><span class="line">checking sys/syscall.h usability... yes</span><br><span class="line">checking sys/syscall.h presence... yes</span><br><span class="line">checking for sys/syscall.h... yes</span><br><span class="line">checking sys/sys_domain.h usability... yes</span><br><span class="line">checking sys/sys_domain.h presence... yes</span><br><span class="line">checking for sys/sys_domain.h... yes</span><br><span class="line">checking sys/termio.h usability... no</span><br><span class="line">checking sys/termio.h presence... no</span><br><span class="line">checking for sys/termio.h... no</span><br><span class="line">checking sys/time.h usability... yes</span><br><span class="line">checking sys/time.h presence... yes</span><br><span class="line">checking for sys/time.h... yes</span><br><span class="line">checking sys/times.h usability... yes</span><br><span class="line">checking sys/times.h presence... yes</span><br><span class="line">checking for sys/times.h... yes</span><br><span class="line">checking for sys/types.h... (cached) yes</span><br><span class="line">checking sys/uio.h usability... yes</span><br><span class="line">checking sys/uio.h presence... yes</span><br><span class="line">checking for sys/uio.h... yes</span><br><span class="line">checking sys/un.h usability... yes</span><br><span class="line">checking sys/un.h presence... yes</span><br><span class="line">checking for sys/un.h... yes</span><br><span class="line">checking sys/utsname.h usability... yes</span><br><span class="line">checking sys/utsname.h presence... yes</span><br><span class="line">checking for sys/utsname.h... yes</span><br><span class="line">checking sys/wait.h usability... yes</span><br><span class="line">checking sys/wait.h presence... yes</span><br><span class="line">checking for sys/wait.h... yes</span><br><span class="line">checking pty.h usability... no</span><br><span class="line">checking pty.h presence... no</span><br><span class="line">checking for pty.h... no</span><br><span class="line">checking libutil.h usability... no</span><br><span class="line">checking libutil.h presence... no</span><br><span class="line">checking for libutil.h... no</span><br><span class="line">checking sys/resource.h usability... yes</span><br><span class="line">checking sys/resource.h presence... yes</span><br><span class="line">checking for sys/resource.h... yes</span><br><span class="line">checking netpacket/packet.h usability... no</span><br><span class="line">checking netpacket/packet.h presence... no</span><br><span class="line">checking for netpacket/packet.h... no</span><br><span class="line">checking sysexits.h usability... yes</span><br><span class="line">checking sysexits.h presence... yes</span><br><span class="line">checking for sysexits.h... yes</span><br><span class="line">checking bluetooth.h usability... no</span><br><span class="line">checking bluetooth.h presence... no</span><br><span class="line">checking for bluetooth.h... no</span><br><span class="line">checking linux/tipc.h usability... no</span><br><span class="line">checking linux/tipc.h presence... no</span><br><span class="line">checking for linux/tipc.h... no</span><br><span class="line">checking linux/random.h usability... no</span><br><span class="line">checking linux/random.h presence... no</span><br><span class="line">checking for linux/random.h... no</span><br><span class="line">checking spawn.h usability... yes</span><br><span class="line">checking spawn.h presence... yes</span><br><span class="line">checking for spawn.h... yes</span><br><span class="line">checking util.h usability... yes</span><br><span class="line">checking util.h presence... yes</span><br><span class="line">checking for util.h... yes</span><br><span class="line">checking alloca.h usability... yes</span><br><span class="line">checking alloca.h presence... yes</span><br><span class="line">checking for alloca.h... yes</span><br><span class="line">checking endian.h usability... no</span><br><span class="line">checking endian.h presence... no</span><br><span class="line">checking for endian.h... no</span><br><span class="line">checking sys/endian.h usability... yes</span><br><span class="line">checking sys/endian.h presence... yes</span><br><span class="line">checking for sys/endian.h... yes</span><br><span class="line">checking sys/sysmacros.h usability... no</span><br><span class="line">checking sys/sysmacros.h presence... no</span><br><span class="line">checking for sys/sysmacros.h... no</span><br><span class="line">checking linux/auxvec.h usability... no</span><br><span class="line">checking linux/auxvec.h presence... no</span><br><span class="line">checking for linux/auxvec.h... no</span><br><span class="line">checking sys/auxv.h usability... no</span><br><span class="line">checking sys/auxv.h presence... no</span><br><span class="line">checking for sys/auxv.h... no</span><br><span class="line">checking linux/memfd.h usability... no</span><br><span class="line">checking linux/memfd.h presence... no</span><br><span class="line">checking for linux/memfd.h... no</span><br><span class="line">checking linux/wait.h usability... no</span><br><span class="line">checking linux/wait.h presence... no</span><br><span class="line">checking for linux/wait.h... no</span><br><span class="line">checking sys/memfd.h usability... no</span><br><span class="line">checking sys/memfd.h presence... no</span><br><span class="line">checking for sys/memfd.h... no</span><br><span class="line">checking sys/mman.h usability... yes</span><br><span class="line">checking sys/mman.h presence... yes</span><br><span class="line">checking for sys/mman.h... yes</span><br><span class="line">checking for dirent.h that defines DIR... yes</span><br><span class="line">checking for library containing opendir... none required</span><br><span class="line">checking whether sys/types.h defines makedev... yes</span><br><span class="line">checking bluetooth/bluetooth.h usability... no</span><br><span class="line">checking bluetooth/bluetooth.h presence... no</span><br><span class="line">checking for bluetooth/bluetooth.h... no</span><br><span class="line">checking for net/if.h... yes</span><br><span class="line">checking for linux/netlink.h... no</span><br><span class="line">checking for linux/qrtr.h... no</span><br><span class="line">checking for linux/vm_sockets.h... no</span><br><span class="line">checking for linux/can.h... no</span><br><span class="line">checking for linux/can/bcm.h... no</span><br><span class="line">checking for linux/can/j1939.h... no</span><br><span class="line">checking for linux/can/raw.h... no</span><br><span class="line">checking for clock_t in time.h... yes</span><br><span class="line">checking for makedev... yes</span><br><span class="line">checking for le64toh... yes</span><br><span class="line">checking for mode_t... yes</span><br><span class="line">checking for off_t... yes</span><br><span class="line">checking for pid_t... yes</span><br><span class="line">checking for size_t... yes</span><br><span class="line">checking for uid_t in sys/types.h... yes</span><br><span class="line">checking for ssize_t... yes</span><br><span class="line">checking for __uint128_t... yes</span><br><span class="line">checking size of int... 4</span><br><span class="line">checking size of long... 8</span><br><span class="line">checking size of long long... 8</span><br><span class="line">checking size of void *... 8</span><br><span class="line">checking size of short... 2</span><br><span class="line">checking size of float... 4</span><br><span class="line">checking size of double... 8</span><br><span class="line">checking size of fpos_t... 8</span><br><span class="line">checking size of size_t... 8</span><br><span class="line">checking size of pid_t... 4</span><br><span class="line">checking size of uintptr_t... 8</span><br><span class="line">checking for long double... yes</span><br><span class="line">checking size of long double... 8</span><br><span class="line">checking size of _Bool... 1</span><br><span class="line">checking size of off_t... 8</span><br><span class="line">checking whether to enable large file support... no</span><br><span class="line">checking size of time_t... 8</span><br><span class="line">checking for pthread_t... yes</span><br><span class="line">checking size of pthread_t... 8</span><br><span class="line">checking size of pthread_key_t... 8</span><br><span class="line">checking whether pthread_key_t is compatible with int... no</span><br><span class="line">checking for --enable-framework... no</span><br><span class="line">checking for dyld... always on for Darwin</span><br><span class="line">checking the extension of shared libraries... .so</span><br><span class="line">checking LDSHARED... $(CC) -bundle -undefined dynamic_lookup</span><br><span class="line">checking CCSHARED...</span><br><span class="line">checking LINKFORSHARED... -Wl,-stack_size,1000000  -framework CoreFoundation</span><br><span class="line">checking CFLAGSFORSHARED... $(CCSHARED)</span><br><span class="line">checking SHLIBS... $(LIBS)</span><br><span class="line">checking for sendfile in -lsendfile... no</span><br><span class="line">checking for dlopen in -ldl... yes</span><br><span class="line">checking for shl_load in -ldld... no</span><br><span class="line">checking uuid/uuid.h usability... yes</span><br><span class="line">checking uuid/uuid.h presence... yes</span><br><span class="line">checking for uuid/uuid.h... yes</span><br><span class="line">checking uuid.h usability... no</span><br><span class="line">checking uuid.h presence... no</span><br><span class="line">checking for uuid.h... no</span><br><span class="line">checking for uuid_generate_time_safe... no</span><br><span class="line">checking for uuid_generate_time in -luuid... no</span><br><span class="line">checking for uuid_create... no</span><br><span class="line">checking for uuid_enc_be... no</span><br><span class="line">checking for library containing sem_init... none required</span><br><span class="line">checking for textdomain in -lintl... no</span><br><span class="line">checking aligned memory access is required... no</span><br><span class="line">checking for --with-hash-algorithm... default</span><br><span class="line">checking for --with-tzpath... &quot;/usr/share/zoneinfo:/usr/lib/zoneinfo:/usr/share/lib/zoneinfo:/etc/zoneinfo&quot;</span><br><span class="line">checking for --with-address-sanitizer... no</span><br><span class="line">checking for --with-memory-sanitizer... no</span><br><span class="line">checking for --with-undefined-behavior-sanitizer... no</span><br><span class="line">checking for t_open in -lnsl... no</span><br><span class="line">checking for socket in -lsocket... no</span><br><span class="line">checking for --with-libs... no</span><br><span class="line">checking for pkg-config... /opt/homebrew/bin/pkg-config</span><br><span class="line">checking pkg-config is at least version 0.9.0... yes</span><br><span class="line">checking for --with-system-expat... no</span><br><span class="line">checking for --with-system-ffi... no</span><br><span class="line">checking for --with-system-libmpdec... no</span><br><span class="line">checking for --with-decimal-contextvar... yes</span><br><span class="line">checking for --enable-loadable-sqlite-extensions... no</span><br><span class="line">checking for --with-tcltk-includes... -I/opt/homebrew/opt/tcl-tk/include/tcl-tk</span><br><span class="line">checking for --with-tcltk-libs... -L/opt/homebrew/opt/tcl-tk/lib -ltcl9.0 -ltk9.0</span><br><span class="line">checking for --with-dbmliborder...</span><br><span class="line">checking if PTHREAD_SCOPE_SYSTEM is supported... no</span><br><span class="line">checking for pthread_sigmask... yes</span><br><span class="line">checking for pthread_getcpuclockid... no</span><br><span class="line">checking if --enable-ipv6 is specified... yes</span><br><span class="line">checking if RFC2553 API is available... yes</span><br><span class="line">checking ipv6 stack type... kame</span><br><span class="line">using libc</span><br><span class="line">checking for CAN_RAW_FD_FRAMES... no</span><br><span class="line">checking for CAN_RAW_JOIN_FILTERS... no</span><br><span class="line">checking for --with-doc-strings... yes</span><br><span class="line">checking for --with-pymalloc... yes</span><br><span class="line">checking for --with-c-locale-coercion... yes</span><br><span class="line">checking for --with-valgrind... no</span><br><span class="line">checking for --with-dtrace... no</span><br><span class="line">checking for dlopen... yes</span><br><span class="line">checking DYNLOADFILE... dynload_shlib.o</span><br><span class="line">checking MACHDEP_OBJS... none</span><br><span class="line">checking for alarm... yes</span><br><span class="line">checking for accept4... no</span><br><span class="line">checking for setitimer... yes</span><br><span class="line">checking for getitimer... yes</span><br><span class="line">checking for bind_textdomain_codeset... no</span><br><span class="line">checking for chown... yes</span><br><span class="line">checking for clock... yes</span><br><span class="line">checking for confstr... yes</span><br><span class="line">checking for copy_file_range... no</span><br><span class="line">checking for ctermid... yes</span><br><span class="line">checking for dup3... no</span><br><span class="line">checking for execv... yes</span><br><span class="line">checking for explicit_bzero... no</span><br><span class="line">checking for explicit_memset... no</span><br><span class="line">checking for faccessat... yes</span><br><span class="line">checking for fchmod... yes</span><br><span class="line">checking for fchmodat... yes</span><br><span class="line">checking for fchown... yes</span><br><span class="line">checking for fchownat... yes</span><br><span class="line">checking for fdwalk... no</span><br><span class="line">checking for fexecve... no</span><br><span class="line">checking for fdopendir... yes</span><br><span class="line">checking for fork... yes</span><br><span class="line">checking for fpathconf... yes</span><br><span class="line">checking for fstatat... yes</span><br><span class="line">checking for ftime... yes</span><br><span class="line">checking for ftruncate... yes</span><br><span class="line">checking for futimesat... no</span><br><span class="line">checking for futimens... yes</span><br><span class="line">checking for futimes... yes</span><br><span class="line">checking for gai_strerror... yes</span><br><span class="line">checking for getentropy... yes</span><br><span class="line">checking for getgrgid_r... yes</span><br><span class="line">checking for getgrnam_r... yes</span><br><span class="line">checking for getgrouplist... yes</span><br><span class="line">checking for getgroups... yes</span><br><span class="line">checking for getlogin... yes</span><br><span class="line">checking for getloadavg... yes</span><br><span class="line">checking for getpeername... yes</span><br><span class="line">checking for getpgid... yes</span><br><span class="line">checking for getpid... yes</span><br><span class="line">checking for getpriority... yes</span><br><span class="line">checking for getresuid... no</span><br><span class="line">checking for getresgid... no</span><br><span class="line">checking for getpwent... yes</span><br><span class="line">checking for getpwnam_r... yes</span><br><span class="line">checking for getpwuid_r... yes</span><br><span class="line">checking for getspnam... no</span><br><span class="line">checking for getspent... no</span><br><span class="line">checking for getsid... yes</span><br><span class="line">checking for getwd... yes</span><br><span class="line">checking for if_nameindex... yes</span><br><span class="line">checking for initgroups... yes</span><br><span class="line">checking for kill... yes</span><br><span class="line">checking for killpg... yes</span><br><span class="line">checking for lchown... yes</span><br><span class="line">checking for lockf... yes</span><br><span class="line">checking for linkat... yes</span><br><span class="line">checking for lstat... yes</span><br><span class="line">checking for lutimes... yes</span><br><span class="line">checking for mmap... yes</span><br><span class="line">checking for memrchr... no</span><br><span class="line">checking for mbrtowc... yes</span><br><span class="line">checking for mkdirat... yes</span><br><span class="line">checking for mkfifo... yes</span><br><span class="line">checking for madvise... yes</span><br><span class="line">checking for mkfifoat... yes</span><br><span class="line">checking for mknod... yes</span><br><span class="line">checking for mknodat... yes</span><br><span class="line">checking for mktime... yes</span><br><span class="line">checking for mremap... no</span><br><span class="line">checking for nice... yes</span><br><span class="line">checking for openat... yes</span><br><span class="line">checking for pathconf... yes</span><br><span class="line">checking for pause... yes</span><br><span class="line">checking for pipe2... no</span><br><span class="line">checking for plock... no</span><br><span class="line">checking for poll... yes</span><br><span class="line">checking for posix_fallocate... no</span><br><span class="line">checking for posix_fadvise... no</span><br><span class="line">checking for posix_spawn... yes</span><br><span class="line">checking for posix_spawnp... yes</span><br><span class="line">checking for pread... yes</span><br><span class="line">checking for preadv... yes</span><br><span class="line">checking for preadv2... no</span><br><span class="line">checking for pthread_condattr_setclock... no</span><br><span class="line">checking for pthread_init... no</span><br><span class="line">checking for pthread_kill... yes</span><br><span class="line">checking for pwrite... yes</span><br><span class="line">checking for pwritev... yes</span><br><span class="line">checking for pwritev2... no</span><br><span class="line">checking for readlink... yes</span><br><span class="line">checking for readlinkat... yes</span><br><span class="line">checking for readv... yes</span><br><span class="line">checking for realpath... yes</span><br><span class="line">checking for renameat... yes</span><br><span class="line">checking for sem_open... yes</span><br><span class="line">checking for sem_timedwait... no</span><br><span class="line">checking for sem_clockwait... no</span><br><span class="line">checking for sem_getvalue... yes</span><br><span class="line">checking for sem_unlink... yes</span><br><span class="line">checking for sendfile... yes</span><br><span class="line">checking for setegid... yes</span><br><span class="line">checking for seteuid... yes</span><br><span class="line">checking for setgid... yes</span><br><span class="line">checking for sethostname... yes</span><br><span class="line">checking for setlocale... yes</span><br><span class="line">checking for setregid... yes</span><br><span class="line">checking for setreuid... yes</span><br><span class="line">checking for setresuid... no</span><br><span class="line">checking for setresgid... no</span><br><span class="line">checking for setsid... yes</span><br><span class="line">checking for setpgid... yes</span><br><span class="line">checking for setpgrp... yes</span><br><span class="line">checking for setpriority... yes</span><br><span class="line">checking for setuid... yes</span><br><span class="line">checking for setvbuf... yes</span><br><span class="line">checking for sched_get_priority_max... yes</span><br><span class="line">checking for sched_setaffinity... no</span><br><span class="line">checking for sched_setscheduler... no</span><br><span class="line">checking for sched_setparam... no</span><br><span class="line">checking for sched_rr_get_interval... no</span><br><span class="line">checking for sigaction... yes</span><br><span class="line">checking for sigaltstack... yes</span><br><span class="line">checking for sigfillset... yes</span><br><span class="line">checking for siginterrupt... yes</span><br><span class="line">checking for sigpending... yes</span><br><span class="line">checking for sigrelse... yes</span><br><span class="line">checking for sigtimedwait... no</span><br><span class="line">checking for sigwait... yes</span><br><span class="line">checking for sigwaitinfo... no</span><br><span class="line">checking for snprintf... yes</span><br><span class="line">checking for strftime... yes</span><br><span class="line">checking for strlcpy... yes</span><br><span class="line">checking for strsignal... yes</span><br><span class="line">checking for symlinkat... yes</span><br><span class="line">checking for sync... yes</span><br><span class="line">checking for sysconf... yes</span><br><span class="line">checking for tcgetpgrp... yes</span><br><span class="line">checking for tcsetpgrp... yes</span><br><span class="line">checking for tempnam... yes</span><br><span class="line">checking for timegm... yes</span><br><span class="line">checking for times... yes</span><br><span class="line">checking for tmpfile... yes</span><br><span class="line">checking for tmpnam... yes</span><br><span class="line">checking for tmpnam_r... no</span><br><span class="line">checking for truncate... yes</span><br><span class="line">checking for uname... yes</span><br><span class="line">checking for unlinkat... yes</span><br><span class="line">checking for utimensat... yes</span><br><span class="line">checking for utimes... yes</span><br><span class="line">checking for waitid... yes</span><br><span class="line">checking for waitpid... yes</span><br><span class="line">checking for wait3... yes</span><br><span class="line">checking for wait4... yes</span><br><span class="line">checking for wcscoll... yes</span><br><span class="line">checking for wcsftime... yes</span><br><span class="line">checking for wcsxfrm... yes</span><br><span class="line">checking for wmemcmp... yes</span><br><span class="line">checking for writev... yes</span><br><span class="line">checking for _getpty... no</span><br><span class="line">checking for rtpSpawn... no</span><br><span class="line">checking for lchmod... yes</span><br><span class="line">checking whether dirfd is declared... yes</span><br><span class="line">checking for chroot... yes</span><br><span class="line">checking for link... yes</span><br><span class="line">checking for symlink... yes</span><br><span class="line">checking for fchdir... yes</span><br><span class="line">checking for fsync... yes</span><br><span class="line">checking for fdatasync... no</span><br><span class="line">checking for epoll... no</span><br><span class="line">checking for epoll_create1... no</span><br><span class="line">checking for kqueue... yes</span><br><span class="line">checking for prlimit... no</span><br><span class="line">checking for _dyld_shared_cache_contains_path... yes</span><br><span class="line">checking for memfd_create... no</span><br><span class="line">checking for ctermid_r... yes</span><br><span class="line">checking for flock declaration... yes</span><br><span class="line">checking for flock... yes</span><br><span class="line">checking for getpagesize... yes</span><br><span class="line">checking for broken unsetenv... no</span><br><span class="line">checking for true... true</span><br><span class="line">checking for inet_aton in -lc... yes</span><br><span class="line">checking for chflags... yes</span><br><span class="line">checking for lchflags... yes</span><br><span class="line">checking for inflateCopy in -lz... yes</span><br><span class="line">checking for hstrerror... yes</span><br><span class="line">checking for inet_aton... yes</span><br><span class="line">checking for inet_pton... yes</span><br><span class="line">checking for setgroups... yes</span><br><span class="line">checking for openpty... yes</span><br><span class="line">checking for forkpty... yes</span><br><span class="line">checking for fseek64... no</span><br><span class="line">checking for fseeko... yes</span><br><span class="line">checking for fstatvfs... yes</span><br><span class="line">checking for ftell64... no</span><br><span class="line">checking for ftello... yes</span><br><span class="line">checking for statvfs... yes</span><br><span class="line">checking for dup2... yes</span><br><span class="line">checking for strdup... yes</span><br><span class="line">checking for getpgrp... yes</span><br><span class="line">checking for setpgrp... (cached) yes</span><br><span class="line">checking for library containing crypt... none required</span><br><span class="line">checking for library containing crypt_r... no</span><br><span class="line">checking for crypt_r... no</span><br><span class="line">checking for clock_gettime... yes</span><br><span class="line">checking for clock_getres... yes</span><br><span class="line">checking for clock_settime... yes</span><br><span class="line">checking for major... yes</span><br><span class="line">checking for getaddrinfo... yes</span><br><span class="line">checking getaddrinfo bug... no</span><br><span class="line">checking for getnameinfo... yes</span><br><span class="line">checking whether time.h and sys/time.h may both be included... yes</span><br><span class="line">checking whether struct tm is in sys/time.h or time.h... time.h</span><br><span class="line">checking for struct tm.tm_zone... yes</span><br><span class="line">checking for struct stat.st_rdev... yes</span><br><span class="line">checking for struct stat.st_blksize... yes</span><br><span class="line">checking for struct stat.st_flags... yes</span><br><span class="line">checking for struct stat.st_gen... yes</span><br><span class="line">checking for struct stat.st_birthtime... yes</span><br><span class="line">checking for struct stat.st_blocks... yes</span><br><span class="line">checking for struct passwd.pw_gecos... yes</span><br><span class="line">checking for struct passwd.pw_passwd... yes</span><br><span class="line">checking for siginfo_t.si_band... yes</span><br><span class="line">checking for time.h that defines altzone... no</span><br><span class="line">checking whether sys/select.h and sys/time.h may both be included... yes</span><br><span class="line">checking for addrinfo... yes</span><br><span class="line">checking for sockaddr_storage... yes</span><br><span class="line">checking for sockaddr_alg... no</span><br><span class="line">checking for an ANSI C-conforming const... yes</span><br><span class="line">checking for working signed char... yes</span><br><span class="line">checking for prototypes... yes</span><br><span class="line">checking for variable length prototypes and stdarg.h... yes</span><br><span class="line">checking for socketpair... yes</span><br><span class="line">checking if sockaddr has sa_len member... yes</span><br><span class="line">checking for gethostbyname_r... no</span><br><span class="line">checking for gethostbyname... yes</span><br><span class="line">checking for __fpu_control... no</span><br><span class="line">checking for __fpu_control in -lieee... no</span><br><span class="line">checking for --with-libm=STRING... default LIBM=&quot;&quot;</span><br><span class="line">checking for --with-libc=STRING... default LIBC=&quot;&quot;</span><br><span class="line">checking for x64 gcc inline assembler... no</span><br><span class="line">checking whether float word ordering is bigendian... no</span><br><span class="line">checking whether we can use gcc inline assembler to get and set x87 control word... no</span><br><span class="line">checking whether we can use gcc inline assembler to get and set mc68881 fpcr... no</span><br><span class="line">checking for x87-style double rounding... no</span><br><span class="line">checking for acosh... yes</span><br><span class="line">checking for asinh... yes</span><br><span class="line">checking for atanh... yes</span><br><span class="line">checking for copysign... yes</span><br><span class="line">checking for erf... yes</span><br><span class="line">checking for erfc... yes</span><br><span class="line">checking for expm1... yes</span><br><span class="line">checking for finite... no</span><br><span class="line">checking for gamma... no</span><br><span class="line">checking for hypot... yes</span><br><span class="line">checking for lgamma... yes</span><br><span class="line">checking for log1p... yes</span><br><span class="line">checking for log2... yes</span><br><span class="line">checking for round... yes</span><br><span class="line">checking for tgamma... yes</span><br><span class="line">checking whether isinf is declared... yes</span><br><span class="line">checking whether isnan is declared... yes</span><br><span class="line">checking whether isfinite is declared... yes</span><br><span class="line">checking whether POSIX semaphores are enabled... yes</span><br><span class="line">checking for broken sem_getvalue... yes</span><br><span class="line">checking whether RTLD_LAZY is declared... yes</span><br><span class="line">checking whether RTLD_NOW is declared... yes</span><br><span class="line">checking whether RTLD_GLOBAL is declared... yes</span><br><span class="line">checking whether RTLD_LOCAL is declared... yes</span><br><span class="line">checking whether RTLD_NODELETE is declared... yes</span><br><span class="line">checking whether RTLD_NOLOAD is declared... yes</span><br><span class="line">checking whether RTLD_DEEPBIND is declared... no</span><br><span class="line">checking whether RTLD_MEMBER is declared... no</span><br><span class="line">checking digit size for Python&#x27;s longs... no value specified</span><br><span class="line">checking wchar.h usability... yes</span><br><span class="line">checking wchar.h presence... yes</span><br><span class="line">checking for wchar.h... yes</span><br><span class="line">checking size of wchar_t... 4</span><br><span class="line">checking for UCS-4 tcl... no</span><br><span class="line">checking whether wchar_t is signed... yes</span><br><span class="line">checking whether wchar_t is usable... no</span><br><span class="line">checking whether byte ordering is bigendian... no</span><br><span class="line">checking ABIFLAGS...</span><br><span class="line">checking SOABI... cpython-39-darwin</span><br><span class="line">checking LDVERSION... $(VERSION)$(ABIFLAGS)</span><br><span class="line">checking for --with-platlibdir... no</span><br><span class="line">checking whether right shift extends the sign bit... yes</span><br><span class="line">checking for getc_unlocked() and friends... yes</span><br><span class="line">checking how to link readline libs... -lreadline</span><br><span class="line">checking for rl_pre_input_hook in -lreadline... yes</span><br><span class="line">checking for rl_completion_display_matches_hook in -lreadline... yes</span><br><span class="line">checking for rl_resize_terminal in -lreadline... yes</span><br><span class="line">checking for rl_completion_matches in -lreadline... yes</span><br><span class="line">checking for append_history in -lreadline... yes</span><br><span class="line">checking for broken nice()... no</span><br><span class="line">checking for broken poll()... no</span><br><span class="line">checking for working tzset()... yes</span><br><span class="line">checking for tv_nsec in struct stat... no</span><br><span class="line">checking for tv_nsec2 in struct stat... yes</span><br><span class="line">checking curses.h usability... yes</span><br><span class="line">checking curses.h presence... yes</span><br><span class="line">checking for curses.h... yes</span><br><span class="line">checking ncurses.h usability... yes</span><br><span class="line">checking ncurses.h presence... yes</span><br><span class="line">checking for ncurses.h... yes</span><br><span class="line">checking for term.h... yes</span><br><span class="line">checking whether mvwdelch is an expression... yes</span><br><span class="line">checking whether WINDOW has _flags... no</span><br><span class="line">checking for is_pad... yes</span><br><span class="line">checking for is_term_resized... yes</span><br><span class="line">checking for resize_term... yes</span><br><span class="line">checking for resizeterm... yes</span><br><span class="line">checking for immedok... yes</span><br><span class="line">checking for syncok... yes</span><br><span class="line">checking for wchgat... yes</span><br><span class="line">checking for filter... yes</span><br><span class="line">checking for has_key... yes</span><br><span class="line">checking for typeahead... yes</span><br><span class="line">checking for use_env... yes</span><br><span class="line">configure: checking for device files</span><br><span class="line">checking for /dev/ptmx... yes</span><br><span class="line">checking for /dev/ptc... no</span><br><span class="line">checking for %zd printf() format support... yes</span><br><span class="line">checking for socklen_t... yes</span><br><span class="line">checking for broken mbstowcs... no</span><br><span class="line">checking for --with-computed-gotos... no value specified</span><br><span class="line">checking whether clang supports computed gotos... yes</span><br><span class="line">checking for build directories... done</span><br><span class="line">checking for -O2... yes</span><br><span class="line">checking for glibc _FORTIFY_SOURCE/memmove bug... no</span><br><span class="line">checking for stdatomic.h... yes</span><br><span class="line">checking for GCC &gt;= 4.7 __atomic builtins... yes</span><br><span class="line">checking for ensurepip... upgrade</span><br><span class="line">checking if the dirent structure of a d_type field... yes</span><br><span class="line">checking for the Linux getrandom() syscall... no</span><br><span class="line">checking for the getrandom() function... no</span><br><span class="line">checking for library containing shm_open... none required</span><br><span class="line">checking for sys/mman.h... (cached) yes</span><br><span class="line">checking for shm_open... yes</span><br><span class="line">checking for shm_unlink... yes</span><br><span class="line">checking for openssl/ssl.h in /opt/homebrew/opt/openssl@3... yes</span><br><span class="line">checking whether compiling and linking against OpenSSL works... yes</span><br><span class="line">checking for X509_VERIFY_PARAM_set1_host in libssl... yes</span><br><span class="line">checking for --with-ssl-default-suites... python</span><br><span class="line">checking for --with-builtin-hashlib-hashes... md5,sha1,sha256,sha512,sha3,blake2</span><br><span class="line">configure: creating ./config.status</span><br><span class="line">config.status: creating Makefile.pre</span><br><span class="line">config.status: creating Misc/python.pc</span><br><span class="line">config.status: creating Misc/python-embed.pc</span><br><span class="line">config.status: creating Misc/python-config.sh</span><br><span class="line">config.status: creating Modules/ld_so_aix</span><br><span class="line">config.status: creating pyconfig.h</span><br><span class="line">config.status: pyconfig.h is unchanged</span><br><span class="line">creating Modules/Setup.local</span><br><span class="line">creating Makefile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">If you want a release build with all stable optimizations active (PGO, etc),</span><br><span class="line">please run ./configure --enable-optimizations</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">make: *** No rule to make target `pyconfig.h&#x27;, needed by `Programs/python.o&#x27;.  Stop.</span><br><span class="line">make: *** Waiting for unfinished jobs....</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;No rule to make target &lt;code&gt;pyconfig.h&amp;#39;, needed by &lt;/code&gt;Programs&amp;#x2F;python.oâ€™&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æˆ‘æ—¥å¸¸ä½¿ç”¨ pyenv ç®¡ç†ä¸åŒ</summary>
      
    
    
    
    <category term="Python" scheme="https://www.yanzhenjie.com/categories/Python/"/>
    
    
    <category term="è¸©å‘" scheme="https://www.yanzhenjie.com/tags/%E8%B8%A9%E5%9D%91/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸èƒ½åŸè°…æ—¥æœ¬</title>
    <link href="https://www.yanzhenjie.com/post/20250918/3b27a19bde9a/"/>
    <id>https://www.yanzhenjie.com/post/20250918/3b27a19bde9a/</id>
    <published>2025-09-18T01:18:00.000Z</published>
    <updated>2025-09-19T04:08:24.938Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä»Šæ—¶ä»Šæ—¥ï¼Œéä½ æˆ‘è«å±ï¼å‹¿ä½¿ä¸­åæ°‘æ—æ–­ç»ï¼ŒåŠ¡è¦ä½¿å¤·ç‹„ä¸æ•¢å°è§†ä¸­å›½ï¼Œä¹±è‡£è´¼å­ä¸æ•¢çª¥æµ‹ç¥å™¨ï¼</p></blockquote><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬å°±æ˜¯ä¸è‚¯åŸè°…æ—¥æœ¬å‘¢ï¼Ÿ"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬å°±æ˜¯ä¸è‚¯åŸè°…æ—¥æœ¬å‘¢ï¼Ÿ" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬å°±æ˜¯ä¸è‚¯åŸè°…æ—¥æœ¬å‘¢ï¼Ÿ"></a>ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬å°±æ˜¯ä¸è‚¯åŸè°…æ—¥æœ¬å‘¢ï¼Ÿ</h2><p>éšç€å—äº¬ç…§ç›¸é¦†å’Œ731çš„ç›¸ç»§ä¸Šæ˜ ï¼Œç½‘ä¸Šä¸€å°éƒ¨åˆ†äººå°±è·³äº†å‡ºæ¥ï¼Œè¯´äº‹æƒ…éƒ½è¿‡å»80å¹´äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬å°±æ˜¯ä¸è‚¯åŸè°…æ—¥æœ¬å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå°±ä¸¤å¥è¯ï¼šæˆ‘ä»¬æ²¡æœ‰èµ„æ ¼æ›¿å…ˆè¾ˆå»åŸè°…ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»æ—¶åˆ»è®©åè¾ˆä¿æŒè­¦é†’ï¼</p><p>ä»Šå¤©æ˜¯9æœˆ18æ—¥ï¼Œ94å¹´å‰çš„ä»Šå¤©ï¼Œæ˜¯æ—¥æœ¬å¸å›½ä¸»ä¹‰ä¾µåçš„å¼€ç«¯ï¼Œä¹Ÿæ˜¯æ— æ•°å…ˆè¾ˆä»¬14å¹´æµ´è¡€æŠ—æˆ˜çš„èµ·ç‚¹ï¼Œ<font color='red'><b>è¿™ä¸€å¤©å¯¹ä¸­å›½äººæ¥è¯´ï¼Œæ„ä¹‰å¤ªæ²‰é‡äº†ï¼Œæˆ‘ä»¬ç»ä¸å…è®¸å†å²é‡æ¼”ï¼Œä½ æˆ‘åƒä¸‡ä¸è¦è§‰å¾—ç°åœ¨å›½å®¶å¼ºå¤§äº†ï¼Œæ—¥å­å¤ªå¹³äº†ï¼Œå°±ä¸å½“å›äº‹äº†</b></font>ã€‚</p><p>æ‹‰å¼€å†å²çš„å°ºåº¦æ¥çœ‹ï¼Œå”æœã€å…ƒæœã€æ˜æœã€æ¸…æœå’Œæ°‘å›½æ—¶æœŸï¼Œæ—¥æœ¬éƒ½å’Œæˆ‘å›½å‘ç”Ÿè¿‡äº‹å…³ç”Ÿæ­»çš„å›½æˆ˜ï¼Œä»–ä»¬ä¸€ç›´éƒ½å¦„å›¾æŠŠä¸­åå¤§åœ°æ®ä¸ºå·±æœ‰ã€‚é²è¥¿ç»†èŒæˆ˜ï¼Œå—äº¬å¤§å± æ€ä¸‡äººå‘é—å€ç­‰ç­‰ï¼Œä¹Ÿè¡¨æ˜äº†æ—¥æœ¬äººæ˜¯å†²ç€äº¡å›½ç­ç§æ¥çš„ï¼Œæ—¥æœ¬ç‹­éš˜çš„å›½åœŸã€è´«ç˜ çš„èµ„æºã€é¢‘ç¹çš„åœ°éœ‡ä¸æµ·å•¸ï¼Œå°±æ³¨å®šäº†æ—¥æœ¬äººæ°¸è¿œä¸ä¼šå®‰åˆ†ã€‚</p><p>å°±åƒä¸‰ä½“ä¸­çš„ä¸‰ä½“äººï¼Œä¸–ä¸–ä»£ä»£éƒ½åœ¨æƒ³ç€æ˜Ÿé™…ç§»æ°‘ä¸€æ ·ï¼Œç›®çš„éƒ½æ˜¯è¦é¸ å é¹Šå·¢ï¼Œæˆ‘ä»¬ä¸èƒ½ä»¥å¸¸è§„çš„è§†è§’å»çœ‹å¾…æ—¥æœ¬ï¼Œå¤šç¾å¤šéš¾ä¸”ç‹­éš˜çš„åœ°ç†ç¯å¢ƒï¼Œå·²ç»å¡‘é€ å‡ºäº†ä¸€ç§å¦ç±»çš„æ°‘æ—æ€§æ ¼ï¼šä¸€é¢æ˜¯éšå¿ï¼Œä¸€é¢æ˜¯æš´åŠ›ã€‚ä½ è‹¥å¼ºå¤§ï¼Œä»–ä¾¿æŠ˜æœï¼Œä½ è‹¥è™šå¼±ï¼Œä»–ä¾¿è¶è™šè€Œå…¥ã€‚</p><h2 id="äºŒã€ä¸­æ—¥å›½æˆ˜å²"><a href="#äºŒã€ä¸­æ—¥å›½æˆ˜å²" class="headerlink" title="äºŒã€ä¸­æ—¥å›½æˆ˜å²"></a>äºŒã€ä¸­æ—¥å›½æˆ˜å²</h2><p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹è‡ªå”æœä»¥æ¥çš„ä¸­æ—¥å›½æˆ˜å²ã€‚</p><h3 id="ï¼ˆä¸€ï¼‰ã€å”æœæ—¶æœŸ"><a href="#ï¼ˆä¸€ï¼‰ã€å”æœæ—¶æœŸ" class="headerlink" title="ï¼ˆä¸€ï¼‰ã€å”æœæ—¶æœŸ"></a>ï¼ˆä¸€ï¼‰ã€å”æœæ—¶æœŸ</h3><p><strong>ç™½æ±Ÿå£ä¹‹æˆ˜ï¼ˆå…¬å…ƒ663å¹´ï¼‰</strong></p><p>å”æœä¸æ–°ç½—è”åˆå¯¹æŠ—æ—¥æœ¬æ”¯æ´ç™¾æµï¼Œå”å†›ä»¥1.3ä¸‡äºº170è‰˜æˆ˜èˆ°ä¸æ—¥å†›4ä¸‡äºº1000è‰˜æˆ˜èˆ°åœ¨ç™½æ±Ÿå£å†³æˆ˜ï¼Œå”å†›ä»¥ç«æ”»å’Œæˆ˜æœ¯ä¼˜åŠ¿å¤§è´¥æ—¥å†›ï¼Œæœ€ç»ˆæ—¥å†›æˆ˜è´¥ï¼Œç™¾æµç­äº¡ï¼Œæ—¥æœ¬è¢«è¿«é€€å›æœ¬åœŸã€‚</p><p>æ—¥æœ¬æ­¤åè¿‘åƒå¹´æœªæ•¢å¤§è§„æ¨¡ä¾µç•¥ä¸­å›½ï¼Œè½¬è€Œå­¦ä¹ å”æœæ–‡åŒ–ï¼Œå¦‚é£å”ä½¿åˆ¶åº¦ï¼Œå”æœä¹Ÿå·©å›ºäº†åœ¨æœé²œåŠå²›çš„å½±å“åŠ›ã€‚</p><h3 id="ï¼ˆäºŒï¼‰ã€å…ƒæœæ—¶æœŸ"><a href="#ï¼ˆäºŒï¼‰ã€å…ƒæœæ—¶æœŸ" class="headerlink" title="ï¼ˆäºŒï¼‰ã€å…ƒæœæ—¶æœŸ"></a>ï¼ˆäºŒï¼‰ã€å…ƒæœæ—¶æœŸ</h3><p><strong>å…ƒæ—¥æˆ˜äº‰ï¼ˆ1274å¹´ã€1281å¹´ï¼‰</strong></p><p>å…ƒæœæ—¶æœŸï¼Œæ—¥æœ¬å½“æ—¶å¤„äºé•°ä»“å¹•åºœç»Ÿæ²»ä¸‹ï¼Œå¹•åºœå°†å†›åŒ—æ¡æ—¶å®—æ‹’ç»æ¥å—â€œè—©å±â€åœ°ä½ï¼Œé•°ä»“å¹•åºœä¸¤æ¬¡æ‹’ç»å…ƒæœçš„â€œè¯ä¹¦â€å’Œä½¿è€…ï¼Œç”šè‡³æ€å®³å…ƒæœä½¿èŠ‚ã€‚</p><p>å…ƒæœå¿½å¿…çƒˆäº1274å¹´å‘èµ·ç¬¬ä¸€æ¬¡è¿œå¾ï¼Œå²ç§°æ–‡æ°¸ä¹‹å½¹ï¼Œå…ƒå†›3.2ä¸‡äººè¿›æ”»ä¹å·ï¼Œå› åå‹¤ä¸è¶³å’Œé£æš´è€Œå—æŒ«ã€‚1281å¹´ç¬¬äºŒæ¬¡è¿œå¾ï¼Œå²ç§°å¼˜å®‰ä¹‹å½¹ï¼Œå…ƒå†›14ä¸‡äººï¼ˆå«é«˜ä¸½å£«å…µï¼‰æ¸¡æµ·ï¼Œé­é‡å°é£â€œç¥é£â€æ‘§æ¯èˆ°é˜Ÿã€‚æœ€ç»ˆå…ƒå†›ä¸¤æ¬¡éƒ½å¤±è´¥ï¼ŒæŸå¤±æƒ¨é‡ï¼Œè€Œä½¿æ—¥æœ¬æ°‘æ—è®¤åŒæ„Ÿå¢å¼ºï¼Œå…ƒæœæ”¾å¼ƒå¾æœè®¡åˆ’ï¼Œä¸­æ—¥å…³ç³»æš‚æ—¶ç¼“å’Œã€‚</p><h3 id="ï¼ˆä¸‰ï¼‰ã€æ˜æœæ—¶æœŸ"><a href="#ï¼ˆä¸‰ï¼‰ã€æ˜æœæ—¶æœŸ" class="headerlink" title="ï¼ˆä¸‰ï¼‰ã€æ˜æœæ—¶æœŸ"></a>ï¼ˆä¸‰ï¼‰ã€æ˜æœæ—¶æœŸ</h3><p><strong>å£¬è¾°å€­ä¹±ï¼ˆ1592-1598å¹´ï¼‰</strong></p><p>å£¬è¾°å€­ä¹±ä¹Ÿå°±æ˜¯æ˜æœæ—¶æœŸä¸‡å†æœé²œæˆ˜äº‰ã€‚æ˜æœæœ«å¹´ï¼Œæ˜ç¥å®—æœ±ç¿Šé’§è¿å¹´ä¸ä¸Šæœï¼Œå›½å®¶ä¸€ç‰‡æ··ä¹±ï¼Œæ°‘å˜é¢‘å‘ï¼Œè´¢æ”¿å‡ è¿‘å´©æºƒï¼Œæ—¥æœ¬äººå‘ç°äº†å¯ä¹˜ä¹‹æœºï¼Œäºå…¬å…ƒ1592å¹´ï¼Œæ—¥æœ¬å‰åå‡ºåŠ¨å†›é˜Ÿæ€»å…±çº¦30ä¸‡äººè¿›æ”»æœé²œï¼Œä¸‡å†æœé²œæˆ˜äº‰çˆ†å‘ã€‚</p><p>è€Œæ—¥å†›æ”»æ‰“æœé²œä¹Ÿåªæ˜¯å¹Œå­ï¼Œå½“æ—¶æ—¥å†›ç»Ÿå¸…ä¸°è‡£ç§€å‰çŒ–ç‹‚è¡¨æ€æ”»æ‰“æœé²œçš„ç›®çš„<font color='red'><b>â€œå°±æ˜¯ä¸ºäº†å€Ÿé“æœé²œè¿›å…¥è¾½ä¸œï¼Œå†ç›´å–æ˜éƒ½åŒ—äº¬ï¼Œæœ€ç»ˆç›®çš„å°±æ˜¯æœ€ç»ˆå¾æœä¸­å›½å…¨å¢ƒâ€</b></font>ã€‚</p><p><font color='red'><b>ä¸°è‡£ç§€å‰æ›¾æ‰¬è¨€â€œå›¾æœé²œçª¥è§†ä¸­åï¼Œæ­¤ä¹ƒè‡£ä¹‹ç´ å¿—â€</b></font>ã€‚</p><p>å½“æ—¶æ˜æœåº”è—©å±å›½æœé²œè¯·æ±‚å‡ºå…µæ´æœã€‚æ˜æœä¸æœé²œè”å†›å¤šæ¬¡å‡»è´¥æ—¥å†›ï¼Œä½†å› æ—¥å†›æ®å®ˆåšå›ºåŸå ¡ï¼ˆå¦‚è”šå±±åŸï¼‰å’Œåˆ¶æµ·æƒåŠ£åŠ¿ï¼Œæˆ˜å±€èƒ¶ç€ã€‚å…¶ä¸­æœ‰2æ¬¡å…³é”®æˆ˜å½¹ï¼Œ1593å¹´å¹³å£¤å¤§æ·å’Œç¢§è¹„é¦†ä¹‹æˆ˜ã€‚æ—¥å†›äº1598å¹´å› ä¸°è‡£ç§€å‰ç—…é€è€Œæ’¤é€€ï¼Œæ˜æœæœªå½»åº•é©±é€æ—¥å†›ï¼Œæˆ˜äº‰ä¹Ÿå‡ ä¹è€—å¹²äº†æ˜æœçš„å›½åŠ›ï¼Œå®¢è§‚ä¸ŠåŠ é€Ÿäº†æ˜æœçš„ç­äº¡ã€‚</p><p><strong>äº‰è´¡ä¹‹å½¹ï¼ˆ1523å¹´ï¼‰</strong></p><p>æ—¥æœ¬å¤§å†…æ°ä¸ç»†å·æ°äº‰å¤ºæ˜æœæœè´¡è´¸æ˜“æƒï¼Œåœ¨å®æ³¢çˆ†å‘å†²çªã€‚æœŸé—´ä¸¤æ´¾ä½¿è€…åœ¨æ˜æœå¢ƒå†…æ¢°æ–—ï¼Œæ¼”å˜ä¸ºä¸­æ—¥å±€éƒ¨å†²çªã€‚ç»“æœä½¿æ˜æœåºŸé™¤å®æ³¢å¸‚èˆ¶å¸ï¼Œåœæ­¢æœè´¡è´¸æ˜“ï¼Œæœ€ç»ˆä¸­æ—¥å®˜æ–¹è´¸æ˜“ä¸­æ–­ï¼Œå€­å¯‡æ´»åŠ¨åŠ å‰§ï¼Œä¸ºåæœŸæŠ—å€­æˆ˜äº‰åŸ‹ä¸‹ä¼ç¬”ã€‚</p><h3 id="ï¼ˆå››ï¼‰ã€æ¸…æœæ—¶æœŸ"><a href="#ï¼ˆå››ï¼‰ã€æ¸…æœæ—¶æœŸ" class="headerlink" title="ï¼ˆå››ï¼‰ã€æ¸…æœæ—¶æœŸ"></a>ï¼ˆå››ï¼‰ã€æ¸…æœæ—¶æœŸ</h3><p><strong>ç”²åˆæˆ˜äº‰ï¼ˆ1894-1895å¹´ï¼‰</strong></p><p>æˆ‘ä»¬éƒ½åœ¨ä¸­å­¦è¯¾æœ¬ä¸Šå­¦è¿‡ä¸­æ—¥ç”²åˆæˆ˜äº‰ï¼Œæ—¥æœ¬æ˜æ²»ç»´æ–°åï¼Œè¿…é€Ÿå®ç°å·¥ä¸šåŒ–ï¼Œå›½åŠ›å¢å¼ºï¼Œä½†èµ„æºåŒ®ä¹å’Œå¸‚åœºç‹­å°çš„çŸ›ç›¾æ—¥ç›Šçªå‡ºã€‚æ—¥æœ¬å°†ä¸­å›½è§†ä¸ºæ‰©å¼ çš„ä¸»è¦ç›®æ ‡ï¼Œæœé²œåŠå²›æˆä¸ºå…¶æˆ˜ç•¥è·³æ¿ã€‚1894å¹´ï¼Œæœé²œçˆ†å‘ä¸œå­¦å…šèµ·ä¹‰ï¼Œæ—¥æœ¬ä»¥â€œä¿æŠ¤ä¾¨æ°‘â€ä¸ºåå‡ºå…µæœé²œï¼Œè¶æœºæ’æŒ¤æ¸…æœåŠ¿åŠ›ã€‚æœé²œæœ¬ä¸ºæ¸…æœé™„åº¸å›½ï¼Œä½†æ—¥æœ¬é€šè¿‡æ­¦åŠ›æ§åˆ¶æœé²œæ”¿æƒï¼Œè¿«ä½¿æœé²œæ–­ç»ä¸æ¸…æœçš„å…³ç³»ã€‚æ¸…æœå‡ºå…µé•‡å‹èµ·ä¹‰ï¼Œä¸æ—¥å†›åœ¨æœé²œå¢ƒå†…çˆ†å‘å†²çªã€‚</p><ul><li>ä¸°å²›æµ·æˆ˜ï¼ˆ1894å¹´7æœˆ25æ—¥ï¼‰ï¼š<font color="red"><b>æ—¥æœ¬æµ·å†›å·è¢­æ¸…æœè¿å…µèˆ¹</b></font>ï¼Œæ­£å¼æ‰“å“æˆ˜äº‰ç¬¬ä¸€æªã€‚</li><li>é»„æµ·æµ·æˆ˜ï¼ˆ1894å¹´9æœˆ17æ—¥ï¼‰ï¼šåŒ—æ´‹èˆ°é˜Ÿä¸æ—¥æœ¬è”åˆèˆ°é˜Ÿæ¿€æˆ˜ï¼ŒåŒ—æ´‹æ°´å¸ˆè™½æŸå¤±æƒ¨é‡ï¼Œä½†æœªå…¨å†›è¦†æ²¡ã€‚</li><li>å¹³å£¤æˆ˜å½¹ï¼ˆ1894å¹´9æœˆï¼‰ï¼šæ¸…å†›åœ¨æœé²œå¹³å£¤æºƒè´¥ï¼Œæ—¥å†›å é¢†æœé²œå…¨å¢ƒã€‚</li><li>è¾½ä¸œæˆ˜å½¹ï¼ˆ1894å¹´11æœˆ-1895å¹´1æœˆï¼‰ï¼šæ—¥å†›æ”»å è¾½ä¸œåŠå²›ï¼Œ<font color="red"><b>æ—…é¡ºå¤§å± æ€</b></font> éœ‡æƒŠä¸–ç•Œã€‚</li><li>å¨æµ·å«æˆ˜å½¹ï¼ˆ1895å¹´1æœˆ-2æœˆï¼‰ï¼šæ—¥å†›å›´æ”»åŒ—æ´‹æ°´å¸ˆåŸºåœ°å¨æµ·å«ï¼Œ<font color="red"><b>åŒ—æ´‹èˆ°é˜Ÿå…¨å†›è¦†æ²¡</b></font>ã€‚</li></ul><p>ç»“æœæ˜¯æ¸…æœæˆ˜è´¥ï¼Œ1895å¹´4æœˆ17æ—¥ï¼Œæ¸…æ”¿åºœä¸æ—¥æœ¬ç­¾è®¢ã€Šé©¬å…³æ¡çº¦ã€‹ï¼Œä¸»è¦å†…å®¹åŒ…æ‹¬ï¼š</p><ul><li>å‰²è®©é¢†åœŸï¼šå‰²è®©è¾½ä¸œåŠå²›ã€å°æ¹¾åŠæ¾æ¹–åˆ—å²›ï¼Œåå› ä¸‰å›½å¹²æ¶‰ï¼Œæ¸…æœä»¥3000ä¸‡ä¸¤ç™½é“¶èµå›è¾½ä¸œåŠå²›ã€‚</li><li>å·¨é¢èµ”æ¬¾ï¼š2äº¿ä¸¤ç™½é“¶ï¼ˆç›¸å½“äºæ¸…æœ3å¹´è´¢æ”¿æ”¶å…¥ï¼‰ã€‚</li><li>å¼€æ”¾é€šå•†å£å²¸ï¼šæ²™å¸‚ã€é‡åº†ã€è‹å·ã€æ­å·ç­‰ä¸ºå•†åŸ ã€‚</li><li>å…è®¸æ—¥æœ¬åœ¨åè®¾å‚ï¼šåˆ—å¼ºæ´å¼•â€œåˆ©ç›Šå‡æ²¾â€æ¡æ¬¾ï¼Œæ€èµ·åœ¨åè®¾å‚æ½®ã€‚</li></ul><blockquote><p><font color="red"><b>å°±æ˜¯è¿™2äº¿ä¸¤ç™½é“¶ã€è¾›ä¸‘æ¡çº¦ä»¥åŠèµ”ä»˜æ—¥æœ¬çš„æ•°åƒä¸‡ä¸¤ç™½é“¶ï¼Œè®©æ—¥æœ¬æœ‰äº†å·¥ä¸šé©å‘½çš„èµ„æœ¬ï¼Œä¸ºäºŒæˆ˜æ—¥æœ¬ä¾µååŸ‹ä¸‹äº†ç¥¸æ ¹</b></font>ã€‚</p></blockquote><p>æ—¥æœ¬æŠŠè¿™äº›èµ”æ¬¾ï¼Œå¤§éƒ¨åˆ†éƒ½ä¹°äº†èˆ°è‰‡é£æœºå¦å…‹ï¼Œå°‘éƒ¨åˆ†æŠ•å‘äº†é‡å·¥ä¸šï¼ŒåŒ–å­¦å·¥ä¸šé€ èˆ¹å’Œå†¶é‡‘ç­‰é¢†åŸŸã€‚ç”¨å†å²ä¸“å®¶äº•ä¸Šæ¸…çš„è¯è¯´ï¼šâ€œæ²¡æœ‰ç”²åˆæˆ˜äº‰çš„èµ”æ¬¾ï¼Œæ—¥æœ¬å·¥ä¸šåŒ–è‡³å°‘è¦æ¨è¿Ÿ20å¹´â€ã€‚æ­£æ˜¯å› ä¸ºé€šè¿‡ç”²åˆæˆ˜äº‰<br>å’Œå…«å›½è”å†›ä¾µåæˆ˜äº‰ï¼Œè®©æ—¥æœ¬äººå‡­ç©ºè·å¾—äº†å¤©é‡çš„è´¢å¯Œï¼Œäºæ˜¯æ—¥æœ¬ä¸¾å›½ä¸Šä¸‹å¾—åˆ°äº†ä¸€ä¸ªå…±è¯†ï¼Œå¹²ä»€ä¹ˆéƒ½ä¸å¦‚æŠ¢ï¼ŒåŠ«æ¥é’±å¿«å‘€ã€‚</p><p><font color="red"><b>è€Œä¸”æ—¥æœ¬å†›å›½ä¸»ä¹‰æœ‰ç€æ·±åšçš„æ°‘ä¼—åŸºç¡€ï¼Œä½ ä»¥ä¸ºç”²åˆæˆ˜äº‰åªæ˜¯æ—¥æœ¬å°‘æ•°æˆ˜äº‰ç‹‚çƒ­åˆ†å­å‘åŠ¨çš„å—ï¼Ÿå¤§é”™ç‰¹é”™ï¼Œç”²åˆæˆ˜äº‰å…¶å®æ˜¯ä¸€åœºæ—¥æœ¬å…¨æ°‘æ”¯æŒçš„ä¸€åœºå†›äº‹æ å¤ºï¼Œæœ¬æ¥å½“æ—¶æ—¥æœ¬æ”¿åºœæ˜¯æ²¡æœ‰é’±æ‰“è¿™ä¹ˆä¸€åœºå¤§ä»—çš„ï¼Œä½†æ˜¯æŠµä¸ä½æ—¥æœ¬æ°‘ä¼—çƒ­æƒ…é«˜æ¶¨å‘€ï¼Œæ²¡æœ‰é’±æ˜¯å§ï¼Ÿæ—¥æœ¬æ°‘ä¼—å°±ç–¯ç‹‚çš„ä¹°å›½å€ºï¼Œä¹Ÿå°±æ˜¯å€Ÿé’±ç»™å›½å®¶ã€‚è¿˜ä¸å¤Ÿæ˜¯å§ï¼Ÿæ—¥æœ¬æ°‘ä¼—å°±ç ¸é”…å–é“ï¼Œç›´æ¥æèµ ç”šè‡³å–è¡€ç­¹é’±ç»™é™†å†›ä¸Šã€‚ä¸ä»…å¦‚æ­¤ï¼Œæ—¥æœ¬æ°‘ä¼—è¿˜äº‰å…ˆæåçš„è¸Šè·ƒå‚å†›ï¼Œå¾ˆå¤šå­¦ç”Ÿä¹¦éƒ½ä¸è¯»äº†ï¼Œè¦å»ä¸ºå›½å°½å¿ ï¼Œä¸ºäº†æµ·å¯¹å²¸æ— æ•°çš„è´¢å¯Œä»¥åŠå¹¿è¢¤çš„åœŸåœ°ï¼Œæ—¥æœ¬å…¨æ°‘æ˜¯ä¸€ç‰‡ç–¯ç‹‚å‘€ï¼</b></font></p><p>è¿™å¯æ˜¯å»æ€äººå‘ã€å»æŠ¢åŠ«å‘€ï¼åœ¨è¿™äº›æ—¥æœ¬æ°‘ä¼—çœ¼ä¸­ï¼Œç«Ÿç„¶åƒå‡ºå›½åŠ¡å·¥ä¸€æ ·æ­£å¸¸!!!</p><h3 id="ï¼ˆäº”ï¼‰ã€æ˜å›½æ—¶æœŸ"><a href="#ï¼ˆäº”ï¼‰ã€æ˜å›½æ—¶æœŸ" class="headerlink" title="ï¼ˆäº”ï¼‰ã€æ˜å›½æ—¶æœŸ"></a>ï¼ˆäº”ï¼‰ã€æ˜å›½æ—¶æœŸ</h3><p><strong>æŠ—æ—¥æˆ˜äº‰ï¼ˆ1931-1945å¹´ï¼‰</strong></p><p>æ—¥æœ¬ä¾µåæˆ˜äº‰ï¼Œåˆ†ä¸ºå±€éƒ¨ï¼ˆ1931-1937ï¼‰å’Œå…¨é¢ï¼ˆ1937-1945ï¼‰ä¸¤ä¸ªé˜¶æ®µã€‚</p><p>æ°‘å›½20å¹´ï¼Œä¹Ÿå°±æ˜¯1931å¹´ï¼Œä¸­å›½å‘ç”Ÿç™¾å¹´éš¾é‡çš„ç‰¹å¤§æ´ªç¾ï¼Œç¾æƒ…éåŠ23ä¸ªçœï¼Œå…‰æ±Ÿæ·®æµåŸŸç¾æ°‘å°±é«˜è¾¾5127ä¸‡ï¼Œæ­»äº¡çº¦40ä¸‡äººï¼Œæ—¥æœ¬äººå†æ¬¡å‘ç°äº†è¶è™šè€Œå…¥çš„æ—¶æœºï¼Œè‡ªç„¶ç¾å®³å åŠ å®è¶Šå¯¹å³™ï¼Œå›´å‰¿çº¢å†›ç­‰äº‹ä»¶ï¼Œè€Œä¸”å¼ å­¦è‰¯ä¹Ÿä¸åœ¨ä¸œåŒ—ï¼Œæ—¥æœ¬åœ¨è¿™ä¸ªæ—¶å€™å‘åŠ¨æˆ˜äº‰æ˜æ˜¾åˆ©ç›Šæœ€å¤§ã€‚</p><p>ç¬¬ä¸€é˜¶æ®µä¸ºä¹ä¸€å…«äº‹å˜ï¼ˆ1931å¹´ï¼‰ï¼Œ1931å¹´9æœˆ18æ—¥ï¼Œæ—¥æœ¬é©»ä¸­å›½ä¸œåŒ—åœ°åŒºçš„å…³ä¸œå†›çªç„¶è¢­å‡»æ²ˆé˜³ï¼Œä¹ä¸€å…«äº‹å˜çˆ†å‘ã€‚éšå4ä¸ªå¤šæœˆï¼Œæ—¥å†›é™†ç»­å é¢†ä¸œä¸‰çœå…¨å¢ƒï¼Œå»ºç«‹ä¼ªæ»¡æ´²å›½ã€‚</p><p>ç¬¬äºŒé˜¶æ®µä¸ºå…¨é¢æŠ—æˆ˜ï¼ˆ1937å¹´ï¼‰ï¼Œæ—¥å†›æ”»å åŒ—å¹³ã€ä¸Šæµ·ã€å—äº¬ï¼ˆå—äº¬å¤§å± æ€ï¼‰ï¼Œæˆ‘ä¸­å›½å†›é˜Ÿåœ¨å°å„¿åº„ã€æ­¦æ±‰ç­‰åœ°æŠµæŠ—ã€‚æŠ—æ—¥æˆ˜äº‰æœŸé—´ï¼Œå›½å…±åˆä½œï¼Œå…±äº§å…šé¢†å¯¼æ•Œåæ¸¸å‡»æˆ˜ï¼ˆå¦‚ç™¾å›¢å¤§æˆ˜ï¼‰ï¼Œå›½æ°‘å…šä¸»å¯¼æ­£é¢æˆ˜åœºã€‚</p><p>åœ¨1945å¹´8æœˆ15æ—¥ï¼Œæ—¥æœ¬å®£å¸ƒæ— æ¡ä»¶æŠ•é™ï¼Œæ®ä¸å®Œå…¨ç»Ÿè®¡ï¼ŒæŠ—æˆ˜æ—¶æœŸï¼Œä»<font color='red'><b>ä¸­å›½å†›æ°‘ä¼¤äº¡äººæ•°è¶…è¿‡3500ä¸‡ï¼Œçº¦å ç¬¬äºŒæ¬¡ä¸–ç•Œå¤§æˆ˜ä¼¤äº¡æ€»äººæ•°çš„1&#x2F;3</b></font>ï¼Œè¿™å…¶ä¸­å°±åŒ…æ‹¬<font color='red'><b>å—äº¬å¤§å± æ€çš„30ä¸‡é‡éš¾è€…ã€åŒ…æ‹¬731æ´»ä½“å®éªŒçš„3000ä¸ªæ— è¾œç™¾å§“ã€åŒ…æ‹¬é²è¥¿ç»†èŒæˆ˜é‡éš¾çš„42.7ä¸‡äººã€åŒ…æ‹¬è¢«æŠ“åˆ°æ…°å®‰æ‰€çš„20ä¸‡ä¸­å›½å¦‡å¥³ã€åŒ…æ‹¬æ•°ç™¾ä¸‡è‹±å‹‡æŠ—æˆ˜çš„ä¸­å›½å†›äºº</b></font>ã€‚</p><p>ä»<font color='red'><b>ä¹ä¸€å…«äº‹å˜åˆ°1945å¹´æ—¥æœ¬æŠ•é™è¿™14å¹´é—´ï¼Œæ—¥æœ¬å¯¹åæœ€é«˜æŠ•å…¥å…µåŠ›çº¦410ä¸‡äºº</b></font>ï¼Œä»–ä»¬æ€äººå¦‚éº»ï¼Œæ— æ¶ä¸ä½œã€‚</p><p>è¿™æ˜¯ä¸­åæ°‘æ—çš„å›½éš¾å‘€ï¼Œ14å¹´é—´æ—¥æœ¬çŠ¯ä¸‹çš„æ»”å¤©ç½ªè¡Œï¼Œå¦‚æ¢¦é­‡èˆ¬è¦ç»•åœ¨æ¯ä¸€ä¸ªä¸­å›½äººè„‘æµ·ä¸­ï¼Œè¿‘ä¸€ä¸ªä¸–çºªéƒ½æŒ¥ä¹‹ä¸å»ã€‚</p><p>çœ‹å®Œä»¥ä¸Š5ä¸ªæ—¶æœŸçš„å›½æˆ˜ï¼Œæˆ‘ç›¸ä¿¡å†éº»æœ¨çš„äººéƒ½ä¸å¯èƒ½æ— åŠ¨äºè¡·ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶å¯¹æ—¥æœ¬è¿™ä¸ªå›½å®¶ï¼Œåº”è¯¥ä¼šæœ‰æ›´åŠ æ¸…æ™°çš„è®¤çŸ¥ã€‚</p><h2 id="ä¸‰ã€ä¸­åæ°‘æ—çš„ä¼Ÿå¤§å¤å…´ä¹‹ç»ç•¥æ—¥æœ¬"><a href="#ä¸‰ã€ä¸­åæ°‘æ—çš„ä¼Ÿå¤§å¤å…´ä¹‹ç»ç•¥æ—¥æœ¬" class="headerlink" title="ä¸‰ã€ä¸­åæ°‘æ—çš„ä¼Ÿå¤§å¤å…´ä¹‹ç»ç•¥æ—¥æœ¬"></a>ä¸‰ã€ä¸­åæ°‘æ—çš„ä¼Ÿå¤§å¤å…´ä¹‹ç»ç•¥æ—¥æœ¬</h2><blockquote><p>â€œç»ç•¥â€å‡ºè‡ªã€Šå·¦ä¼ Â·æ˜­å…¬ä¸ƒå¹´ã€‹ï¼šâ€œå¤©å­ç»ç•¥ï¼Œè¯¸ä¾¯æ­£å°ï¼Œå¤ä¹‹åˆ¶ä¹Ÿã€‚â€æœé¢„æ³¨ï¼šâ€œç»è¥å¤©ä¸‹ï¼Œç•¥æœ‰å››æµ·ï¼Œæ•…æ›°ç»ç•¥ã€‚â€</p></blockquote><p>ä¸­ååæ—çš„ä¼Ÿå¤§å¤å…´ï¼Œæ”¶å¤å°æ¹¾è‡ªä¸å¿…å¤šè¯´ï¼Œå¦‚æœè¿ç¥–å›½ç»Ÿä¸€éƒ½åšä¸åˆ°ï¼Œé‚£ä¹ˆåˆ«è¯´æ°‘æ—å¤å…´äº†ï¼Œä¼°è®¡ç¥–å®—çš„æ£ºææ¿éƒ½å‹ä¸ä½äº†ï¼</p><p>å›åˆ°ä¸»é¢˜ï¼Œä¾ç°åœ¨çš„å±€åŠ¿çœ‹ï¼Œè‡³å°‘åœ¨æˆ‘ä»¬è¿™ä»£äººï¼Œæ—¥æœ¬æ˜¯æ²¡æœ‰èƒ½åŠ›å†å¯¹ä¸­å›½å‘èµ·å…¨é¢è¿›æ”»ã€‚ä½†è¿™è¿˜è¿œè¿œä¸å¤Ÿï¼Œæ—¥æœ¬å°±æ˜¯ä¸€æ¡æ¯’è›‡ï¼Œä¸€æ—¦å‡ºç°æœºä¼šï¼Œä»–ä¸€å®šä¼šçŒ›åœ°è·³å‡ºæ¥ç‹ å’¬å’±ä»¬ä¸€å£ã€‚</p><p>æ—¥æœ¬å†›å¤‡æ‰©å¼ å·²æˆå®¢è§‚äº‹å®ï¼Œæ ¹æ®æ—¥æœ¬æ”¿åºœå®˜æ–¹æ•°æ®åŠå›½é™…æœºæ„æŠ¥å‘Šï¼Œæ—¥æœ¬é˜²å«é¢„ç®—è¿‘å¹´æŒç»­å¢é•¿ï¼š</p><ul><li>2023è´¢å¹´ï¼š6.8ä¸‡äº¿æ—¥å…ƒï¼ˆçº¦460äº¿ç¾å…ƒï¼‰ï¼Œåˆ›å†å²æ–°é«˜ï¼›</li><li>2024è´¢å¹´ï¼š7.9ä¸‡äº¿æ—¥å…ƒï¼ˆçº¦530äº¿ç¾å…ƒï¼‰ï¼ŒåŒæ¯”å¢é•¿16.2%ï¼›</li><li>2025è´¢å¹´ï¼š8.7ä¸‡äº¿æ—¥å…ƒï¼ˆçº¦590äº¿ç¾å…ƒï¼‰ï¼Œè®¡åˆ’è¿›ä¸€æ­¥æ‰©å¤§ã€‚</li></ul><p>å…·ä½“åŠ¨å‘åŒ…æ‹¬ï¼š</p><ul><li>å†›äº‹è½¬å‹ï¼š2023å¹´å®Œæˆâ€œåŠ è´ºâ€å·æŠ¤å«èˆ°æ”¹è£…ä¸ºâ€œå‡†èˆªæ¯â€ç¬¬ä¸€é˜¶æ®µå·¥ç¨‹ï¼Œ2024å¹´æ­£å¼å¯ç”¨ï¼›</li><li>æˆ˜ç•¥ååŒï¼šæˆç«‹â€œç»Ÿåˆä½œæˆ˜å¸ä»¤éƒ¨â€ï¼Œä¸ç¾å†›åˆ¶å®šè”åˆè¡ŒåŠ¨é¢„æ¡ˆï¼›</li><li>æŠ€æœ¯çªç ´ï¼šåŠ é€Ÿç ”å‘é«˜è¶…éŸ³é€Ÿå¯¼å¼¹ï¼Œç›®æ ‡æ˜ç¡®æŒ‡å‘åŒºåŸŸå®‰å…¨æ ¼å±€è°ƒæ•´ã€‚</li></ul><blockquote><p>æ³¨ï¼šæ—¥æœ¬é˜²å«çœå¤šæ¬¡å¼ºè°ƒå…¶å†›å¤‡å‘å±•ä¸ºâ€œé˜²å¾¡æ€§â€ã€â€œåº”å¯¹åœ°åŒºå¨èƒâ€ï¼Œä½†å…¶è¡ŒåŠ¨å·²æ˜¾è‘—åç¦»å’Œå¹³å‘å±•è½¨é“ã€‚</p></blockquote><p>ä¸æ˜¯æˆ‘æ•æ„Ÿï¼Œå¯ä»¥è¯´æ—¥æœ¬å†›å›½ä¸»ä¹‰çš„ç«ç§ä»æœªç†„ç­ï¼Œä¸ç®¡æˆ‘ä»¬ç°åœ¨å¤šä¹ˆå¼ºå¤§ï¼Œéƒ½è¦å°å¿ƒæé˜²ç€è¿™ä¸ªæŒªä¸èµ°çš„é‚»å±…ã€‚æ­£å¦‚ã€Šå­™å­å…µæ³•ã€‹æ‰€è¨€ï¼šâ€œå…µè€…ï¼Œå›½ä¹‹å¤§äº‹ï¼Œæ­»ç”Ÿä¹‹åœ°ï¼Œå­˜äº¡ä¹‹é“ï¼Œä¸å¯ä¸å¯Ÿä¹Ÿã€‚â€</p><p>è‰éƒ½å¯ä»¥åœ¨åœ°ä¸‹è›°ä¼17å¹´å‘¢ï¼Œä½•å†µäººå‘¢ï¼Ÿä½•å†µæ˜¯æ—¥æœ¬å‘¢ï¼Ÿ</p><p>å› æ­¤ï¼Œæˆ‘ä»¬ä¸èƒ½é‡çŠ¯ç¥–å®—ä»¬çŠ¯è¿‡çš„å†å²é”™è¯¯ï¼Œåœ¨ä¸­åå¼ºç››çš„æ—¶å€™ï¼Œä¸€å®šè¦æ‰¾æœºä¼šå½»åº•æ‰“æ–­æ—¥æœ¬çš„è„Šæ¢éª¨ï¼Œä¸Šå¯å‘Šæ…°åˆ—ç¥–åˆ—å®—ï¼Œä¸‹å¯è«æ³½åä¸–å­å­™ã€‚<font color=red><b>å¦‚æœä¸€å®šè¦æœ‰äººæ‰¿æ‹…å†å²éª‚åï¼Œé‚£å°±ç”±ä½ æˆ‘æ¥æ‰¿æ‹…å§</b></font>ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ä»Šæ—¶ä»Šæ—¥ï¼Œéä½ æˆ‘è«å±ï¼å‹¿ä½¿ä¸­åæ°‘æ—æ–­ç»ï¼ŒåŠ¡è¦ä½¿å¤·ç‹„ä¸æ•¢å°è§†ä¸­å›½ï¼Œä¹±è‡£è´¼å­ä¸æ•¢çª¥æµ‹ç¥å™¨ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬å°±æ˜¯ä¸è‚¯åŸè°…æ—¥æœ¬å‘¢ï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä¸€ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬å°±æ˜¯ä¸è‚¯åŸè°…æ—¥æœ¬å‘¢ï¼Ÿ&quot; class=</summary>
      
    
    
    
    <category term="æ„Ÿæƒ³" scheme="https://www.yanzhenjie.com/categories/%E6%84%9F%E6%83%B3/"/>
    
    
    <category term="æ„Ÿæƒ³" scheme="https://www.yanzhenjie.com/tags/%E6%84%9F%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦â€ä¾¯äº®å¹³â€œ</title>
    <link href="https://www.yanzhenjie.com/post/20250302/7d6fcb150f46/"/>
    <id>https://www.yanzhenjie.com/post/20250302/7d6fcb150f46/</id>
    <published>2025-03-02T09:54:35.000Z</published>
    <updated>2025-03-06T10:11:13.496Z</updated>
    
    <content type="html"><![CDATA[<p>å¾ˆå¤šäººæœ‰ç–‘æƒ‘ï¼Œä¾¯äº®å¹³ä¸€ä¸ªå¤„é•¿ï¼Œæ€ä¹ˆä¼šå—åˆ°ä½œä¸ºçœå§”ä¹¦è®°çš„æ²™ç‘é‡‘å»ä¸“é—¨è¿æ¥ï¼Ÿå¯èƒ½æ²™ç‘é‡‘ä¹Ÿä¸æ˜¯å¾ˆæ˜ç™½ä¸Šé¢çš„ç”¨æ„ï¼Œå¯æ—¢ç„¶è®©ä»–è¿™ä¹ˆåšï¼Œé‚£ä¸€å®šæ˜¯æœ‰å„ç§æ·±æ„åœ¨å…¶ä¸­ã€‚</p><p>åˆ˜æ–°å»ºè¢«é€®æ•ä¹‹å‰ï¼Œä»–è¯´è¿‡è¿™æ ·ä¸€å¥è¯ï¼šâ€ä½ çŸ¥é“å—ï¼Ÿè¿™ä¸ªæ–°ä¸­å›½æ˜¯è°æ‰“ä¸‹æ¥çš„ï¼Ÿæ˜¯æˆ‘çˆ·çˆ·ã€æˆ‘å§¥å§¥ä»–ä»¬é‚£ä¸€è¾ˆæ— äº§é˜¶çº§é©å‘½å®¶æŠ›å¤´é¢…æ´’çƒ­è¡€æ¢æ¥çš„ï¼Œä¸æ˜¯ä½ ï¼Œä½ æ˜¯åäº«å…¶æˆè€…ã€‚â€è¿™å¥è¯æ’•å¼€äº†è¡€æ·‹æ·‹çš„çœŸç›¸ï¼šä¾¯äº®å¹³èµ¶ä¸Šäº†å¥½æ—¶ä»£ï¼Œç››ä¸–é‡Œå†çŠ¯é”™ä¹Ÿèƒ½å¹³æ­¥é’äº‘ï¼›ä¾¯äº®å¹³æœ‰ä¸ªå¥½å¦»å­é’Ÿå°è‰¾ï¼Œè®©ä»–çš„å†’å¤±è½æ’æ€»èƒ½ä¸€æ¬¡åˆä¸€æ¬¡çš„åŒ–é™©ä¸ºå¤·ã€‚</p><p>ä¸å¯å¦è®¤ï¼Œä¾¯äº®å¹³æ˜¯è¿™ä¸ªæ—¶ä»£çš„æ—¢å¾—åˆ©ç›Šè€…ã€‚å½“äººä»¬é€æ¸ç†è§£äº†ç¥åŒä¼Ÿåï¼Œå¼€å§‹åŒæ¶ä¾¯äº®å¹³é«˜é«˜åœ¨ä¸Šçš„å§¿æ€ï¼Œç—›æ¨ä»–é“è²Œå²¸ç„¶çš„æ­£ä¹‰ã€‚å¯è¿™ä¸ªå›½å®¶ååéœ€è¦è¿™æ ·çš„äººï¼Œä½ å¾ˆéš¾è§åˆ°â€å¹¸è¿ã€åŠªåŠ›ä¸èµ¤å­ä¹‹å¿ƒâ€åŒæ—¶å‡ºç°åœ¨ä¸€ä¸ªäººèº«ä¸Šï¼Œæ­£æ˜¯è¿™æ ·çš„äººï¼Œæ‰èƒ½æ°¸è¿œç§‰æŒæ­£ä¹‰å¯å®ˆä¿¡å¿µã€‚æ­£æ˜¯é’Ÿå°è‰¾çš„é€šå¤©èƒŒæ™¯ï¼Œæ‰è®©è¿™æ ªæ¸©å®¤ç«ç‘°æ•¢äºåœ¨ç‹‚é£æš´é›¨ä¸­ç»½æ”¾ã€‚ä»–çš„é²è½éœ€è¦å®¶æ—è«è”½æ‰˜åº•ï¼Œä»–çš„çƒ­è¡€éœ€è¦çº¢è‰²è¡€è„‰ä¿æ¸©ã€‚</p><p>ç©·äººå½“ä¸äº†æ¸…å®˜ï¼Œåªæœ‰ä¸€ç”Ÿé¡ºé‚æ— å¿§ï¼Œèº«åæ°¸è¿œç«™ç€èƒ½å…œåº•çš„é å±±ï¼Œæ‰æ•¢åœ¨é«˜é€Ÿå…¬è·¯ä¸Šæ‹¦æè¾¾åº·çš„ä¸“è½¦ï¼Œæ‰æ•¢æªç€è€å­¦é•¿å’Œè€å¸ˆä¸æ”¾æ‰‹ã€‚â€å¯Œè´µä¸èƒ½æ·«ï¼Œè´«è´±ä¸èƒ½ç§»ï¼Œå¨æ­¦ä¸èƒ½å±ˆâ€â€”â€”è¿™ç§æ•™ç§‘ä¹¦é‡Œçš„å“æ ¼ï¼Œåœ¨ä¾¯äº®å¹³èº«ä¸Šæˆäº†ç°å®ï¼Œä¹Ÿåªæœ‰è¿™æ ·çš„äººï¼Œæ‰æ²¡æœ‰ç ´ç»½ï¼Œå³ä¾¿é•¿å˜¶ç©¿æ€€ä¹Ÿä¸è¿‡æ˜¯é¼“æ°”éª¨è¡€ã€‚å› ä¸ºæ— éœ€å‘ç°å®ä½å¤´ï¼Œæ‰€ä»¥æµ‘èº«æ²¡æœ‰ç ´ç»½ï¼›å› ä¸ºä¸æ›¾è¢«ç”Ÿæ´»ç£‹ç£¨ï¼Œæ‰€ä»¥è¿ä¼¤å£éƒ½é€ç€ç†æƒ³ä¸»ä¹‰çš„è¡€è‰²ã€‚</p><p>å¯æƒœè¿™æ ·çš„äººç»ˆç©¶æ˜¯å‡¤æ¯›éºŸè§’ï¼Œä»–ä»¬æ´»åœ¨çœŸç©ºèˆ¬çš„ç†æƒ³å›½åº¦é‡Œï¼Œè¿å‘¼å¸éƒ½å¸¦ç€ä¸çœŸå®çš„çº¯ç²¹ã€‚æœ‰ä¸€å¥è¯›å¿ƒçš„è¯ï¼šä¾¯äº®å¹³æ°¸è¿œä½“ä¼šä¸åˆ°èœå¸‚åœºé‡Œä¸ºä¸‰æ¯›é’±äº‰æ‰§çš„çª˜è¿«ï¼Œç†è§£ä¸äº†å†œæ°‘å·¥èœ·ç¼©åœ¨æ¡¥æ´ä¸‹çš„å¯’å‡‰ã€‚ä¸æ˜¯ä»–å†·æ¼ ï¼Œè€Œæ˜¯ä»–çš„é‡‘ä¸ç¬¼é‡Œä»æœªé£è¿›è¿‡çœŸæ­£çš„é£é›¨ã€‚</p><p>æ‰€ä»¥å¤§å®¶åº”è¯¥æ˜ç™½äº†ï¼šä¸ºä»€ä¹ˆä¸€ä¸ªå‰¯å…çº§å¹²éƒ¨éœ€è¦çœå§”ä¹¦è®°äº²è‡ªè¿æ¥ï¼Ÿå› ä¸ºå¯’å†¬éœ€è¦è¿™æ ·çš„ç«ç§ï¼Œç››ä¸–éœ€è¦è¿™æ ·çš„é•œå­ã€‚æˆ‘ä»¬è¿™äº›åœ¨ååˆ©åœºæ‘†æ¸¡çš„äººï¼Œæ—©æŠŠè…°å¼¯æˆäº†é—®å·ã€‚è€Œä¾¯äº®å¹³ä»¬å§‹ç»ˆç«™æˆæƒŠå¹å·ï¼Œç”¨ç¬”ç›´çš„è„Šæ¢ä¸ˆé‡ç€ç†æƒ³ä¸å •è½çš„è·ç¦»â€”â€”è¿™æˆ–è®¸å°±æ˜¯æ—¶ä»£ç•™ç»™æ¸…ç™½çš„æœ€åä¸€å—â€ç‰¹æƒâ€ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¾ˆå¤šäººæœ‰ç–‘æƒ‘ï¼Œä¾¯äº®å¹³ä¸€ä¸ªå¤„é•¿ï¼Œæ€ä¹ˆä¼šå—åˆ°ä½œä¸ºçœå§”ä¹¦è®°çš„æ²™ç‘é‡‘å»ä¸“é—¨è¿æ¥ï¼Ÿå¯èƒ½æ²™ç‘é‡‘ä¹Ÿä¸æ˜¯å¾ˆæ˜ç™½ä¸Šé¢çš„ç”¨æ„ï¼Œå¯æ—¢ç„¶è®©ä»–è¿™ä¹ˆåšï¼Œé‚£ä¸€å®šæ˜¯æœ‰å„ç§æ·±æ„åœ¨å…¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;åˆ˜æ–°å»ºè¢«é€®æ•ä¹‹å‰ï¼Œä»–è¯´è¿‡è¿™æ ·ä¸€å¥è¯ï¼šâ€ä½ çŸ¥é“å—ï¼Ÿè¿™ä¸ªæ–°ä¸­å›½æ˜¯è°æ‰“ä¸‹æ¥çš„ï¼Ÿæ˜¯æˆ‘çˆ·çˆ·ã€æˆ‘å§¥å§¥ä»–ä»¬é‚£ä¸€è¾ˆæ— äº§é˜¶çº§é©</summary>
      
    
    
    
    <category term="æ„Ÿæƒ³" scheme="https://www.yanzhenjie.com/categories/%E6%84%9F%E6%83%B3/"/>
    
    
    <category term="æ„Ÿæƒ³" scheme="https://www.yanzhenjie.com/tags/%E6%84%9F%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>è®©ä½ ç—›è‹¦çš„æ˜¯ç‰©è´¨è¿˜æ˜¯æ‰§å¿µ</title>
    <link href="https://www.yanzhenjie.com/post/20250204/91299a2e3d82/"/>
    <id>https://www.yanzhenjie.com/post/20250204/91299a2e3d82/</id>
    <published>2025-02-04T06:26:47.000Z</published>
    <updated>2025-03-06T10:14:27.400Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¿«èŠ‚å¥çš„ç°ä»£ç”Ÿæ´»ä¸­ï¼Œæˆ‘é—¨å¸¸å¸¸ä¼šæ„Ÿåˆ°çƒ¦æ¼ï¼Œç„¶è€Œä¸ç®¡ä»å®è§‚è¿˜æ˜¯å¾®è§‚æ¥çœ‹ï¼Œä½ æˆ‘çš„å·¥ä½œä¸ç”Ÿæ´»å“è´¨å¯èƒ½æ¯”å¤§å¤šæ•°äººéƒ½è¦å¥½ã€‚</p><p>æˆ‘ä»¬å¯¹æŸäº›äº‹ç‰©çš„è¿‡åº¦è¿½æ±‚å’Œæ‰§ç€ï¼Œå¯èƒ½è¡¨ç°ä¸ºå¯¹è´¢å¯Œã€åœ°ä½ã€åèª‰çš„æ¸´æœ›ï¼Œä¹Ÿå¯èƒ½ä½“ç°ä¸ºå¯¹å®Œç¾ã€æ§åˆ¶ã€è®¤åŒçš„æ‰§ç€ã€‚è¿™äº›æ‰§å¿µä¸ä»…æ¶ˆè€—äº†æˆ‘ä»¬çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œæ›´è®©æˆ‘ä»¬åœ¨è¿½æ±‚çš„è¿‡ç¨‹ä¸­è¿·å¤±äº†è‡ªæˆ‘ï¼Œé™·å…¥äº†æ— å°½çš„ç„¦è™‘å’Œç—›è‹¦ä¹‹ä¸­ã€‚å½“æˆ‘ä»¬æ‰§ç€äºæŸä¸€ç›®æ ‡æ—¶ï¼Œå¾€å¾€ä¼šå¿½è§†è¿‡ç¨‹ä¸­çš„ç¾å¥½ï¼Œç”šè‡³ä¼šå› ä¸ºç›®æ ‡çš„æœªèƒ½è¾¾æˆè€Œé™·å…¥æ·±æ·±çš„è‡ªè´£å’Œç»æœ›ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œç‰©è´¨è™½ç„¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„ç”Ÿç†éœ€æ±‚å’Œéƒ¨åˆ†å¿ƒç†éœ€æ±‚ï¼Œä½†å®ƒå¹¶éç—›è‹¦çš„æ ¹æºã€‚äº‹å®ä¸Šï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å¯¹ç‰©è´¨çš„è¿‡åº¦è¿½æ±‚å’Œä¾èµ–ï¼Œæ°æ°æ˜¯å› ä¸ºå†…å¿ƒçš„æŸäº›æ‰§å¿µåœ¨ä½œç¥Ÿã€‚å½“æˆ‘ä»¬æ”¾ä¸‹è¿™äº›æ‰§å¿µï¼Œå­¦ä¼šä»¥æ›´åŠ å¹³å’Œçš„å¿ƒæ€å»é¢å¯¹ç”Ÿæ´»æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œå³ä½¿ç‰©è´¨æ¡ä»¶å¹¶ä¸ä¼˜è¶Šï¼Œæˆ‘ä»¬ä¾ç„¶èƒ½å¤Ÿæ„Ÿå—åˆ°å¹¸ç¦å’Œæ»¡è¶³ã€‚</p><p>ä¹Ÿè®¸ï¼Œä½ æˆ‘è¯¥æ¥ä¸€åœºè¯´èµ°å°±èµ°çš„æ—…è¡Œï¼Œæ”¾ä¸‹äº†å¯¹èŒåœºæˆåŠŸå’Œç‰©è´¨è´¢å¯Œçš„æ‰§å¿µï¼Œé‡æ–°å®¡è§†äº†è‡ªå·±çš„ç”Ÿæ´»å’Œä»·å€¼è§‚ã€‚åœ¨æ—…é€”ä¸­ä½“ä¼šç”Ÿæ´»çš„çœŸè°›ï¼Œå­¦ä¼šç”¨æå°‘çš„èµ„æºå»åˆ›é€ å¿«ä¹ï¼Œä¹Ÿå­¦ä¼šæ¥çº³å’Œæ¬£èµç”Ÿæ´»ä¸­çš„ä¸å®Œç¾ã€‚é‡æ–°æ‰¾å›å†…å¿ƒçš„å¹³é™å’ŒåŠ›é‡ï¼Œä¹Ÿåœ¨å›å½’èŒåœºåèƒ½å¤Ÿä»¥æ›´åŠ è½»æ¾å’Œè‡ªä¿¡çš„æ€åº¦å»é¢å¯¹å·¥ä½œä¸­çš„æŒ‘æˆ˜ã€‚</p><p>å› æ­¤ï¼Œå­¦ä¼šæ”¾ä¸‹é‚£äº›ä¸å¿…è¦çš„æ‰§å¿µï¼Œä»¥æ›´åŠ å¼€æ”¾å’ŒåŒ…å®¹çš„å¿ƒæ€å»é¢å¯¹ç”Ÿæ´»ä¸­çš„ä¸€åˆ‡ã€‚å½“æˆ‘ä»¬ä¸å†æ‰§ç€äºæŸä¸€ç›®æ ‡æˆ–æŸä¸€ç»“æœæ—¶ï¼Œæˆ‘ä»¬ä¼šæ›´åŠ ä¸“æ³¨äºè¿‡ç¨‹æœ¬èº«ï¼Œæ›´åŠ çæƒœå’Œäº«å—ç”Ÿæ´»ä¸­çš„æ¯ä¸€ä¸ªç¬é—´ã€‚è¿™æ ·çš„æˆ‘ä»¬ï¼Œä¸ä»…èƒ½å¤Ÿæ›´åŠ è½»æ¾åœ°èµ°å‘æˆåŠŸï¼Œä¹Ÿèƒ½å¤Ÿåœ¨äººç”Ÿçš„æ—…é€”ä¸­æ”¶è·æ›´å¤šçš„å¹¸ç¦å’Œæ»¡è¶³ã€‚</p><p>æ€»ä¹‹ï¼Œæ‰§å¿µå¾€å¾€æ˜¯ç—›è‹¦çš„æ ¹æºï¼Œè€Œç‰©è´¨å¹¶éå†³å®šæ€§çš„å› ç´ ã€‚å½“æˆ‘ä»¬å­¦ä¼šæ”¾ä¸‹æ‰§å¿µï¼Œä»¥æ›´åŠ å¹³å’Œå’Œå¼€æ”¾çš„å¿ƒæ€å»é¢å¯¹ç”Ÿæ´»æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼ŒæˆåŠŸä¸å¹¸ç¦å…¶å®å°±åœ¨æˆ‘ä»¬çš„èº«è¾¹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨å¿«èŠ‚å¥çš„ç°ä»£ç”Ÿæ´»ä¸­ï¼Œæˆ‘é—¨å¸¸å¸¸ä¼šæ„Ÿåˆ°çƒ¦æ¼ï¼Œç„¶è€Œä¸ç®¡ä»å®è§‚è¿˜æ˜¯å¾®è§‚æ¥çœ‹ï¼Œä½ æˆ‘çš„å·¥ä½œä¸ç”Ÿæ´»å“è´¨å¯èƒ½æ¯”å¤§å¤šæ•°äººéƒ½è¦å¥½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯¹æŸäº›äº‹ç‰©çš„è¿‡åº¦è¿½æ±‚å’Œæ‰§ç€ï¼Œå¯èƒ½è¡¨ç°ä¸ºå¯¹è´¢å¯Œã€åœ°ä½ã€åèª‰çš„æ¸´æœ›ï¼Œä¹Ÿå¯èƒ½ä½“ç°ä¸ºå¯¹å®Œç¾ã€æ§åˆ¶ã€è®¤åŒçš„æ‰§ç€ã€‚è¿™äº›æ‰§å¿µä¸ä»…æ¶ˆè€—äº†æˆ‘ä»¬çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œæ›´è®©</summary>
      
    
    
    
    <category term="æ„Ÿæƒ³" scheme="https://www.yanzhenjie.com/categories/%E6%84%9F%E6%83%B3/"/>
    
    
    <category term="æ„Ÿæƒ³" scheme="https://www.yanzhenjie.com/tags/%E6%84%9F%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>Androidæ€§èƒ½ä¼˜åŒ–ä¹‹ç»‘å®šRenderThreadåˆ°å¤§æ ¸CPU</title>
    <link href="https://www.yanzhenjie.com/post/20241221/28b030280983/"/>
    <id>https://www.yanzhenjie.com/post/20241221/28b030280983/</id>
    <published>2024-12-21T13:22:23.000Z</published>
    <updated>2024-12-22T12:13:16.714Z</updated>
    
    <content type="html"><![CDATA[<p>å…¶å®æœ¬æ–‡é¢˜ç›®æ›´åˆé€‚å«åšã€ŠAndroid ç»‘å®šä»»æ„çº¿ç¨‹åˆ°ä»»æ„ CPUã€‹ï¼Œå…¶èŒƒå›´ä¹Ÿæ˜¯æ¶µç›–äº†é¢˜ç›®çš„ï¼Œä½†æ˜¯ä¸èƒ½ä½“ç°å…¶æœ€å¤§ä»·å€¼<font color="red"><b>æ€§èƒ½ä¼˜åŒ–</b></font>ï¼Œå› æ­¤è¿˜æ˜¯ç¼©å°äº†æ¶µç›–èŒƒå›´ï¼Œä½†æ˜¯è¯»å®Œæœ¬æ–‡ä½ è¿˜æ˜¯å¯ä»¥åšåˆ° Android ç»‘å®šä»»æ„çº¿ç¨‹åˆ°ä»»æ„ CPU çš„ã€‚</p><span id="more"></span><br/><p>ç»‘å®šçº¿ç¨‹åˆ° CPU çš„æ ¸å¿ƒå°±æ˜¯è°ƒç”¨<code>sched_setaffinity</code>å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬è¦ä¸ºæ­¤åšä¸€äº›å‡†å¤‡ï¼š</p><ol><li>äº†è§£<code>sched_setaffinity</code>å‡½æ•°ï¼Œç¡®å®šç»‘å®šæŸçº¿ç¨‹åˆ°æŸ CPU ä¸Šéœ€è¦ä»€ä¹ˆå‚æ•°ã€‚</li><li>äº†è§£æ‰‹æœºå¤šæ ¸ CPU æ¶æ„ï¼Œå¦‚ä½•è·å–åˆ°æ¯ä¸ª CPU çš„é¢‘ç‡ï¼Œé¢‘ç‡è¶Šé«˜çš„è¡¨ç¤ºæ€§èƒ½è¶Šé«˜ï¼Œç›¸ååˆ™è¶Šå·®ã€‚</li><li>äº†è§£ Android ç³»ç»Ÿä¸­æŸä¸ªè¿›ç¨‹ä¸‹çš„æ‰€æœ‰çº¿ç¨‹çš„å„ç§ä¿¡æ¯ï¼ŒåŒ…æ‹¬çº¿ç¨‹ mainã€RenderThread ç­‰ç³»ç»Ÿçº¿ç¨‹ã€‚</li><li>ç¡®å®šç›®æ ‡çº¿ç¨‹è¿è¡Œåœ¨å“ªä¸ª CPU ä¸Šï¼Œç”¨äºç¡®å®šç»“æœã€‚</li></ol><h2 id="1ã€sched-setaffinity-å‡½æ•°"><a href="#1ã€sched-setaffinity-å‡½æ•°" class="headerlink" title="1ã€sched_setaffinity å‡½æ•°"></a>1ã€sched_setaffinity å‡½æ•°</h2><p>è¯¥å‡½æ•°ç”¨äºè®¾ç½®æŒ‡å®šè¿›ç¨‹çš„ CPU äº²å’Œæ€§ï¼Œè®¾ç½®çº¿ç¨‹å’Œ CPU äº²å’Œæ€§åº”è¯¥ä½¿ç”¨<code>pthread_setaffinity_np</code>ï¼Œç„¶è€Œåœ¨å®è·µä¸­æˆ‘å‘ç° Android ä¸­æ²¡æœ‰<code>pthread_setaffinity_np</code>ï¼ŒAndroid å¼€å‘ä¸­å¯ä»¥ä½¿ç”¨<code>sched_setaffinity</code>ä»£æ›¿ï¼Œä¸ºäº†é¿å…åç§»ä¸»é¢˜è¿™é‡Œåªè¯¦ç»†ä»‹ç»<code>sched_setaffinity</code>ã€‚</p><p>å‡½æ•°åŸå‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">sched_setaffinity</span><span class="params">(<span class="type">pid_t</span> pid, <span class="type">size_t</span> cpusetsize, <span class="type">const</span> <span class="type">cpu_set_t</span> *mask)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°ï¼š<ul><li>pidï¼šè¦è®¾ç½®äº²å’Œæ€§çš„è¿›ç¨‹çš„ PIDã€‚<font color="red">æˆ‘ä»¬å¯ä»¥ç”¨çº¿ç¨‹ tid ï¼ˆå†…æ ¸çº§çº¿ç¨‹ IDï¼‰æ¥è®¾ç½®çº¿ç¨‹å’Œ CPU çš„äº²å’Œæ€§ã€‚</font></li><li>cpusetsizeï¼šcpu_set_t ç±»å‹çš„å¤§å°ã€‚</li><li>maskï¼šæŒ‡å‘ä¸€ä¸ª cpu_set_t çš„æŒ‡é’ˆï¼Œè¡¨ç¤ºè¿›ç¨‹å¯ä»¥è¿è¡Œåœ¨å“ªäº› CPU ä¸Šã€‚</li></ul></li></ul><h2 id="2ã€CPU-é¢‘ç‡"><a href="#2ã€CPU-é¢‘ç‡" class="headerlink" title="2ã€CPU é¢‘ç‡"></a>2ã€CPU é¢‘ç‡</h2><h3 id="2-1ã€è®¤è¯†-CPU-é¢‘ç‡"><a href="#2-1ã€è®¤è¯†-CPU-é¢‘ç‡" class="headerlink" title="2.1ã€è®¤è¯† CPU é¢‘ç‡"></a>2.1ã€è®¤è¯† CPU é¢‘ç‡</h3><p>ç›®å‰å¸‚é¢ä¸Šå‡ ä¹æ‰€æœ‰æ‰‹æœºéƒ½æ˜¯å¤šæ ¸ï¼Œæˆ‘ä»¬ç”¨ Perfetto éšä¾¿æŠ“ä¸ª Trace å°±å¯ä»¥çœ‹åˆ° CPU è¢«å ç”¨çš„æƒ…å†µï¼Œå¦‚å›¾ä¸€æ‰€ç¤ºï¼š</p><blockquote><p>ä¸äº†è§£ Perfetto å¦‚ä½•åˆ†æ Trace çš„å¯ä»¥çœ‹æˆ‘æ–‡ç« ï¼š<a href="https://www.yanzhenjie.com/post/20240406/b3b882a8973b/">https://www.yanzhenjie.com/post/20240406/b3b882a8973b/</a></p></blockquote><center><img   width="90%"   src="1.png"  ><br/>ï¼ˆå›¾ä¸€ï¼‰</center><p>å¯ä»¥çœ‹åˆ°æˆ‘è¿™ä¸ªæ‰‹æœºæœ‰ 8 ä¸ª CPUï¼Œå…¶ä¸­ CPU7 çœ‹èµ·æ¥æ˜¯æœ€ç¹å¿™çš„ï¼Œåœ¨è¿™ä¸ªæ‰‹æœºä¸Šï¼Œå®ƒæ˜¯å”¯ä¸€çš„å¤§æ ¸ CPUï¼Œä¹Ÿæ˜¯ main çº¿ç¨‹æ‰€ç»‘å®šçš„ CPUã€‚</p><p>å¯¹äºä»»ä½• Android æ‰‹æœºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>/sys/devices/system/cpu/</code>ç›®å½•ä¸‹çœ‹åˆ°æ‰€æœ‰ CPUï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hw_arm64:/ $ cd /sys/devices/system/cpu/</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $ ls</span><br><span class="line">cpu0  cpu1  cpu2  cpu3  cpu4  cpu5  cpu6  cpu7  offline  online  cpufreq  cpuidle  ...</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æŸ¥çœ‹æ¯ä¸ª CPU çš„é¢‘ç‡ï¼Œä»¥ä¸€ä¸ª 8 æ ¸ 8 çº¿ç¨‹çš„ CPU ä¸ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hw_arm64:/sys/devices/system/cpu $ cat cpu0/cpufreq/cpuinfo_max_freq 1804800</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $ cat cpu1/cpufreq/cpuinfo_max_freq 1804800</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $ cat cpu2/cpufreq/cpuinfo_max_freq 1804800</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $ cat cpu3/cpufreq/cpuinfo_max_freq 1804800</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $ cat cpu4/cpufreq/cpuinfo_max_freq 2419200</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $ cat cpu5/cpufreq/cpuinfo_max_freq 2419200</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $ cat cpu6/cpufreq/cpuinfo_max_freq 2419200</span><br><span class="line">hw_arm64:/sys/devices/system/cpu $ cat cpu7/cpufreq/cpuinfo_max_freq 2841600</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ ¹æ® CPU é¢‘ç‡çš„ä¸åŒï¼Œå¯ä»¥æŒ‰ç…§å°† CPU é¢‘ç‡åˆ†ä¸º 3 ç»„ï¼Œ2841600 æ˜¯å”¯ä¸€ä¸€ä¸ªå¤§æ ¸ CPUï¼Œä¹Ÿå¯ä»¥çœ‹å‡ºä¸Šæ–‡æåˆ°çš„ç»“è®ºã€‚</p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡º 1 ä¸ªç®€å•çš„ç»“è®ºï¼šæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­è·å–åˆ°æ‰‹æœºçš„ CPU åˆ—è¡¨ï¼Œå¹¶å¯ä»¥æŒ‰ç…§ CPU é¢‘ç‡å¯¹ CPU è¿›è¡Œåˆ†ç»„ã€‚</p><h3 id="2-2ã€æŒ‰é¢‘ç‡åˆ†ç»„-CPU-åˆ—è¡¨"><a href="#2-2ã€æŒ‰é¢‘ç‡åˆ†ç»„-CPU-åˆ—è¡¨" class="headerlink" title="2.2ã€æŒ‰é¢‘ç‡åˆ†ç»„ CPU åˆ—è¡¨"></a>2.2ã€æŒ‰é¢‘ç‡åˆ†ç»„ CPU åˆ—è¡¨</h3><p>æ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ CPU é¢‘ç‡ç»™ CPU åˆ—è¡¨åˆ†ç»„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">./</span><br><span class="line">â”œâ”€â”€ 2841600</span><br><span class="line">â”‚Â Â  â””â”€â”€ cpu7</span><br><span class="line">â”œâ”€â”€ 2419200</span><br><span class="line">â”‚   â”œâ”€â”€ cpu6</span><br><span class="line">â”‚   â”œâ”€â”€ cpu5</span><br><span class="line">â”‚Â Â  â””â”€â”€ cpu4</span><br><span class="line">â””â”€â”€ 1804800</span><br><span class="line">    â”œâ”€â”€ cpu3</span><br><span class="line">    â”œâ”€â”€ cpu2</span><br><span class="line">    â”œâ”€â”€ cpu1</span><br><span class="line"> Â Â  â””â”€â”€ cpu0</span><br></pre></td></tr></table></figure><p>åœ¨ C++ ä¸­æŒ‰ç…§è§„åˆ™è¯»å–åˆ°è¿™ä¸ª<code>æŒ‰é¢‘ç‡åˆ†ç»„çš„ CPU åˆ—è¡¨</code>ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;dirent.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;regex&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CPUUtils.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;../log/Log.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> TAG <span class="string">&quot;CPUUtils&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">const</span> std::regex <span class="title">CPUUtils::cpuNamePattern</span><span class="params">(<span class="string">&quot;^cpu[0-9]+$&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è·å–CPUé¢‘ç‡åˆ†ç»„mapã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @return è¿”å›énullçš„CPUé¢‘ç‡åˆ†ç»„mapï¼Œkeyä¸ºé¢‘ç‡ï¼Œvalueä¸ºåŒé¢‘CPUåˆ—è¡¨ã€‚ä¾‹å¦‚ï¼š&#123;&quot;888&quot;:[&quot;cpu0&quot;,&quot;cpu1&quot;], &quot;666&quot;:[&quot;cpu2&quot;,&quot;cpu3&quot;]&#125;ã€‚</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">std::map&lt;<span class="type">int</span>, std::vector&lt;std::string&gt;, std::greater&lt;&gt;&gt; CPUUtils::<span class="built_in">findCPUFreqMap</span>() &#123;</span><br><span class="line">    <span class="type">const</span> std::string cpuDirPath = <span class="string">&quot;/sys/devices/system/cpu&quot;</span>;</span><br><span class="line">    std::map&lt;<span class="type">int</span>, std::vector&lt;std::string&gt;, std::greater&lt;&gt;&gt; freqCPUMap;</span><br><span class="line"></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *dirPath = cpuDirPath.<span class="built_in">c_str</span>();</span><br><span class="line">    DIR *dir = <span class="built_in">opendir</span>(cpuDirPath.<span class="built_in">c_str</span>());</span><br><span class="line">    <span class="keyword">if</span> (!dir) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(TAG, <span class="string">&quot;findCpuFreqMap, the system/cpu [%s] can be not found.&quot;</span>, dirPath);</span><br><span class="line">        <span class="keyword">return</span> freqCPUMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†CPUç›®å½•ä¸‹çš„CPUåˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">dirent</span> *entry;</span><br><span class="line">    <span class="keyword">while</span> ((entry = <span class="built_in">readdir</span>(dir)) != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="type">const</span> std::string cpuFileName = entry-&gt;d_name;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åªçœ‹ CPU+æ•°å­—çš„ç›®å½•ï¼Œè¿™æ‰æ˜¯CPUä¿¡æ¯ç›®å½•</span></span><br><span class="line">        <span class="keyword">if</span> (!std::<span class="built_in">regex_match</span>(cpuFileName, CPUUtils::cpuNamePattern)) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–CPUæœ€å¤§é¢‘ç‡æ–‡ä»¶</span></span><br><span class="line">        std::string maxFreqFilePath = cpuDirPath;</span><br><span class="line">        maxFreqFilePath.<span class="built_in">append</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        maxFreqFilePath.<span class="built_in">append</span>(cpuFileName);</span><br><span class="line">        maxFreqFilePath.<span class="built_in">append</span>(<span class="string">&quot;/cpufreq/cpuinfo_max_freq&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="function">std::ifstream <span class="title">maxFreqFile</span><span class="params">(maxFreqFilePath)</span></span>;</span><br><span class="line">        <span class="keyword">if</span> (!maxFreqFile) &#123;</span><br><span class="line">            <span class="built_in">LOGE</span>(TAG, <span class="string">&quot;findCpuFreqMap, the cpuinfo_max_freq [%s] can be not found.&quot;</span>, maxFreqFilePath.<span class="built_in">c_str</span>());</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯»å–CPUæœ€å¤§é¢‘ç‡ï¼Œå¹¶æŒ‰ç…§é¢‘ç‡åˆ†ç»„è®°å½•</span></span><br><span class="line">        std::string line;</span><br><span class="line">        <span class="keyword">if</span> (std::<span class="built_in">getline</span>(maxFreqFile, line)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">int</span> frequency = std::<span class="built_in">stoi</span>(line);</span><br><span class="line">                freqCPUMap[frequency].<span class="built_in">push_back</span>(cpuFileName);</span><br><span class="line">            &#125; <span class="built_in">catch</span> (<span class="type">const</span> std::exception &amp;e) &#123;</span><br><span class="line">                <span class="built_in">LOGE</span>(TAG, <span class="string">&quot;findCpuFreqMap, error occurred on parse frequency: %s.&quot;</span>, e.<span class="built_in">what</span>());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">closedir</span>(dir);</span><br><span class="line">    <span class="keyword">return</span> freqCPUMap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ä¸Šä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å–åˆ°æŒ‡å®šçº§åˆ«çš„ CPU åˆ—è¡¨ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * è·å–å¤§ä¸­å°æ ¸CPUåˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param level CPUç­‰çº§ï¼Œ0ä¸ºå¤§æ ¸ï¼Œ1ä¸ºä¸­æ ¸ï¼Œ2ä¸ºå°æ ¸ã€‚</span></span><br><span class="line"><span class="comment">  * @param upward CPUåºå·æ˜¯å¦å‘ä¸Šå…¼å®¹ï¼Œä¾‹å¦‚å¦‚æœ2æ‰¾ä¸åˆ°åˆ™å‘ä¸Šæ‰¾1æˆ–è€…0ã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @return è¿”å›énullçš„CPUåˆ—è¡¨ï¼Œä¾‹å¦‚ï¼š[&quot;cpu0&quot;, &quot;cpu1&quot;]ã€‚</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function">std::vector&lt;std::string&gt; <span class="title">CPUUtils::findCPUListByLevel</span><span class="params">(<span class="type">const</span> <span class="type">int</span> level, <span class="type">const</span> <span class="type">bool</span> upward)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è·å–CPUé¢‘ç‡åˆ†ç»„</span></span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> findCPUFreqMap = CPUUtils::<span class="built_in">findCPUFreqMap</span>();</span><br><span class="line">    <span class="keyword">if</span> (findCPUFreqMap.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠstd::mapçš„keyï¼ˆé¢‘ç‡ï¼‰æŒ‰ç…§å‡åºå­˜åˆ°std::vector</span></span><br><span class="line">    std::vector&lt;<span class="type">int</span>&gt; freqList;</span><br><span class="line">    freqList.<span class="built_in">reserve</span>(findCPUFreqMap.<span class="built_in">size</span>());</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span> &amp;pair: findCPUFreqMap) &#123;</span><br><span class="line">        freqList.<span class="built_in">push_back</span>(pair.first);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæŒ‡å®šçº§åˆ«ä¸å­˜åœ¨ï¼Œè€ƒè™‘æ˜¯å¦å‘ä¸Šå…¼å®¹</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> size = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(freqList.<span class="built_in">size</span>());</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> freqIndex = size &gt; level ? level : (upward ? (size - <span class="number">1</span>) : <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‹¥æŒ‡å®šçº§åˆ«å­˜åœ¨ï¼Œåˆ™è¿”å›é¢‘ç‡å¯¹åº”çš„CPUåˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">if</span> (freqIndex &gt; <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> freq = freqList[freqIndex];</span><br><span class="line">        <span class="keyword">auto</span> it = findCPUFreqMap.<span class="built_in">find</span>(freq);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (it != findCPUFreqMap.<span class="built_in">end</span>()) &#123;</span><br><span class="line">            <span class="keyword">return</span> it-&gt;second;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3ã€RenderThread"><a href="#3ã€RenderThread" class="headerlink" title="3ã€RenderThread"></a>3ã€RenderThread</h2><h3 id="3-1ã€è®¤è¯†-RenderThread"><a href="#3-1ã€è®¤è¯†-RenderThread" class="headerlink" title="3.1ã€è®¤è¯† RenderThread"></a>3.1ã€è®¤è¯† RenderThread</h3><p>RenderThread æ˜¯ Android ç³»ç»Ÿä¸­ä¸€ä¸ªä¸“é—¨ç”¨äºå¤„ç† View æ¸²æŸ“å·¥ä½œçš„çº¿ç¨‹ï¼Œå®ƒçš„å¼•å…¥ä¸»è¦æ˜¯ä¸ºäº†ä¼˜åŒ–æ¸²æŸ“æ•ˆç‡å’Œæå‡ç”¨æˆ·ä½“éªŒã€‚åœ¨ Android 5.0ï¼ˆLollipopï¼‰ä¹‹å‰ï¼ŒAndroid åº”ç”¨ç¨‹åºçš„ main çº¿ç¨‹åŒæ—¶è´Ÿè´£å¤„ç† UI ç»˜åˆ¶å’Œ Open GL æ¸²æŸ“ç­‰ä»»åŠ¡ã€‚è¿™å¯èƒ½å¯¼è‡´ main çº¿ç¨‹åœ¨æ¸²æŸ“å¤æ‚ UI æ—¶å‡ºç°é˜»å¡ï¼Œå½±å“åº”ç”¨ç¨‹åºçš„æµç•…æ€§ã€‚ä» Android 5.0 å¼€å§‹ï¼ŒAndroid ç³»ç»Ÿå¼•å…¥äº† RenderThreadï¼Œå°† UI æ¸²æŸ“ä»»åŠ¡ä»ä¸»çº¿ç¨‹ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»è€Œæé«˜äº†æ¸²æŸ“æ•ˆç‡å’Œæµç•…åº¦ã€‚</p><br/>RenderThread ä¸»è¦åŠŸèƒ½ï¼š<ul><li>RenderThread è´Ÿè´£å¤„ç† View çš„æ¸²æŸ“å·¥ä½œï¼ŒåŒ…æ‹¬ç»˜åˆ¶ã€åˆæˆå’Œæ˜¾ç¤ºç­‰æ“ä½œã€‚</li><li>å®ƒä½¿ç”¨åŒç¼“å†²æœºåˆ¶è¿›è¡Œæ¸²æŸ“ï¼Œèƒ½å¤Ÿå‡å°‘å±å¹•é—ªçƒå’Œå¡é¡¿ç°è±¡ã€‚</li><li>RenderThread è¿˜å¯ä»¥æå‰å¯¹ View è¿›è¡Œé¢„æ¸²æŸ“ï¼Œå‡å°‘æ¸²æŸ“ä»»åŠ¡çš„å»¶è¿Ÿã€‚</li></ul><br/>RenderThread å·¥ä½œåŸç†ï¼š<ul><li>å½“åº”ç”¨ç¨‹åºéœ€è¦æ¸²æŸ“ UI æ—¶ï¼Œä¸»çº¿ç¨‹ä¼šåˆ›å»ºä¸€ä¸ªæ¸²æŸ“ä»»åŠ¡å¹¶æäº¤ç»™ RenderThreadã€‚</li><li>RenderThread åœ¨ç‹¬ç«‹çš„çº¿ç¨‹ä¸­æ‰§è¡Œæ¸²æŸ“ä»»åŠ¡ï¼Œå¹¶ä½¿ç”¨ GPU è¿›è¡Œç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ã€‚</li><li>æ¸²æŸ“å®Œæˆåï¼ŒRenderThread å°†æ¸²æŸ“ç»“æœæäº¤ç»™ SurfaceFlinger è¿›ç¨‹è¿›è¡Œåˆæˆå’Œæ˜¾ç¤ºã€‚</li></ul><br/>RenderThread ä¸ main çº¿ç¨‹çš„åŒºåˆ«<ul><li>èŒè´£ä¸åŒï¼šmain çº¿ç¨‹æ˜¯ Android åº”ç”¨ç¨‹åºçš„ä¸»å…¥å£ç‚¹ï¼Œè´Ÿè´£å¤„ç†ç”¨æˆ·è¾“å…¥ã€äº‹ä»¶åˆ†å‘å’Œ UI æ›´æ–°ç­‰ä»»åŠ¡ã€‚å®ƒæ˜¯åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒçº¿ç¨‹ï¼Œè´Ÿè´£æ‰§è¡Œåº”ç”¨ç¨‹åºçš„ä¸»è¦é€»è¾‘ã€‚RenderThread åˆ™ä¸“æ³¨äºå¤„ç† View çš„æ¸²æŸ“å·¥ä½œï¼Œå‡è½»ä¸»çº¿ç¨‹çš„è´Ÿæ‹…ï¼Œæé«˜æ¸²æŸ“æ•ˆç‡å’Œæµç•…åº¦ã€‚</li><li>å¹¶è¡Œå¤„ç†ï¼šmain çº¿ç¨‹é€šå¸¸æ˜¯é¡ºåºæ‰§è¡Œä»»åŠ¡çš„ï¼Œè€Œ RenderThread å¯ä»¥å¹¶è¡Œå¤„ç†å¤šä¸ª View çš„æ¸²æŸ“ä»»åŠ¡ã€‚è¿™æ„å‘³ç€å³ä½¿æŸä¸ª View çš„æ¸²æŸ“ä»»åŠ¡æ¯”è¾ƒå¤æ‚æˆ–è€—æ—¶è¾ƒé•¿ï¼Œä¹Ÿä¸ä¼šé˜»å¡å…¶ä»– View çš„æ¸²æŸ“æˆ–ä¸»çº¿ç¨‹çš„æ‰§è¡Œã€‚</li><li>ç¡¬ä»¶åŠ é€Ÿï¼šRenderThread åˆ©ç”¨ GPU è¿›è¡Œç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ï¼Œèƒ½å¤Ÿæ˜¾è‘—æé«˜æ¸²æŸ“é€Ÿåº¦å’Œæ•ˆç‡ã€‚è€Œ main çº¿ç¨‹åˆ™ä¸ç›´æ¥å‚ä¸ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“è¿‡ç¨‹ã€‚</li><li>äº¤äº’æ–¹å¼ï¼šmain çº¿ç¨‹ä¸ RenderThread ä¹‹é—´é€šè¿‡ç‰¹å®šçš„æ¥å£å’Œæœºåˆ¶è¿›è¡Œäº¤äº’ã€‚ä¾‹å¦‚ï¼Œä¸»çº¿ç¨‹å¯ä»¥é€šè¿‡æäº¤æ¸²æŸ“ä»»åŠ¡ç»™ RenderThread æ¥è§¦å‘æ¸²æŸ“æ“ä½œï¼Œè€Œ RenderThread åˆ™å¯ä»¥é€šè¿‡å›è°ƒç­‰æ–¹å¼å°†æ¸²æŸ“ç»“æœé€šçŸ¥ç»™ä¸»çº¿ç¨‹ã€‚</li></ul><h3 id="3-2ã€RenderThread-é»˜è®¤æœªç»‘å®š-CPU"><a href="#3-2ã€RenderThread-é»˜è®¤æœªç»‘å®š-CPU" class="headerlink" title="3.2ã€RenderThread é»˜è®¤æœªç»‘å®š CPU"></a>3.2ã€RenderThread é»˜è®¤æœªç»‘å®š CPU</h3><p>å›åˆ°ä¸»é¢˜ï¼Œæˆ‘ä»¬æ¥è§‚å¯Ÿ RenderThread è¿è¡Œåœ¨å“ªä¸ª CPU ä¸Šï¼Œæ‰¾åˆ°åº”ç”¨çš„ RenderThreadï¼Œå¹¶åœ¨ RenderThread status æ¨ªè½´æ‰¾åˆ°ç›¸å¯¹æ¯”è¾ƒç¹å¿™çš„é˜¶æ®µï¼Œé€‰ä¸­ Running é˜¶æ®µï¼Œå¦‚å›¾ä¸‰æ‰€ç¤ºå®ƒè¿è¡Œåœ¨<code>CPU 0</code>ï¼Œä¹Ÿå°±æ˜¯å°æ ¸ CPUï¼š</p><center><img   width="90%"   src="2.png"  ><br/>ï¼ˆå›¾äºŒï¼‰</center><p>å¶å°”åˆè¿è¡Œåœ¨ä¸­æ ¸ CPU æˆ–å¤§æ ¸ CPUï¼Œå¦‚å›¾ä¸‰æ‰€ç¤ºï¼Œè¿è¡Œåœ¨å¤§æ ¸ CPUï¼š</p><center><img   width="90%"   src="3.png"  ><br/>ï¼ˆå›¾ä¸‰ï¼‰</center><p>è¿™å°±æ˜¯æœ¬æ–‡é¢˜ç›®çš„åŸå› ï¼Œå¦‚æœ RenderThread ä¸€ç›´è¿è¡Œå¤§æ ¸ CPU ç»„ï¼Œé‚£ä¹ˆæ¸²æŸ“æ€§èƒ½ä¼šä¸å¥½å¥½ä¸€ç‚¹ï¼Ÿ</p><h2 id="4ã€è·å–ä»»æ„çº¿ç¨‹-tid"><a href="#4ã€è·å–ä»»æ„çº¿ç¨‹-tid" class="headerlink" title="4ã€è·å–ä»»æ„çº¿ç¨‹ tid"></a>4ã€è·å–ä»»æ„çº¿ç¨‹ tid</h2><p>å¯¹äºæœ¬æ–‡çš„åœºæ™¯æ¥è¯´ï¼Œçº¿ç¨‹æœ‰ä¸¤ç±»ï¼Œâ€œæˆ‘â€çš„çº¿ç¨‹æ˜¯å¯ä»¥æ‹¿åˆ°çº¿ç¨‹å®ä¾‹çš„ï¼Œâ€œä»–â€çš„çº¿ç¨‹æ— æ³•æ‹¿åˆ°çº¿ç¨‹å®ä¾‹ã€‚</p><p>å¯ä»¥è·å–åˆ°å®ä¾‹çš„ï¼š</p><ol><li>å½“å‰çº¿ç¨‹ï¼Œå¯ä»¥æ‹¿åˆ°å®ä¾‹ï¼Œæ— è®º C++ è¿˜æ˜¯ Javaã€‚</li><li>ç”±â€œæˆ‘â€åˆ›å»ºçš„çº¿ç¨‹ï¼Œå¯ä»¥æ‹¿åˆ°å®ä¾‹ï¼Œæ— è®º C++ è¿˜æ˜¯ Javaã€‚</li></ol><p>æ— æ³•è·å–åˆ°å®ä¾‹çš„ï¼š</p><ol><li>æ¯”å¦‚ main çº¿ç¨‹ã€RenderThread çº¿ç¨‹ã€‚</li></ol><h3 id="4-1ã€è·å–å½“å‰çº¿ç¨‹-tid"><a href="#4-1ã€è·å–å½“å‰çº¿ç¨‹-tid" class="headerlink" title="4.1ã€è·å–å½“å‰çº¿ç¨‹ tid"></a>4.1ã€è·å–å½“å‰çº¿ç¨‹ tid</h3><p>åœ¨ C++ ä¸­ï¼Œè·å–å½“å‰çº¿ç¨‹çš„ tidï¼ˆåŒ…æ‹¬ C++ çš„çº¿ç¨‹æˆ–è€… Java çš„çº¿ç¨‹ï¼‰ï¼Œæˆ–è€…ç”±â€œæˆ‘â€åˆ›å»º&#x2F;å¯åŠ¨çš„çº¿ç¨‹æ˜¯å¯ä»¥ç›´æ¥æ‹¿åˆ° tid çš„ã€‚</p><p>è·å–å½“å‰çº¿ç¨‹çš„ tidï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ThreadUtils::bindThreadToCPU</span><span class="params">(<span class="type">const</span> <span class="type">int</span> cpuNumber)</span> </span>&#123;</span><br><span class="line">    <span class="type">pid_t</span> tid = <span class="built_in">gettid</span>();</span><br><span class="line"></span><br><span class="line">    ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·å–â€œæˆ‘â€åˆ›å»ºçš„çº¿ç¨‹çš„ tidï¼Œä½¿ç”¨<code>pthread_gettid_np</code>å‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span>* <span class="title">thread_function</span><span class="params">(<span class="type">void</span>* arg)</span> </span>&#123;</span><br><span class="line">    ...;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">startWork</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">pthread_t</span> thread;</span><br><span class="line">    <span class="type">int</span> result = <span class="built_in">pthread_create</span>(&amp;thread, <span class="literal">nullptr</span>, thread_function, <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">if</span> (result != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">LOGI</span>(TAG, <span class="string">&quot;pthread_create failed: %d&quot;</span>, result);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">pid_t</span> tid = <span class="built_in">pthread_gettid_np</span>(thread);</span><br><span class="line">    <span class="built_in">LOGI</span>(TAG, <span class="string">&quot;Created thread tid: %d&quot;</span>, tid);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">pthread_join</span>(thread, <span class="literal">nullptr</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-2ã€è·å–å…¶ä»–çº¿ç¨‹çš„-tid"><a href="#4-2ã€è·å–å…¶ä»–çº¿ç¨‹çš„-tid" class="headerlink" title="4.2ã€è·å–å…¶ä»–çº¿ç¨‹çš„ tid"></a>4.2ã€è·å–å…¶ä»–çº¿ç¨‹çš„ tid</h3><p>å½“åº”ç”¨å¯åŠ¨åï¼Œè¯¥åº”ç”¨çš„æ‰€æœ‰çº¿ç¨‹ä¿¡æ¯éƒ½ä½äº<code>/proc/$&#123;process_id&#125;/task</code>ä¸‹ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€</span><br><span class="line">â”œâ”€â”€ thread_id1</span><br><span class="line">â”‚Â Â  â””â”€â”€ status</span><br><span class="line">â”œâ”€â”€ thread_id2</span><br><span class="line">â”‚Â Â  â””â”€â”€ status</span><br><span class="line">â”œâ”€â”€ thread_id3</span><br><span class="line">â”‚Â Â  â””â”€â”€ status</span><br><span class="line">â”œâ”€â”€ thread_id4</span><br><span class="line">â”‚Â Â  â””â”€â”€ status</span><br><span class="line">â””â”€â”€ thread_id5</span><br><span class="line">    â””â”€â”€ status</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥å…ˆåœ¨ç”µè„‘ä¸Šåšä¸€ä¸‹éªŒè¯ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æŸ¥çœ‹ç›®æ ‡åº”ç”¨çš„è¿›ç¨‹ idï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Harry: ~ adb shell ps | grep com.yanzhenjie.android</span><br><span class="line">u0_a130        3303    300 14463340 160012 0                  0 S com.yanzhenjie.android</span><br></pre></td></tr></table></figure><p>ç„¶åè¿›å…¥è¯¥ç›®å½•ï¼ŒæŸ¥çœ‹çº¿ç¨‹åˆ—è¡¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hw_arm64:/ cd /proc/3303/task</span><br><span class="line">hw_arm64:/proc/3303/task ls</span><br><span class="line">3303  3313  3314  3315  3316  3317  3318  3319  3320  3321  3322  3323  3324  3325  3333  3374  3375  3378  3465</span><br></pre></td></tr></table></figure><p>æ‰“å°æŸä¸ªçº¿ç¨‹çš„ä¿¡æ¯ï¼ˆä¸ºæ–¹ä¾¿ç†è§£å»æ‰äº†çœŸå®ä¿¡æ¯ï¼Œä»…ä¿ç•™ç»“æ„å’Œæè¿°ï¼‰ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">hw_arm64:/proc/3303/task cat ./3303/status</span><br><span class="line"></span><br><span class="line">Name:       &lt;çº¿ç¨‹å&gt;</span><br><span class="line">State:      &lt;çŠ¶æ€&gt; (&lt;çŠ¶æ€è§£é‡Š&gt;)</span><br><span class="line">Tgid:       &lt;çº¿ç¨‹ç»„ID&gt;</span><br><span class="line">Ngid:       &lt;çº¿ç¨‹ç»„ID&gt;</span><br><span class="line">Pid:        &lt;çº¿ç¨‹ID&gt;</span><br><span class="line">PPid:       &lt;çˆ¶çº¿ç¨‹ID&gt;</span><br><span class="line">TracerPid:  &lt;è·Ÿè¸ªè¿›ç¨‹ID&gt;</span><br><span class="line">Uid:        &lt;ç”¨æˆ·ID&gt; &lt;æœ‰æ•ˆç”¨æˆ·ID&gt; &lt;çœŸå®ç”¨æˆ·ID&gt; &lt;å·²ä¿å­˜ç”¨æˆ·ID&gt;</span><br><span class="line">Gid:        &lt;ç»„ID&gt; &lt;æœ‰æ•ˆç»„ID&gt; &lt;çœŸå®ç»„ID&gt; &lt;å·²ä¿å­˜ç»„ID&gt;</span><br><span class="line">FDSize:     &lt;æ–‡ä»¶æè¿°ç¬¦è¡¨å¤§å°&gt;</span><br><span class="line">Groups:     &lt;æ‰€å±ç»„IDåˆ—è¡¨&gt;</span><br><span class="line">NStgid:     &lt;å‘½åç©ºé—´çº¿ç¨‹ç»„ID&gt;</span><br><span class="line">NSpid:      &lt;å‘½åç©ºé—´çº¿ç¨‹ID&gt;</span><br><span class="line">NSpgid:     &lt;å‘½åç©ºé—´è¿›ç¨‹ç»„ID&gt;</span><br><span class="line">NSsid:      &lt;å‘½åç©ºé—´ä¼šè¯ID&gt;</span><br><span class="line">VmPeak:     &lt;è™šæ‹Ÿå†…å­˜å³°å€¼&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¸»è¦å…³æ³¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Name:   RenderThread</span><br><span class="line">Pid:    3314</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤æˆ‘ä»¬å°±å¯ä»¥è·å–åˆ°æŒ‡å®šåç§°çº¿ç¨‹çš„ tid äº†ï¼Œè¿™é‡Œçš„ pid å°±æ˜¯å†…æ ¸ tidï¼Œå’Œ<code>/proc/3303/task</code>ç›®å½•ä¸‹çš„å­ç›®å½•åç§°ä¸€è‡´ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä»¥çº¿ç¨‹åç§°å»å¯¹åº”æ–‡ä»¶å’Œ Name åšåŒ¹é…ï¼Œå¦‚æœåŒ¹é…åˆ°ä»£è¡¨ä¸Šçº§ç›®å½•åç§°æˆ–è€… Pid å°±æ˜¯å†…æ ¸ tidï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ ¹æ®çº¿ç¨‹åç§°è·å–çº¿ç¨‹idã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param threadName ç›®æ ‡çº¿ç¨‹åç§°ã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @return æ²¡æ‰¾åˆ°è¿”å›-1ï¼Œæ‰¾åˆ°è¿”å›çº¿ç¨‹idã€‚</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ThreadUtils::findThreadId</span><span class="params">(<span class="type">const</span> std::string &amp;threadName)</span> </span>&#123;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> pid = <span class="built_in">getpid</span>();</span><br><span class="line">    <span class="type">const</span> std::string taskDirPath = <span class="string">&quot;/proc/&quot;</span> + std::<span class="built_in">to_string</span>(pid) + <span class="string">&quot;/task&quot;</span>;</span><br><span class="line">    <span class="built_in">LOGD</span>(TAG, <span class="string">&quot;findThreadId on path: %s&quot;</span>, taskDirPath.<span class="built_in">c_str</span>());</span><br><span class="line"></span><br><span class="line">    DIR *dir = <span class="built_in">opendir</span>(taskDirPath.<span class="built_in">c_str</span>());</span><br><span class="line">    <span class="keyword">if</span> (dir == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(TAG, <span class="string">&quot;findThreadId, dir [%s] can be not found.&quot;</span>, taskDirPath.<span class="built_in">c_str</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éå†çº¿ç¨‹ç›®å½•åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">dirent</span> *entry;</span><br><span class="line">    <span class="keyword">while</span> ((entry = <span class="built_in">readdir</span>(dir)) != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        std::string threadId = entry-&gt;d_name;</span><br><span class="line">        <span class="keyword">if</span> (threadId == <span class="string">&quot;.&quot;</span> || threadId == <span class="string">&quot;..&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        std::string statusFilePath = taskDirPath;</span><br><span class="line">        statusFilePath.<span class="built_in">append</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        statusFilePath.<span class="built_in">append</span>(threadId);</span><br><span class="line">        statusFilePath.<span class="built_in">append</span>(<span class="string">&quot;/status&quot;</span>);</span><br><span class="line">        <span class="function">std::ifstream <span class="title">statusFile</span><span class="params">(statusFilePath)</span></span>;</span><br><span class="line">        <span class="keyword">if</span> (statusFile) &#123;</span><br><span class="line">            std::string line;</span><br><span class="line">            <span class="comment">// éå†statusæ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œï¼Œæ‰¾åˆ°Nameè¡Œï¼Œå¹¶å¯¹æ¯”åç§°æ˜¯å¦å’ŒæŒ‡å®šç›¸åŒ</span></span><br><span class="line">            <span class="keyword">while</span> (std::<span class="built_in">getline</span>(statusFile, line)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (line.<span class="built_in">find</span>(<span class="string">&quot;Name&quot;</span>) != std::string::npos) &#123;</span><br><span class="line">                    <span class="type">size_t</span> found = line.<span class="built_in">find</span>(<span class="string">&#x27;:&#x27;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (found != std::string::npos) &#123;</span><br><span class="line">                        std::string name = Utils::<span class="built_in">trim</span>(line.<span class="built_in">substr</span>(found + <span class="number">1</span>));</span><br><span class="line">                        <span class="keyword">if</span> (threadName == name) &#123;</span><br><span class="line">                            <span class="built_in">closedir</span>(dir);</span><br><span class="line">                            <span class="built_in">LOGI</span>(TAG,</span><br><span class="line">                                 <span class="string">&quot;findThreadId, id of [%s] has been found: %s.&quot;</span>,</span><br><span class="line">                                 threadName.<span class="built_in">c_str</span>(),</span><br><span class="line">                                 threadId.<span class="built_in">c_str</span>()</span><br><span class="line">                            );</span><br><span class="line">                            <span class="comment">// æ‰¾åˆ°ç›®æ ‡çº¿ç¨‹ï¼Œè¿”å›ç›®æ ‡çº¿ç¨‹tid</span></span><br><span class="line">                            <span class="keyword">return</span> std::<span class="built_in">stoi</span>(threadId);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">closedir</span>(dir);</span><br><span class="line">    <span class="built_in">LOGE</span>(TAG, <span class="string">&quot;findThreadId, id of [%s] can be not found.&quot;</span>, threadName.<span class="built_in">c_str</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Utils.cpp</span></span><br><span class="line"><span class="function">std::string <span class="title">Utils::trim</span><span class="params">(<span class="type">const</span> std::string &amp;str)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> start = str.<span class="built_in">find_first_not_of</span>(<span class="string">&quot; \t&quot;</span>);</span><br><span class="line">    <span class="keyword">auto</span> end = str.<span class="built_in">find_last_not_of</span>(<span class="string">&quot; \t&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (start == std::string::npos) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> str.<span class="built_in">substr</span>(start, end - start + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5ã€è®¾å®šçº¿ç¨‹-CPU-äº²å’Œæ€§"><a href="#5ã€è®¾å®šçº¿ç¨‹-CPU-äº²å’Œæ€§" class="headerlink" title="5ã€è®¾å®šçº¿ç¨‹ CPU äº²å’Œæ€§"></a>5ã€è®¾å®šçº¿ç¨‹ CPU äº²å’Œæ€§</h2><p>å†å›é¡¾ä¸‹<code>sched_setaffinity</code>å‡½æ•°ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">sched_setaffinity</span><span class="params">(<span class="type">pid_t</span> pid, <span class="type">size_t</span> cpusetsize, <span class="type">const</span> <span class="type">cpu_set_t</span> *mask)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°ï¼š<ul><li>pidï¼šè¦è®¾ç½®äº²å’Œæ€§çš„è¿›ç¨‹çš„ PIDã€‚<font color="red">æˆ‘ä»¬å¯ä»¥ç”¨çº¿ç¨‹ tid ï¼ˆå†…æ ¸çº§çº¿ç¨‹ IDï¼‰æ¥è®¾ç½®çº¿ç¨‹å’Œ CPU çš„äº²å’Œæ€§ã€‚</font></li><li>cpusetsizeï¼šcpu_set_t ç±»å‹çš„å¤§å°ã€‚</li><li>maskï¼šæŒ‡å‘ä¸€ä¸ª cpu_set_t çš„æŒ‡é’ˆï¼Œè¡¨ç¤ºè¿›ç¨‹å¯ä»¥è¿è¡Œåœ¨å“ªäº› CPU ä¸Šã€‚</li></ul></li></ul><p>æ‰€ä»¥å¯¹<code>sched_setaffinity</code>çš„å°è£…æä¾› 2 ä¸ªå‚æ•°ï¼Œ1 ä¸ªæ˜¯çº¿ç¨‹ï¼Œå¦ä¸€ä¸ªæ˜¯ CPU åºå·ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ç»‘å®šå½“å‰çº¿ç¨‹åˆ°æŒ‡å®šçº§åˆ«çš„CPUä¸Šã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param cpuNumber CPUåºå·ã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @return ç»‘å®šæˆåŠŸè¿”å›0ï¼Œå¦åˆ™è¿”å›-1ã€‚</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ThreadUtils::bindThreadToCPU</span><span class="params">(<span class="type">const</span> <span class="type">int</span> cpuNumber)</span> </span>&#123;</span><br><span class="line">    <span class="type">pid_t</span> tid = <span class="built_in">gettid</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> bind = ThreadUtils::<span class="built_in">bindThreadToCPU</span>(tid, cpuNumber);</span><br><span class="line">    <span class="keyword">return</span> bind;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ç»‘å®šæŒ‡å®šçº¿ç¨‹åˆ°æŒ‡å®šçº§åˆ«çš„CPUä¸Šã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param threadId çº¿ç¨‹idã€‚</span></span><br><span class="line"><span class="comment">  * @param cpuNumber CPUåºå·ã€‚</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @return ç»‘å®šæˆåŠŸè¿”å›0ï¼Œå¦åˆ™è¿”å›-1ã€‚</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ThreadUtils::bindThreadToCPU</span><span class="params">(<span class="type">const</span> <span class="type">int</span> threadId, <span class="type">const</span> <span class="type">int</span> cpuNumber)</span> </span>&#123;</span><br><span class="line">    <span class="type">cpu_set_t</span> mask;</span><br><span class="line">    <span class="built_in">CPU_ZERO</span>(&amp;mask);</span><br><span class="line">    <span class="built_in">CPU_SET</span>(cpuNumber, &amp;mask);</span><br><span class="line">    <span class="type">long</span> max_cpus = <span class="built_in">sysconf</span>(_SC_NPROCESSORS_CONF);</span><br><span class="line">    <span class="keyword">if</span> (cpuNumber &lt; <span class="number">0</span> || cpuNumber &gt;= max_cpus) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(TAG, <span class="string">&quot;bindThreadToCPU, cpu %d is invalid.&quot;</span>, cpuNumber);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> bind = <span class="built_in">sched_setaffinity</span>(threadId, <span class="built_in">sizeof</span>(mask), &amp;mask);</span><br><span class="line">    <span class="keyword">if</span> (bind == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">LOGI</span>(TAG, <span class="string">&quot;bindThreadToCPU, %d, success.&quot;</span>, threadId);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(TAG, <span class="string">&quot;bindThreadToCPU, %d, error: %d, %s&quot;</span>, bind, errno, <span class="built_in">strerror</span>(errno));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bind;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œæ‰€æœ‰å…³é”®çš„éš¾ç‚¹å’Œä»£ç éƒ½ç»™å‡ºäº†ï¼Œå‰©ä¸‹çš„è‡ªå·±éšä¾¿å°è£…å³å¯ï¼Œä¸ºäº†å®Œæ•´æ€§ï¼Œæˆ‘è¿˜æ˜¯ç»™å‡ºæ‰€æœ‰çš„ä»£ç ã€‚</p><h2 id="6ã€JNI-å‘-Java-æä¾›æ¥å£"><a href="#6ã€JNI-å‘-Java-æä¾›æ¥å£" class="headerlink" title="6ã€JNI å‘ Java æä¾›æ¥å£"></a>6ã€JNI å‘ Java æä¾›æ¥å£</h2><p>è®¾å®šå½“å‰çº¿ç¨‹åˆ°æŒ‡å®šçº§åˆ« CPU äº²å’Œæ€§çš„æ¥å£ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ç»‘å®šå½“å‰çº¿ç¨‹åˆ°æŒ‡å®šçº§åˆ«çš„CPUä¸Šã€‚</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* @param env</span></span><br><span class="line"><span class="comment">* @param clazz</span></span><br><span class="line"><span class="comment">* @param cpuLevel CPUçº§åˆ«ï¼Œ0ä¸ºå¤§æ ¸ï¼Œ1ä¸ºä¸­æ ¸ï¼Œ2ä¸ºå°æ ¸ã€‚</span></span><br><span class="line"><span class="comment">* @param upward CPUåºå·æ˜¯å¦å‘ä¸Šå…¼å®¹ï¼Œä¾‹å¦‚å¦‚æœ2æ‰¾ä¸åˆ°åˆ™å‘ä¸Šæ‰¾1æˆ–è€…0ã€‚</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* @return ç»‘å®šæˆåŠŸè¿”å›0ï¼Œå¦åˆ™è¿”å›-1ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">JNIEXPORT jint JNICALL <span class="title">Java_com_yanzhenjie_android_Harry_bindCurrentThreadToCPU</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    JNIEnv *env, jclass clazz, jint cpuLevel, jboolean upward)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–æŒ‡å®šçº§åˆ«çš„CPUåˆ—è¡¨</span></span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> cpuList = CPUUtils::<span class="built_in">findCPUListByLevel</span>(cpuLevel, upward);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!cpuList.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> cpuSize = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(cpuList.<span class="built_in">size</span>());</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> cpuIndex = Utils::<span class="built_in">randomInt</span>(<span class="number">0</span>, cpuSize - <span class="number">1</span>);</span><br><span class="line">        <span class="type">const</span> <span class="keyword">auto</span> &amp;cpu = cpuList[cpuIndex];</span><br><span class="line">        <span class="comment">// å»æ‰å‰é¢CPUï¼Œåªè·å–num</span></span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> cpuNum = std::<span class="built_in">stoi</span>(cpu.<span class="built_in">substr</span>(<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾å®šCPUäº²å’Œæ€§</span></span><br><span class="line">        <span class="type">int</span> bound = ThreadUtils::<span class="built_in">bindThreadToCPU</span>(cpuNum);</span><br><span class="line">        Log::<span class="built_in">i</span>(env, TAG,</span><br><span class="line">               <span class="string">&quot;bindCurrentThreadToCPU, level-%s cpu %s: %s&quot;</span>,</span><br><span class="line">               &#123;std::<span class="built_in">to_string</span>(cpuLevel), std::<span class="built_in">to_string</span>(cpuNum), std::<span class="built_in">to_string</span>(bound)&#125;</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">return</span> bound;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¾å®šæŒ‡å®šåç§°çš„çº¿ç¨‹åˆ°æŒ‡å®šçº§åˆ« CPU äº²å’Œæ€§çš„æ¥å£ï¼Œæ¯”å¦‚ç”¨äº RenderThreadï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»‘å®šæŒ‡å®šçº¿ç¨‹åˆ°æŒ‡å®šçº§åˆ«çš„CPUä¸Šã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param env</span></span><br><span class="line"><span class="comment"> * @param clazz</span></span><br><span class="line"><span class="comment"> * @param threadName çº¿ç¨‹åã€‚</span></span><br><span class="line"><span class="comment"> * @param cpuLevel CPUçº§åˆ«ï¼Œ0ä¸ºå¤§æ ¸ï¼Œ1ä¸ºä¸­æ ¸ï¼Œ2ä¸ºå°æ ¸ã€‚</span></span><br><span class="line"><span class="comment"> * @param upward CPUåºå·æ˜¯å¦å‘ä¸Šå…¼å®¹ï¼Œä¾‹å¦‚å¦‚æœ2æ‰¾ä¸åˆ°åˆ™å‘ä¸Šæ‰¾1æˆ–è€…0ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @return ç»‘å®šæˆåŠŸè¿”å›0ï¼Œå¦åˆ™è¿”å›-1ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">JNIEXPORT jint JNICALL <span class="title">Java_com_yanzhenjie_android_Harry_bindThreadToCPU</span><span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">    JNIEnv *env, jclass clazz, jstring threadName, jint cpuLevel, jboolean upward)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *chars = env-&gt;<span class="built_in">GetStringUTFChars</span>(threadName, <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="function">std::string <span class="title">name</span><span class="params">(chars)</span></span>;</span><br><span class="line">    env-&gt;<span class="built_in">ReleaseStringUTFChars</span>(threadName, chars);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ ¹æ®ä¼ å…¥çº¿ç¨‹åç§°è·å–çº¿ç¨‹tid</span></span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> threadId = ThreadUtils::<span class="built_in">findThreadId</span>(name);</span><br><span class="line">    <span class="comment">// æ ¹æ®ä¼ å…¥CPUçº§åˆ«è·å–CPUåˆ—è¡¨</span></span><br><span class="line">    <span class="type">const</span> <span class="keyword">auto</span> cpuList = CPUUtils::<span class="built_in">findCPUListByLevel</span>(cpuLevel, upward);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (threadId &gt; <span class="number">-1</span> &amp;&amp; !cpuList.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> cpuSize = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(cpuList.<span class="built_in">size</span>());</span><br><span class="line">        <span class="comment">// ä»å¯¹åº”çº§åˆ«çš„CPUåˆ—è¡¨éšæœºé€‰ä¸€ä¸ªCPU</span></span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> cpuIndex = Utils::<span class="built_in">randomInt</span>(<span class="number">0</span>, cpuSize - <span class="number">1</span>);</span><br><span class="line">        <span class="type">const</span> <span class="keyword">auto</span> &amp;cpu = cpuList[cpuIndex];</span><br><span class="line">        <span class="comment">// å»æ‰å‰é¢CPUï¼Œåªè·å–num</span></span><br><span class="line">        <span class="type">const</span> <span class="type">int</span> cpuNum = std::<span class="built_in">stoi</span>(cpu.<span class="built_in">substr</span>(<span class="number">3</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è®¾å®šCPUäº²å’Œæ€§</span></span><br><span class="line">        <span class="type">int</span> bound = ThreadUtils::<span class="built_in">bindThreadToCPU</span>(threadId, cpuNum);</span><br><span class="line">        Log::<span class="built_in">i</span>(env, TAG,</span><br><span class="line">               <span class="string">&quot;bindThreadToCPU, bind [%s] to level-[%s] cpu %s : %s&quot;</span>,</span><br><span class="line">               &#123;name, std::<span class="built_in">to_string</span>(cpuLevel), std::<span class="built_in">to_string</span>(cpuNum), std::<span class="built_in">to_string</span>(bound)&#125;</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">return</span> bound;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Utils.cpp</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Utils::randomInt</span><span class="params">(<span class="type">const</span> <span class="type">int</span> min, <span class="type">const</span> <span class="type">int</span> max)</span> </span>&#123;</span><br><span class="line">    std::random_device rd;</span><br><span class="line">    <span class="function">std::mt19937 <span class="title">gen</span><span class="params">(rd())</span></span>;</span><br><span class="line"></span><br><span class="line">    std::uniform_int_distribution&lt;&gt; <span class="built_in">distr</span>(min, max);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> random_num = <span class="built_in">distr</span>(gen);</span><br><span class="line">    <span class="keyword">return</span> random_num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯ JNI æ¥å£å¯¹åº”çš„ Java æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»‘å®šå½“å‰çº¿ç¨‹åˆ°æŒ‡å®šçº§åˆ«çš„CPUä¸Šã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cpuLevel CPUçº§åˆ«ï¼Œ0ä¸ºå¤§æ ¸ï¼Œ1ä¸ºä¸­æ ¸ï¼Œ2ä¸ºå°æ ¸ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> upward CPUåºå·æ˜¯å¦å‘ä¸Šå…¼å®¹ï¼Œä¾‹å¦‚å¦‚æœ2æ‰¾ä¸åˆ°åˆ™å‘ä¸Šæ‰¾1æˆ–è€…0ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç»‘å®šæˆåŠŸè¿”å›0ï¼Œå¦åˆ™è¿”å›-1ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="type">int</span> <span class="title function_">bindCurrentThreadToCPU</span><span class="params">(<span class="type">int</span> cpuLevel, <span class="type">boolean</span> upward)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»‘å®šæŒ‡å®šçº¿ç¨‹åˆ°æŒ‡å®šçº§åˆ«çš„CPUä¸Šã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> threadName çº¿ç¨‹åã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> cpuLevel CPUçº§åˆ«ï¼Œ0ä¸ºå¤§æ ¸ï¼Œ1ä¸ºä¸­æ ¸ï¼Œ2ä¸ºå°æ ¸ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> upward CPUåºå·æ˜¯å¦å‘ä¸Šå…¼å®¹ï¼Œä¾‹å¦‚å¦‚æœ2æ‰¾ä¸åˆ°åˆ™å‘ä¸Šæ‰¾1æˆ–è€…0ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> ç»‘å®šæˆåŠŸè¿”å›0ï¼Œå¦åˆ™è¿”å›-1ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="type">int</span> <span class="title function_">bindThreadToCPU</span><span class="params">(String threadName, <span class="type">int</span> cpuLevel, <span class="type">boolean</span> upward)</span>;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ç»‘å®š RenderThread åˆ°ä¸­æ ¸ CPUï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">bound</span> <span class="operator">=</span> Harry.bindThreadToCPU(<span class="string">&quot;RenderThread&quot;</span>, <span class="number">1</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ç»‘å®šæŸä¸ªå·¥ä½œçº¿ç¨‹åˆ°ä¸­æ ¸ CPUï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Runnable</span> <span class="variable">runnable</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        Thread.currentThread().setName(<span class="string">&quot;PreloadXml&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">bound</span> <span class="operator">=</span> Harry.bindCurrentThreadToCPU(<span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">ThreadUtils.getWorkExecutor().execute(runnable);</span><br></pre></td></tr></table></figure><blockquote><p>è°ƒç”¨åè®°å¾—ä½¿ç”¨ Perfetto éªŒè¯æ˜¯å¦ç”Ÿæ•ˆï¼Œå¦å¤–è¦å¤šè€ƒè™‘ä¸€äº›è¾¹ç•Œæƒ…å†µï¼Œæ¯”å¦‚ä¸€ä¸ª 4 æ ¸ 4 çº¿ç¨‹çš„æ‰‹æœºï¼Œå¯èƒ½åªæœ‰ä¸€ä¸ªé¢‘ç‡ç»„ã€‚</p></blockquote><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬çš„ App å¯èƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æ± ä¼šä¸“é—¨è´Ÿè´£é¢„æ¸²æŸ“é¡µé¢ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä¾æ¬¡ç»‘å®šåˆ°ä¸­æ ¸ CPU ç»„çš„æ¯ä¸ª CPUï¼Œæå‡é¡µé¢æ¸²æŸ“æ•ˆç‡ã€‚</p><p>æœ¬æ–‡å®Œï¼Œæ„Ÿè°¢é˜…è¯»ï¼</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;å…¶å®æœ¬æ–‡é¢˜ç›®æ›´åˆé€‚å«åšã€ŠAndroid ç»‘å®šä»»æ„çº¿ç¨‹åˆ°ä»»æ„ CPUã€‹ï¼Œå…¶èŒƒå›´ä¹Ÿæ˜¯æ¶µç›–äº†é¢˜ç›®çš„ï¼Œä½†æ˜¯ä¸èƒ½ä½“ç°å…¶æœ€å¤§ä»·å€¼&lt;font color=&quot;red&quot;&gt;&lt;b&gt;æ€§èƒ½ä¼˜åŒ–&lt;/b&gt;&lt;/font&gt;ï¼Œå› æ­¤è¿˜æ˜¯ç¼©å°äº†æ¶µç›–èŒƒå›´ï¼Œä½†æ˜¯è¯»å®Œæœ¬æ–‡ä½ è¿˜æ˜¯å¯ä»¥åšåˆ° Android ç»‘å®šä»»æ„çº¿ç¨‹åˆ°ä»»æ„ CPU çš„ã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Android" scheme="https://www.yanzhenjie.com/categories/Android/"/>
    
    <category term="C++" scheme="https://www.yanzhenjie.com/categories/Android/C/"/>
    
    
    <category term="çº¿ç¨‹ä¼˜åŒ–" scheme="https://www.yanzhenjie.com/tags/%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%8C%96/"/>
    
    <category term="C++" scheme="https://www.yanzhenjie.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Android Perfetto Traceæ€§èƒ½åˆ†æ</title>
    <link href="https://www.yanzhenjie.com/post/20240406/adfefb3f3ee8/"/>
    <id>https://www.yanzhenjie.com/post/20240406/adfefb3f3ee8/</id>
    <published>2024-04-06T00:10:12.000Z</published>
    <updated>2024-12-21T14:31:38.667Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬äººç”¨ Perfetto å¿« 2 å¹´äº†ï¼Œå…¬å¸ä¸€äº›åŒäº‹å’Œç½‘å‹éƒ½æ¥å’¨è¯¢è¿‡ä½¿ç”¨å§¿åŠ¿ï¼Œæœ¬äººåªèƒ½æŠŠè‡ªå·±ä¸€ä¸ªç•¥æ˜¾ç²—ç³™ç‚¹çš„ç¬”è®°å‘ç»™åŒäº‹ï¼Œæœ‰ç‚¹ä¸å¤Ÿç»†èŠ‚å’Œä¸å¤Ÿæ·±åº¦ï¼Œäºæ˜¯è¶ç€æ¸…æ˜å‡æœŸï¼Œæˆ‘æŠŠç»éªŒæ€»ç»“æˆä¸€ç¯‡åšå®¢ï¼Œç»“åˆ Perfetto å®˜ç½‘èµ„æ–™å–é•¿è¡¥çŸ­å°½é‡åšåˆ°æ·±å…¥æµ…å‡ºã€‚</p><span id="more"></span><p>Perfetto æ”¯æŒå¤šä¸ªå¹³å°ï¼ŒåŒ…æ‹¬ Linuxã€Android å’Œ Chromeï¼Œå¹¶æä¾›äº†ç”¨äºè®°å½•ç³»ç»Ÿçº§å’Œåº”ç”¨çº§æ´»åŠ¨çš„æœåŠ¡å’Œåº“ã€ä½å¼€é”€çš„é’ˆå¯¹ Native å’Œ Java çš„å†…å­˜åˆ†æå·¥å…·ã€å¯ä¾› SQL åˆ†æè·Ÿè¸ªæ–‡ä»¶çš„ C++åº“å’Œ Python åº“ï¼ˆPython åŸºäº C++åº“ï¼‰ï¼Œä»¥åŠåŸºäº Web å¯è§†åŒ–æ–¹ä¾¿åˆ†æ Trace æ–‡ä»¶çš„ Perfetto UIã€‚</p><ul><li>å¿«é€Ÿå¼€å§‹ï¼ŒAndroid æŠ“ Traceï¼š<ul><li><a class="link"   href="https://perfetto.dev/docs/quickstart/android-tracing" >https://perfetto.dev/docs/quickstart/android-tracing<i class="fas fa-external-link-alt"></i></a></li></ul></li><li>å¯è§†åŒ–å·¥å…·ï¼ŒPerfetto UIï¼š<ul><li>åœ°å€ï¼š<a class="link"   href="https://ui.perfetto.dev/" >https://ui.perfetto.dev/<i class="fas fa-external-link-alt"></i></a></li><li>æ•™ç¨‹ï¼š<a class="link"   href="https://perfetto.dev/docs/visualization/perfetto-ui" >https://perfetto.dev/docs/visualization/perfetto-ui<i class="fas fa-external-link-alt"></i></a></li></ul></li><li>å¼€æºï¼š<ul><li>åœ°å€ï¼š<a class="link"   href="https://github.com/google/perfetto" >https://github.com/google/perfetto<i class="fas fa-external-link-alt"></i></a></li><li>è´¡çŒ®ï¼š<a class="link"   href="https://perfetto.dev/docs/contributing/getting-started" >https://perfetto.dev/docs/contributing/getting-started<i class="fas fa-external-link-alt"></i></a></li></ul></li></ul><p>èªæ˜çš„åŒå­¦ä»ä¸Šé¢çš„ä¿¡æ¯ä¸­å¯ä»¥äº†è§£åˆ°å¾ˆå¤šä¿¡æ¯äº†ï¼Œä¸‹é¢å’±ä»¬å°±å±•å¼€ç»†èŠ‚èŠä¸€èŠã€‚</p><h2 id="1ã€ç”Ÿæˆ-Perfetto-æŠ“-Trace-çš„é…ç½®"><a href="#1ã€ç”Ÿæˆ-Perfetto-æŠ“-Trace-çš„é…ç½®" class="headerlink" title="1ã€ç”Ÿæˆ Perfetto æŠ“ Trace çš„é…ç½®"></a>1ã€ç”Ÿæˆ Perfetto æŠ“ Trace çš„é…ç½®</h2><p>åš App æ€§èƒ½åˆ†æï¼Œä¸€èˆ¬å…³æ³¨è¿™å‡ ç±»ä¿¡æ¯ï¼š</p><ol><li>Memoryã€‚</li><li>CPUã€‚</li><li>GPUã€‚</li><li>Powerã€‚</li><li>ç³»ç»Ÿå±‚æ¶ˆè€—ã€‚</li></ol><p>æˆ‘ä»¬åœ¨æŠ“ Trace çš„æ—¶å€™å¯ä»¥æŒ‡å®šåº”ç”¨ã€å†…å­˜ã€CPUã€GPUã€ç”µæºå’Œç³»ç»Ÿäº‹ä»¶ç­‰ï¼Œä½¿ç”¨ Perfetto æ—¶å¯ä»¥ä½¿ç”¨ PerfettoUI æ¥ç”Ÿæˆé…ç½®ï¼š<a class="link"   href="https://ui.perfetto.dev/#!/record" >https://ui.perfetto.dev/#!&#x2F;record<i class="fas fa-external-link-alt"></i></a>ã€‚</p><p><strong>ç¬¬ä¸€æ­¥</strong>ï¼Œé€‰æ‹©ç›®æ ‡ Android è®¾å¤‡ç³»ç»Ÿç‰ˆæœ¬ã€‚æ‰“å¼€ Perfetto UIï¼Œé€‰æ‹©è¦æŠ“ Trace çš„ç›®æ ‡è®¾å¤‡ï¼Œæœ‰ 2 ç§æ–¹å¼ï¼Œå¦‚å›¾ä¸€æ‰€ç¤ºï¼š</p><ul><li>æ–¹å¼ä¸€ï¼Œé€‰æ‹©ç›®æ ‡ç³»ç»Ÿç‰ˆæœ¬ã€‚</li><li>æ–¹å¼äºŒï¼Œé€‰æ‹© ADB è¿æ¥çš„è®¾å¤‡ã€‚</li></ul><center><img   width="90%"   src="1.png"  ><br/>ï¼ˆå›¾ä¸€ï¼‰</center><p><strong>ç¬¬äºŒæ­¥</strong>ï¼Œè°ƒæ•´ Trace æ–‡ä»¶è®°å½•è®¾ç½®ã€‚ä¸»è¦æ˜¯ä¸ºäº†æ§åˆ¶ Trace æ–‡ä»¶å¤§å°æˆ–è€… Trace è®°å½•æ—¶é•¿ï¼Œå¦‚æœæ–‡ä»¶å¤ªå¤§åˆ™åŠ è½½ç¼“æ…¢æ“ä½œä¹Ÿä¸å¤ªé¡ºç•…ï¼Œå¦‚å›¾äºŒæ‰€ç¤ºï¼š</p><center><img   width="90%"   src="2.gif"  ><br/>ï¼ˆå›¾äºŒï¼‰</center><p><strong>ç¬¬ä¸‰æ­¥</strong>ï¼Œé…ç½®è¦åˆ†æçš„æ¢é’ˆä¿¡æ¯ã€‚</p><p>æ”¶é›† CPU ç›¸å…³ä¿¡æ¯ï¼Œéœ€è¦ç‚¹å‡»åœ¨ Probes ä¸‹çš„ CPUï¼Œç„¶åæ ¹æ®éœ€è¦æ‰“å¼€å¯¹åº”å¼€å…³å¹¶åšé…ç½®ï¼Œå¦‚å›¾ä¸‰æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="3.png"  ><br/>ï¼ˆå›¾ä¸‰ï¼‰</center><p>æ”¶é›† GPU ç›¸å…³ä¿¡æ¯ï¼Œéœ€è¦ç‚¹å‡»åœ¨ Probes ä¸‹çš„ GPUï¼Œç„¶åæ ¹æ®éœ€è¦æ‰“å¼€å¯¹åº”å¼€å…³ï¼Œå¦‚å›¾å››æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="4.png"  ><br/>ï¼ˆå›¾å››ï¼‰</center><p>æ”¶é›†ç”µæºä¿¡æ¯å’Œå†…å­˜ä¿¡æ¯åŒä¸Šï¼Œä¸å†èµ˜è¿°ã€‚</p><p>è¿™é‡Œéœ€è¦<font color="red"><b>å¼ºè°ƒæ”¶é›† atrace çš„é…ç½®</b></font>ï¼Œé€‰ä¸­ Probes ä¸‹çš„ Android apps &amp; avcsï¼Œå¦‚å›¾äº”æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="5.gif"  ><br/>ï¼ˆå›¾äº”ï¼‰</center><p>æŒ‰ç…§ä»¥ä¸‹æ“ä½œæ­¥éª¤å’Œæ³¨æ„é¡¹ï¼š</p><ol><li>æ‰“å¼€ atrace å¼€å…³ã€‚</li><li>é»˜è®¤æ˜¯æŠ“å–æ‰€æœ‰ app traceï¼Œå¯ä»¥å…³é—­<code>Record events from Android apps and services</code>ï¼Œåœ¨ä¸‹é¢æ·»åŠ ç›®æ ‡ App åŒ…åã€‚</li><li>åœ¨ Categories ä¸‹é€‰æ‹©ä½ å…³æ³¨çš„ trace ç±»å‹ã€‚</li></ol><p><strong>ç¬¬å››æ­¥</strong>ï¼Œé€‰æ‹©ã€Recording commandã€‘ä¿å­˜é…ç½®ï¼Œä¸€å…±æœ‰ 3 ç§æ–¹å¼ã€‚</p><p>æ–¹å¼ä¸€ï¼Œä¿å­˜åœ¨æœ¬åœ°ï¼Œæ‰“å¼€ã€Recording commandã€‘çš„é¡µé¢åï¼Œç‚¹å‡»æŒ‰é’®å¤åˆ¶é…ç½®å†…å®¹ï¼Œå¦‚å›¾å…­æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="6.png"  ><br/>ï¼ˆå›¾å…­ï¼‰</center><p>æ–¹å¼äºŒï¼Œåœ¨ Perfetto UI æŒä¹…åŒ–ä¿å­˜ï¼Œå¦‚å›¾ä¸ƒæ‰€ç¤ºï¼š</p><center><img   width="90%"   src="7.png"  ><br/>ï¼ˆå›¾ä¸ƒï¼‰</center><p>æ–¹å¼ä¸‰ï¼Œç”Ÿæˆè¿œç«¯é“¾æ¥åˆ†äº«ç»™åˆ«äººä¸‹è½½ï¼Œå¦‚å›¾å…«æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="8.png"  ><br/>ï¼ˆå›¾å…«ï¼‰</center><p>æˆ‘ä»¬å¯ä»¥å¤šå°è¯•ä¸‹é…ç½®ä¼šæ›´åŠ ç†Ÿæ‚‰å’Œäº†è§£ç»†èŠ‚ï¼Œä¿å­˜åå¯ä»¥æ ¹æ®æ–‡æ¡£æ‰‹åŠ¨å¢åˆ æ”¹ä¸€äº›é…ç½®ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸»è¦å…³æ³¨ CPU ä¿¡æ¯æ—¶ï¼Œåšå¥½å¯¹åº”è®¾ç½®ç”Ÿæˆçš„é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">buffers: &#123;</span><br><span class="line">    size_kb: 63488</span><br><span class="line">    fill_policy: DISCARD</span><br><span class="line">&#125;</span><br><span class="line">buffers: &#123;</span><br><span class="line">    size_kb: 2048</span><br><span class="line">    fill_policy: DISCARD</span><br><span class="line">&#125;</span><br><span class="line">data_sources: &#123;</span><br><span class="line">    config &#123;</span><br><span class="line">        name: &quot;android.packages_list&quot;</span><br><span class="line">        target_buffer: 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">data_sources: &#123;</span><br><span class="line">    config &#123;</span><br><span class="line">        name: &quot;android.gpu.memory&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">data_sources: &#123;</span><br><span class="line">    config &#123;</span><br><span class="line">        name: &quot;linux.process_stats&quot;</span><br><span class="line">        target_buffer: 1</span><br><span class="line">        process_stats_config &#123;</span><br><span class="line">            scan_all_processes_on_start: true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">data_sources: &#123;</span><br><span class="line">    config &#123;</span><br><span class="line">        name: &quot;linux.sys_stats&quot;</span><br><span class="line">        sys_stats_config &#123;</span><br><span class="line">            stat_period_ms: 1000</span><br><span class="line">            stat_counters: STAT_CPU_TIMES</span><br><span class="line">            stat_counters: STAT_FORK_COUNT</span><br><span class="line">            #cpufreq_period_ms: 1000</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">data_sources: &#123;</span><br><span class="line">    config &#123;</span><br><span class="line">        name: &quot;linux.ftrace&quot;</span><br><span class="line">        ftrace_config &#123;</span><br><span class="line">            ftrace_events: &quot;sched/sched_switch&quot;</span><br><span class="line">            ftrace_events: &quot;power/suspend_resume&quot;</span><br><span class="line">            ftrace_events: &quot;sched/sched_wakeup&quot;</span><br><span class="line">            ftrace_events: &quot;sched/sched_wakeup_new&quot;</span><br><span class="line">            ftrace_events: &quot;sched/sched_waking&quot;</span><br><span class="line">            ftrace_events: &quot;power/cpu_frequency&quot;</span><br><span class="line">            ftrace_events: &quot;power/cpu_idle&quot;</span><br><span class="line">            ftrace_events: &quot;power/gpu_frequency&quot;</span><br><span class="line">            ftrace_events: &quot;gpu_mem/gpu_mem_total&quot;</span><br><span class="line">            ftrace_events: &quot;power/gpu_work_period&quot;</span><br><span class="line">            ftrace_events: &quot;raw_syscalls/sys_enter&quot;</span><br><span class="line">            ftrace_events: &quot;raw_syscalls/sys_exit&quot;</span><br><span class="line">            ftrace_events: &quot;sched/sched_process_exit&quot;</span><br><span class="line">            ftrace_events: &quot;sched/sched_process_free&quot;</span><br><span class="line">            ftrace_events: &quot;task/task_newtask&quot;</span><br><span class="line">            ftrace_events: &quot;task/task_rename&quot;</span><br><span class="line">            ftrace_events: &quot;ftrace/print&quot;</span><br><span class="line">            atrace_categories: &quot;am&quot;</span><br><span class="line">            atrace_categories: &quot;aidl&quot;</span><br><span class="line">            atrace_categories: &quot;dalvik&quot;</span><br><span class="line">            atrace_categories: &quot;binder_lock&quot;</span><br><span class="line">            atrace_categories: &quot;camera&quot;</span><br><span class="line">            atrace_categories: &quot;database&quot;</span><br><span class="line">            atrace_categories: &quot;gfx&quot;</span><br><span class="line">            atrace_categories: &quot;network&quot;</span><br><span class="line">            atrace_categories: &quot;sm&quot;</span><br><span class="line">            atrace_categories: &quot;ss&quot;</span><br><span class="line">            atrace_categories: &quot;view&quot;</span><br><span class="line">            atrace_categories: &quot;webview&quot;</span><br><span class="line">            atrace_apps: &quot;com.taobao.android&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">duration_ms: 40000</span><br></pre></td></tr></table></figure><blockquote><p>å®é™…è¿è¡Œæ—¶ï¼Œå› ä¸ºæ‰‹æœºç³»ç»Ÿç‰ˆæœ¬ä¸ä¸€è‡´åŸå› ï¼Œå¯èƒ½é‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-:36:13 error: No field named &quot;cpufreq_period_ms&quot; in proto SysStatsConfig</span><br><span class="line">            cpufreq_period_ms: 1000</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šé¢ç»™å‡ºçš„é…ç½®ç¤ºä¾‹ï¼Œæ³¨é‡Šå¯¹åº”é…ç½®è¡Œåå†å°è¯•ã€‚</p></blockquote><p>åœ¨å®é™…æ“ä½œä¸­ï¼Œä¼šæ ¹æ®ä¸åŒçš„åœºæ™¯å’Œéœ€æ±‚å¯¹æŠ“ Trace çš„é…ç½®æ–‡ä»¶åšä¿®æ”¹ï¼Œå¦‚ä½•ä¿®æ”¹å¯ä»¥å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼ˆ<a class="link"   href="https://perfetto.dev/docs/" >https://perfetto.dev/docs/<i class="fas fa-external-link-alt"></i></a>ï¼‰æ•°æ®æºé…ç½®ï¼Œæ–‡æ¡£ä½ç½®å¦‚å›¾ä¹æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="9.png"  ><br/>ï¼ˆå›¾ä¹ï¼‰</center><p>ç”Ÿæˆåå¥½æ”¾åœ¨ç”µè„‘çš„æœ¬åœ°ï¼ˆæ¯”å¦‚æ¡Œé¢ï¼‰ï¼Œå¯ä»¥æŠŠå®ƒå‘½åä¸º perfetto.pbtxã€‚</p><h2 id="2ã€æŒ‰ç…§é…ç½®æŠ“-Perfetto-Trace"><a href="#2ã€æŒ‰ç…§é…ç½®æŠ“-Perfetto-Trace" class="headerlink" title="2ã€æŒ‰ç…§é…ç½®æŠ“ Perfetto Trace"></a>2ã€æŒ‰ç…§é…ç½®æŠ“ Perfetto Trace</h2><p>è®©æ‰‹æœºæŠ“ Perfetto Trace æœ‰ 3 ç§æ–¹å¼ï¼š</p><ol><li>ä½¿ç”¨æ‰‹æœºçš„ Traceur app æŠ“å–ï¼Œå¾ˆå¤šå›½äº§æ‰‹æœºæ²¡æœ‰ï¼Œæœ¬æ–‡ä¸åšä»‹ç»ã€‚</li><li>ä½¿ç”¨ adb å‘½ä»¤æŠ“å–ã€‚</li><li>ä½¿ç”¨ Perfetto UI æŠ“å–ã€‚</li><li>ä½¿ç”¨ Python è„šæœ¬æŠ“å–ï¼ˆ<font color="red"><strong>æ¨è</strong></font>ï¼‰ã€‚</li></ol><p>å€¼å¾—æ³¨æ„çš„æ˜¯ Perfetto ä» Android 9ï¼ˆPï¼‰å¼€å§‹é›†æˆï¼Œä» Android 11ï¼ˆRï¼‰å¼€å§‹é»˜è®¤å¼€å¯ã€‚åœ¨ Android 9ï¼ˆPï¼‰å’Œ Android 10ï¼ˆQï¼‰ä¸Šéœ€è¦å…ˆç¡®ä¿å¼€å¯ Trace æœåŠ¡ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell setprop persist.traced.enable 1</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ è¦åœ¨ Android 9ï¼ˆPï¼‰ä¹‹å‰çš„è®¾å¤‡ä¸Šä½¿ç”¨ Perfettoï¼Œè¯·å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š<br><a class="link"   href="https://perfetto.dev/docs/quickstart/android-tracing#recording-a-trace-through-the-cmdline" >https://perfetto.dev/docs/quickstart/android-tracing#recording-a-trace-through-the-cmdline<i class="fas fa-external-link-alt"></i></a></p></blockquote><p>å¦‚æœæ‰§è¡Œäº†æŠ“å–åï¼Œæ²¡æœ‰æŠ“åˆ°å¯¹åº” App çš„ Traceï¼Œå¯ç”¨<code>systrace VERBOSE</code>å†è¯•è¯•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell setprop log.tag.enableSystrace VERBOSE</span><br></pre></td></tr></table></figure><h3 id="2-1ã€ä½¿ç”¨-adb-å‘½ä»¤æŠ“å–"><a href="#2-1ã€ä½¿ç”¨-adb-å‘½ä»¤æŠ“å–" class="headerlink" title="2.1ã€ä½¿ç”¨ adb å‘½ä»¤æŠ“å–"></a>2.1ã€ä½¿ç”¨ adb å‘½ä»¤æŠ“å–</h3><ol><li>é€šè¿‡ adb æŠŠé…ç½®æ¨é€åˆ°æ‰‹æœºï¼š<ul><li><code>adb push ~/Desktop/perfetto.pbtx /data/local/tmp/perfetto.pbtx</code></li></ul></li><li>ä½¿ç”¨ adb è®©æ‰‹æœºä»¥æŒ‡å®šé…ç½®æŠ“ Perfetto Traceï¼š<ul><li><code>adb shell &#39;cat /data/local/tmp/perfetto.pbtx | perfetto --txt -c - -o /data/misc/perfetto-traces/trace&#39;</code></li></ul></li><li>ç»“æŸæŠ“å–ï¼š<ul><li><code>adb shell &#39;perfetto --attach=perf_debug --stop&#39;</code></li></ul></li></ol><p>æŠ“å–å®Œæˆåï¼Œä½¿ç”¨ adb å‘½ä»¤å¯¼å‡º Trace æ–‡ä»¶åˆ°ç”µè„‘ï¼Œè¿›è¡Œåˆ†æå³å¯ã€‚è¯¥æ–¹å¼æ“ä½œæ­¥éª¤å¤šç•¥æ˜¾ç¹çï¼Œæ ¹æ®å®é™…æƒ…å†µä½œä¸ºå¤‡ç”¨æ–¹å¼ã€‚</p><h3 id="2-2ã€ä½¿ç”¨-Perfetto-UI-æŠ“å–"><a href="#2-2ã€ä½¿ç”¨-Perfetto-UI-æŠ“å–" class="headerlink" title="2.2ã€ä½¿ç”¨ Perfetto UI æŠ“å–"></a>2.2ã€ä½¿ç”¨ Perfetto UI æŠ“å–</h3><p>ä½¿ç”¨ Perfetto UI æŠ“å– Trace æ—¶ï¼Œé€‰æ‹©ç›®æ ‡ Android è®¾å¤‡ç³»ç»Ÿç‰ˆæœ¬æ—¶ï¼Œéœ€è¦<font color="red"><strong>é€‰æ‹© ADB è¿æ¥çš„è®¾å¤‡</strong></font>ï¼Œåœ¨ Perfetto UI ä¸Šé…ç½®å®Œæˆåï¼Œä¸ç”¨ä¿å­˜åˆ°æœ¬åœ°ï¼Œç›´æ¥ç‚¹å‡»ã€Start Recordingã€‘å¼€å§‹å½•åˆ¶ï¼Œå¦‚å›¾åæ‰€ç¤ºï¼š</p><center><img   width="90%"   src="10.png"  ><br/>ï¼ˆå›¾åï¼‰</center><p>åœ¨ Perfetto UI æŠ“å– Trace æ—¶ä¸èƒ½æ‰‹åŠ¨ç»“æŸï¼Œéœ€è¦ç­‰åœ¨ã€Recording Settingã€‘ä¸­è®¾ç½®çš„ã€Max Durationã€‘å€’è®¡æ—¶ç»“æŸï¼Œå½“æˆ‘ä»¬ç‚¹å‡»äº†å½•åˆ¶åä¼šçœ‹åˆ°å¦‚ä¸‹æç¤ºï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Recording in progress for 40000 ms...</span><br></pre></td></tr></table></figure><p>å½•åˆ¶ç»“æŸåï¼ŒPerfetto UI ä¼šç›´æ¥åœ¨ Web ç•Œé¢æ‰“å¼€ Trace æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›è¡Œåˆ†æã€‚è¯¥æ–¹å¼æ¯”è¾ƒæ–¹ä¾¿ï¼Œé…ç½®å¯ä»¥åœ¨ Perfetto UI æŒä¹…åŒ–ä¿å­˜ï¼Œç¾ä¸­ä¸è¶³çš„æ˜¯ Perfetto UI æŠ“åˆ°çš„ Trace æ–‡ä»¶ä¸èƒ½ä¸‹è½½å‘ç»™åˆ«äººã€‚</p><h3 id="2-3ã€ä½¿ç”¨-Python-è„šæœ¬æŠ“å–"><a href="#2-3ã€ä½¿ç”¨-Python-è„šæœ¬æŠ“å–" class="headerlink" title="2.3ã€ä½¿ç”¨ Python è„šæœ¬æŠ“å–"></a>2.3ã€ä½¿ç”¨ Python è„šæœ¬æŠ“å–</h3><p>ä½¿ç”¨ Python è„šæœ¬æŠ“å–åˆ° Trace åï¼Œä¼šæŠŠ Trace æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°ï¼Œä¹Ÿä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨é€šè¿‡ Perfetto UI ç›´æ¥æ‰“å¼€ Trace æ–‡ä»¶ï¼Œæˆ‘ä»¬ç›´æ¥è¿›è¡Œåˆ†æã€‚</p><p>ä½¿ç”¨ Python è„šæœ¬æŠ“å–æ—¶éœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p><ol><li>Android è®¾å¤‡é€šè¿‡ adb è¿æ¥åˆ°ç”µè„‘ã€‚</li><li>æŠŠ Python è„šæœ¬ä¿å­˜åœ¨æœ¬åœ°ï¼Œåœ¨æœ¬åœ°è¿è¡Œ Python è„šæœ¬ã€‚</li><li>æŠŠæŠ“ Trace çš„é…ç½®ä¿å­˜åœ¨æœ¬åœ°ï¼Œè¿è¡Œ Python è„šæœ¬æ—¶éœ€è¦æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚</li></ol><p>Python è„šæœ¬åœ¨ GitHub ä¸Šçš„å¼€æºåœ°å€ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨çœ‹æºç ï¼š<br><a class="link"   href="https://github.com/google/perfetto/blob/main/tools/record_android_trace" >https://github.com/google/perfetto/blob/main/tools/record_android_trace<i class="fas fa-external-link-alt"></i></a><br>raw.githubusercontent.com ä¸‹è½½é“¾æ¥ï¼š<br><a class="link"   href="https://raw.githubusercontent.com/google/perfetto/master/tools/record_android_trace" >https://raw.githubusercontent.com/google/perfetto/master/tools/record_android_trace<i class="fas fa-external-link-alt"></i></a></p><p>ç°åœ¨æˆ‘ä»¬æŠŠ Python è„šæœ¬å’ŒæŠ“ Trace çš„é…ç½®æ”¾åœ¨æ¡Œé¢ï¼Œå‘½åå’Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~/Desktop$</span><br><span class="line">â”œâ”€â”€ perfetto.py</span><br><span class="line">â”œâ”€â”€ perfetto.pbtx</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æˆ‘ä»¬æ‰‹æœºä¸ç”µè„‘é€šè¿‡ adb è¿æ¥ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤æŠ“å– Traceï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 perfetto.py -c perfetto.pbtx -o trace_file.perfetto-trace</span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œ<code>-c</code>æ˜¯æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®ï¼Œ<code>-o</code>æ˜¯æŒ‡å®š trace æ–‡ä»¶ä¿å­˜ä½ç½®ã€‚</p></blockquote><p>è¿è¡Œå‘½ä»¤åï¼Œæˆ‘ä»¬å¼€å§‹æ“ä½œ Appï¼Œç„¶åè§‰å¾—æŠ“å–åˆ°ç›®æ ‡ Trace äº†ï¼ŒæŒ‰ä¸‹<code>ctrl + c</code>ç»“æŸå³å¯ï¼Œæ­¤æ—¶ Trace æ–‡ä»¶ä¼šè¢«æ”¾åœ¨<code>-o</code>æŒ‡å®šçš„ä½ç½®ï¼Œä¸” Perfetto UI ä¼šè¢«è‡ªåŠ¨æ‰“å¼€ï¼Œæˆ‘ä»¬ç›´æ¥è¿›è¡Œåˆ†æå³å¯ã€‚</p><blockquote><p>è€Œä¸”æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒæŠ“çš„ Trace å¤ªå¤§ç½‘ç«™å†…å­˜ç»·ä¸ä½ï¼Œå› ä¸º Python è„šæœ¬ä¼šè‡ªåŠ¨ä¸‹è½½å½“å‰ç³»ç»Ÿçš„ trace_processor æ¥è§£æï¼Œç»†èŠ‚å¯ä»¥ä»å®˜ç½‘äº†è§£ã€‚<br><a class="link"   href="https://perfetto.dev/docs/visualization/large-traces" >https://perfetto.dev/docs/visualization/large-traces<i class="fas fa-external-link-alt"></i></a></p></blockquote><h2 id="3ã€æ‰“-Trace"><a href="#3ã€æ‰“-Trace" class="headerlink" title="3ã€æ‰“ Trace"></a>3ã€æ‰“ Trace</h2><p>å…ˆå¤§æ¦‚äº†è§£ä¸‹ Trace çš„åŸºæœ¬æ¦‚å¿µï¼Œä¸€ä¸ª Trace æ®µåœ¨ Perfetto UI ä¸­ç”¨ Slice è¡¨ç¤ºï¼Œå®ƒå¹¶ä¸ä»£è¡¨ä¸€ä¸ªæ–¹æ³•ï¼Œè€Œæ˜¯ä¸€ä¸ª Trace çš„å¼€å§‹åˆ°ç»“æŸï¼Œéœ€è¦åœ¨ä»£ç ä¸­æ ‡è®°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Trace.beginSection(<span class="string">&quot;Choreographer#doFrame&quot;</span>);</span><br><span class="line">...</span><br><span class="line">Trace.endSection();</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªåŒæ­¥ Traceï¼Œä¸€ä¸ªåŒæ­¥ Trace æ®µå¿…é¡»æ˜¯ä¸€ä¸ª<code>Trace#beginSection(String)</code>å¯¹åº”ä¸€ä¸ª<code>Trace#endSection()</code>ï¼Œå¦åˆ™æŠ“å–åˆ°çš„ Trace å°†ä¼šå¼‚å¸¸ã€‚</p><h3 id="3-1ã€åŒæ­¥-Trace"><a href="#3-1ã€åŒæ­¥-Trace" class="headerlink" title="3.1ã€åŒæ­¥ Trace"></a>3.1ã€åŒæ­¥ Trace</h3><p>Trace ä¹Ÿå¯ä»¥åµŒå¥—å¤šå±‚ï¼Œæ¯”å¦‚æˆ‘ä»¬çŸ¥é“æŸä¸ªæ–¹æ³•å¾ˆè€—æ—¶ï¼Œä½†æ˜¯è¯¥æ–¹æ³•ç”±å¾ˆå¤šä»£ç æ®µç»„æˆï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç»™è¯¥æ–¹æ³•ä¸­æ¯ä¸€æ®µä»£ç åŠ ä¸Š Traceï¼Œæ¥åˆ†æå…·ä½“æ˜¯å“ªä¸€æ®µä»£ç å¼•èµ·çš„è€—æ—¶ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    Trace.beginSection(<span class="string">&quot;First&quot;</span>);</span><br><span class="line">    ...;</span><br><span class="line">        Trace.beginSection(<span class="string">&quot;Second&quot;</span>);</span><br><span class="line">        ...;</span><br><span class="line">            Trace.beginSection(<span class="string">&quot;Third&quot;</span>);</span><br><span class="line">            ...;</span><br><span class="line">            Trace.endSection();</span><br><span class="line">        Trace.endSection();</span><br><span class="line">    Trace.endSection();</span><br><span class="line"></span><br><span class="line">    Trace.beginSection(<span class="string">&quot;AAA&quot;</span>);</span><br><span class="line">    ...;</span><br><span class="line">        Trace.beginSection(<span class="string">&quot;BBB&quot;</span>);</span><br><span class="line">        ...;</span><br><span class="line">        Trace.endSection();</span><br><span class="line">    Trace.endSection();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šåŒæ­¥ Trace çš„<code>Trace.beginSection(String)</code>å’Œ<code>Trace.endSection()</code>éœ€è¦åœ¨åŒä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ã€‚</p></blockquote><p>å¦‚ä¸Šä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿çœ‹æ¸…ç»“æ„ï¼Œæˆ‘æ·»åŠ äº†ç¼©è¿›ï¼Œæˆ‘ä»¬å°†å¾—åˆ°å¦‚å›¾åä¸€æ‰€ç¤ºçš„ Traceï¼š</p><center><img   width="90%"   src="2.1.png"  ><br/>ï¼ˆå›¾åä¸€ï¼‰</center><h3 id="3-2ã€å¼‚æ­¥-Trace"><a href="#3-2ã€å¼‚æ­¥-Trace" class="headerlink" title="3.2ã€å¼‚æ­¥ Trace"></a>3.2ã€å¼‚æ­¥ Trace</h3><p>æˆ‘è®¤ä¸ºï¼Œå¼‚æ­¥ Trace å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ol><li>å¼‚æ­¥ Trace å¯ä»¥è§£å†³åŒæ­¥ Trace ä¸èƒ½è·¨çº¿ç¨‹çš„é—®é¢˜ã€‚</li><li>å¼‚æ­¥ Trace ä¸ç”¨è€ƒè™‘<code>begin</code>å’Œ<code>end</code>æ˜¯å¦åœ¨åŒä¸€ä¸ªçº¿ç¨‹ã€‚</li><li>å¼‚æ­¥ Trace å¯ä»¥è§‚å¯Ÿæµç¨‹è€—æ—¶ï¼Œæ¯”åŒæ­¥ Trace æ›´å®è§‚ã€‚</li></ol><h4 id="3-2-1ã€åŒæ­¥-Trace-çš„å±€é™æ€§"><a href="#3-2-1ã€åŒæ­¥-Trace-çš„å±€é™æ€§" class="headerlink" title="3.2.1ã€åŒæ­¥ Trace çš„å±€é™æ€§"></a>3.2.1ã€åŒæ­¥ Trace çš„å±€é™æ€§</h4><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬æƒ³ç»Ÿè®¡<code>request()</code>æ–¹æ³•å’Œå·¥ä½œçº¿ç¨‹çš„æ•´ä½“è€—æ—¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ThreadPoolExecutor</span> <span class="variable">executors</span> <span class="operator">=</span> ...;</span><br><span class="line">    Trace.beginSection(<span class="string">&quot;request&quot;</span>);</span><br><span class="line"></span><br><span class="line">    ...;</span><br><span class="line"></span><br><span class="line">    executors.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            ...;</span><br><span class="line"></span><br><span class="line">            notifyReuslt();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    Trace.endSection();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œå…¶ç»“æœåªæ˜¯ç»Ÿè®¡äº†<code>ThreadPoolExecutor#execute</code>çš„è€—æ—¶ï¼Œå·¥ä½œçº¿ç¨‹çš„è€—æ—¶æ²¡æœ‰ç»Ÿè®¡åˆ°ã€‚</p><blockquote><p>ä¸Šæ–‡æåˆ°è¿‡ï¼ŒåŒæ­¥ Trace ä¸èƒ½è·¨çº¿ç¨‹ä½¿ç”¨ï¼Œå› æ­¤<code>Trace.endSection()</code>ä¸èƒ½æ”¾åœ¨<code>run()</code>ç»“å°¾ã€‚</p></blockquote><p>ä¾ç„¶æ˜¯å¦‚ä¸Šéœ€æ±‚ï¼Œæˆ‘ä»¬æ¢ä¸€ç§å§¿åŠ¿ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ThreadPoolExecutor</span> <span class="variable">executors</span> <span class="operator">=</span> ...;</span><br><span class="line">    Trace.beginSection(<span class="string">&quot;request&quot;</span>);</span><br><span class="line"></span><br><span class="line">    ...;</span><br><span class="line"></span><br><span class="line">    executors.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            Trace.beginSection(<span class="string">&quot;request#run&quot;</span>);</span><br><span class="line">            ...;</span><br><span class="line"></span><br><span class="line">            notifyReuslt();</span><br><span class="line">            Trace.endSection();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    Trace.endSection();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ï¼ŒæŠ“å– Trace åä¼šï¼Œ2 ä¸ª Trace ä¼šåˆ†åˆ«åˆ†å¸ƒåœ¨ä¸»çº¿ç¨‹å’Œå·¥ä½œçº¿ç¨‹ï¼Œè™½ç„¶å¯ä»¥äººå·¥è®¡ç®—å¾—å‡ºæ•´ä½“è€—æ—¶ï¼Œä½†æ˜¯éå¸¸ä¸æ–¹ä¾¿ã€ä¸ç›´è§‚ã€‚å¦‚æœåœ¨å·¥ä½œæµç¨‹ä¸­åˆ‡æ¢äº†å¥½å‡ ä¸ªçº¿ç¨‹ï¼Œå°±æ›´åŠ éº»çƒ¦äº†ã€‚</p><blockquote><p>å¤§èƒ†æƒ³è±¡ï¼Œå¤§å‹åº”ç”¨ä¸­å¯¹ç»Ÿè®¡åˆ‡æ¢å¤šä¸ªçº¿ç¨‹çš„æ•´ä½“è€—æ—¶æƒ…å†µéå¸¸å¸¸è§ï¼Œä¸‹æ–‡ä¼šä»‹ç»</p></blockquote><h4 id="3-2-2ã€å¼‚æ­¥-Trace-ä½¿ç”¨"><a href="#3-2-2ã€å¼‚æ­¥-Trace-ä½¿ç”¨" class="headerlink" title="3.2.2ã€å¼‚æ­¥ Trace ä½¿ç”¨"></a>3.2.2ã€å¼‚æ­¥ Trace ä½¿ç”¨</h4><p>å¼‚æ­¥ Trace çš„åŸºæœ¬ä½¿ç”¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TraceUtils.java</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">beginAsync</span><span class="params">(String name, <span class="type">int</span> cookie)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) &#123;</span><br><span class="line">        Trace.beginAsyncSection(name, cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">endAsync</span><span class="params">(String name, <span class="type">int</span> cookie)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) &#123;</span><br><span class="line">        Trace.endAsyncSection(name, cookie);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œè¿˜æ˜¯ä»¥ä¸Šè¿°ä»£ç ä¸ºä¾‹ï¼Œæˆ‘ä»¬ç»Ÿè®¡<code>request()</code>æ•´ä½“è€—æ—¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">request</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ThreadPoolExecutor</span> <span class="variable">executors</span> <span class="operator">=</span> ...;</span><br><span class="line">    TraceUtils.beginAsync(<span class="string">&quot;request&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    ...;</span><br><span class="line"></span><br><span class="line">    executors.execute(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            ...;</span><br><span class="line"></span><br><span class="line">            TraceUtils.beginAsync(<span class="string">&quot;handleData&quot;</span>, <span class="number">1</span>);</span><br><span class="line">            ...;</span><br><span class="line">            TraceUtils.endAsync(<span class="string">&quot;handleData&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            notifyReuslt();</span><br><span class="line">            TraceUtils.endAsync(<span class="string">&quot;request&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">notifyResult</span><span class="params">()</span> &#123;</span><br><span class="line">    ThreadUtils.runOnMain(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            TraceUtils.beginAsync(<span class="string">&quot;notifyResult&quot;</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            ...;</span><br><span class="line"></span><br><span class="line">            TraceUtils.endAsync(<span class="string">&quot;notifyResult&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†å¾—åˆ°å¦‚å›¾åäºŒæ‰€ç¤º Traceï¼š</p><center><img   width="90%"   src="2.2.png"  ><br/>ï¼ˆå›¾åäºŒï¼‰</center><p>å†ä¾‹å¦‚ï¼Œå½“<code>A1-request</code>æ•´ä¸ªæµç¨‹è·¨è¶Šäº†å¥½å‡ ä¸ªçº¿ç¨‹æ—¶ï¼Œä½¿ç”¨åŒæ­¥ Trace æ˜¯æ— æ³•å°†å®ƒä»¬èšåˆåˆ°ä¸€èµ·çš„ï¼Œå¦‚æœä½¿ç”¨å¼‚æ­¥ Traceï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¾—åˆ°å¦‚å›¾åä¸‰æ‰€ç¤º Traceï¼š</p><center><img   width="90%"   src="2.3.png"  ><br/>ï¼ˆå›¾åä¸‰ï¼‰</center><p>åœ¨å¤æ‚çš„åœºæ™¯çš„æ€§èƒ½åˆ†æå’Œä¼˜åŒ–æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œæ¯”å¦‚ App å†·å¯åŠ¨ï¼Œæœ‰å¾ˆå¤šåˆå§‹åŒ–ä»»åŠ¡ã€é¦–é¡µè¯·æ±‚ä»»åŠ¡ã€é¦–é¡µæ¸²æŸ“ã€å›¾åƒåŠ è½½ç­‰ï¼Œéå¸¸ä¾èµ–å¼‚æ­¥ Trace åšæµç¨‹åˆ†æã€‚</p><h4 id="3-2-3ã€å¼‚æ­¥-Trace-å°è£…"><a href="#3-2-3ã€å¼‚æ­¥-Trace-å°è£…" class="headerlink" title="3.2.3ã€å¼‚æ­¥ Trace å°è£…"></a>3.2.3ã€å¼‚æ­¥ Trace å°è£…</h4><p>é€šè¿‡ä¸Šæ–‡æˆ‘ä»¬çœ‹åˆ°ï¼Œæ‰“å¼‚æ­¥ Trace æ—¶é™¤äº†è¦ä¼ ä¸€ä¸ª<code>name</code>è¿˜è¦ä¼ ä¸€ä¸ª<code>cookie</code>ï¼Œå®ƒçš„åŸç†å°±å’Œ<code>token</code>ä¸€æ ·ï¼Œå› ä¸ºå¼‚æ­¥ Trace è·¨è¶Šå¤šä¸ªçº¿ç¨‹ï¼Œä¹Ÿå¯èƒ½åŒä¸€ä¸ª<code>name</code>å‘ç”Ÿå¤šæ¬¡ï¼Œæ‰€ä»¥éœ€è¦<code>cookie</code>æ¥åšæµç¨‹å”¯ä¸€æ ‡è®°ï¼Œå¦åˆ™ç¬¬äºŒæ¬¡å‘ç”Ÿå°±ä¼šè¦†ç›–ç¬¬ä¸€æ¬¡å‘ç”Ÿã€‚</p><p>åŒæ—¶ï¼Œå½“æˆ‘ä»¬ä¸€æ¬¡æµç¨‹æ˜ç¡®æ—¶ï¼Œä¸Šè¿°ä½¿ç”¨æ–¹å¼å°±æä¸ºä¸ä¾¿ï¼ˆéœ€è¦è®°å½• cookieï¼‰ï¼Œè€Œä¸”å½“æµç¨‹ç»“æŸæ—¶ï¼Œæµç¨‹ä¸­ä¸€äº›å°šæœªæ ‡è®°çš„å¼‚æ­¥ Traceï¼ˆå¯èƒ½æ˜¯ä¸€äº›åç»­å®Œæˆçš„å¼‚æ­¥ä»»åŠ¡ï¼‰å‘ç”Ÿæ—¶ï¼Œä¼šæ‰“ä¹±è¯¥æµç¨‹ä¸­çš„ Trace è®°å½•ã€‚</p><p>å°è£…ä¸€ä¸ªè‡ªåŠ¨å¤„ç†<code>cookie</code>çš„<code>Async</code>Traceï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TraceUtils.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥Traceï¼Œcookieç”Ÿæˆå™¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">AtomicInteger</span> <span class="variable">COOKIE_MAKER</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicInteger</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Async</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> cookie;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> finished;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Async</span><span class="params">()</span> &#123;</span><br><span class="line">        cookie = COOKIE_MAKER.incrementAndGet();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">begin</span><span class="params">(String methodName)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!finished) &#123;</span><br><span class="line">            TraceUtils.beginAsync(methodName, cookie);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">end</span><span class="params">(String methodName)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!finished) &#123;</span><br><span class="line">            TraceUtils.endAsync(methodName, cookie);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">finish</span><span class="params">()</span> &#123;</span><br><span class="line">        finished = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isFinished</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> finished;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬<code>new Async()</code>ç”Ÿæˆä¸€ä¸ªå®ä¾‹æ—¶ï¼Œè¿™ä¸ª cookie å°†ä¼šè¢«è®°å½•ï¼Œä½¿ç”¨è¿™ä¸ªå®ä¾‹è®°å½•çš„æ‰€ä»¥ Trace çš„<code>begin</code>å’Œ<code>end</code>å¯¹çš„<code>cookie</code>å°†è‡ªåŠ¨ç»Ÿä¸€ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿è·å–<code>ä¸€ä¸ªæµç¨‹</code>ï¼ˆæ¯”å¦‚é¡µé¢ç§’å¼€ï¼‰çš„å®ä¾‹ï¼Œè¿˜éœ€è¦å°è£…è·å–å®ä¾‹çš„ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TraceUtils.java</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥Traceåˆ—è¡¨</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;String, Async&gt; ASYNC_LIST = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> biz æµç¨‹åç§°ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> Async</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Async <span class="title function_">async</span><span class="params">(String biz)</span> &#123;</span><br><span class="line">    <span class="type">Async</span> <span class="variable">async</span> <span class="operator">=</span> ASYNC_LIST.get(biz);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (async != <span class="literal">null</span> &amp;&amp; async.isFinished()) &#123;</span><br><span class="line">        ASYNC_LIST.remove(biz);</span><br><span class="line">        async = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (async == <span class="literal">null</span>) &#123;</span><br><span class="line">        async = <span class="keyword">new</span> <span class="title class_">AsyncTrace</span>();</span><br><span class="line">        ASYNC_LIST.put(biz, async);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> async;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Async <span class="title function_">launch</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> TraceUtils.async(<span class="string">&quot;launch&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°ç®€å•çš„å°è£…ï¼Œæˆ‘ä»¬çš„ä½¿ç”¨å§¿åŠ¿å°†æ˜¯è¿™æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">HarryTrace.async(biz).begin(<span class="string">&quot;A1-request&quot;</span>);</span><br><span class="line">...;</span><br><span class="line"></span><br><span class="line">    HarryTrace.async(biz).begin(<span class="string">&quot;A2-connect&quot;</span>);</span><br><span class="line">    ...;</span><br><span class="line">    HarryTrace.async(biz).end(<span class="string">&quot;A2-connect&quot;</span>);</span><br><span class="line"></span><br><span class="line">    HarryTrace.async(biz).begin(<span class="string">&quot;A3-sendData&quot;</span>);</span><br><span class="line">    ...;</span><br><span class="line">    HarryTrace.async(biz).end(<span class="string">&quot;A3-sendData&quot;</span>);</span><br><span class="line"></span><br><span class="line">HarryTrace.async(biz).end(<span class="string">&quot;A1-request&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="3-2-4ã€å¤æ‚å¼‚æ­¥-Trace-ç¤ºä¾‹"><a href="#3-2-4ã€å¤æ‚å¼‚æ­¥-Trace-ç¤ºä¾‹" class="headerlink" title="3.2.4ã€å¤æ‚å¼‚æ­¥ Trace ç¤ºä¾‹"></a>3.2.4ã€å¤æ‚å¼‚æ­¥ Trace ç¤ºä¾‹</h4><p>å¦‚ 3.2.2 ä¸­æœ«å°¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªå¤æ‚çš„æµç¨‹ä¸­ä½¿ç”¨å¼‚æ­¥ Trace æ–¹ä¾¿æˆ‘ä»¬åˆ†ææ•´ä¸ªæµç¨‹çš„è€—æ—¶æƒ…å†µï¼Œå¯¹äºæ¯ä¸€ä¸ªé˜¶æ®µçš„æ–¹æ³•å†ä½¿ç”¨åŒæ­¥ Trace åˆ†æå…·ä½“ä»£ç è€—æ—¶ã€‚</p><p>ç»™ä¸€ä¸ªå®é™…åº”ç”¨ä¸­å¤æ‚çš„ä¾‹å­ï¼Œè¿™æ˜¯ä» App å¯åŠ¨ã€é¢„å®šä½ã€é¢„åŠ è½½ã€é¦–é¡µæ¸²æŸ“å®Œæˆåˆ°ç”¨æˆ·å¯äº¤äº’çš„è€—æ—¶æƒ…å†µï¼Œç”±äºæˆªå›¾å¼„ä¸äº†é‚£ä¹ˆå¤§ï¼Œæ²¡æœ‰åŠ åº”ç”¨å¯åŠ¨é˜¶æ®µ<code>Application#onCreate</code>çš„è€—æ—¶æƒ…å†µï¼Œå¦‚å›¾åå››æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="2.4.png"  ><br/>ï¼ˆå›¾åå››ï¼‰</center><h3 id="3-3ã€å¸¸è§é—®é¢˜"><a href="#3-3ã€å¸¸è§é—®é¢˜" class="headerlink" title="3.3ã€å¸¸è§é—®é¢˜"></a>3.3ã€å¸¸è§é—®é¢˜</h3><p>æ–‡ç« å‘å‡ºåï¼Œæœ‰äººé—®æˆ‘ä¸ºä»€ä¹ˆ Release åŒ…æŠ“ä¸åˆ° Traceï¼Ÿæˆ‘æ€»ç»“äº†ä»¥ä¸‹å‡ ç‚¹ï¼ˆä¸åŒç‰ˆæœ¬ç³»ç»Ÿä¸ä¸€æ ·ï¼Œå»ºè®®ä»¥ä¸‹é€‰é¡¹å¯ä»¥å…¨éƒ¨å°è¯•é…ç½®ï¼‰ï¼š</p><ol><li>æ‰§è¡Œ adb å‘½ä»¤å¼€å¯ Traceï¼Œä¸Šæ–‡ä¸­æœ‰æåˆ°ã€‚</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">adb shell setprop persist.traced.enable 1</span><br><span class="line">adb shell setprop log.tag.enableSystrace VERBOSE</span><br></pre></td></tr></table></figure><ol start="2"><li>æ£€æŸ¥ manifest.xml ä¸­æ˜¯å¦é…ç½®äº† profileableã€‚<blockquote><p>å®˜ç½‘æ–‡æ¡£ï¼š<a class="link"   href="https://developer.android.com/guide/topics/manifest/profileable-element" >https://developer.android.com/guide/topics/manifest/profileable-element<i class="fas fa-external-link-alt"></i></a></p></blockquote></li><li>æ˜¯å¦åœ¨æ‰“ Release åŒ…æ—¶å»æ‰äº† Traceï¼Œä¸€èˆ¬æ˜¯æ‰“åŒ…æ’ä»¶åšçš„ï¼Œä¸åŒå…¬å¸æ–¹å¼ä¸åŒã€‚ï¼ˆ<font color="red"><b>æœ€æœ‰å¯èƒ½çš„</b></font>ï¼‰</li><li>ç³»ç»Ÿå¯èƒ½ç¦ç”¨äº† App Traceï¼Œå¯ä»¥åå°„å¼€å¯ï¼Œä¹Ÿå¯ä»¥åŒ…è£… Trace ç±»åœ¨å‘å¸ƒç‰ˆä¸­ä¸æ‰“ Traceã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="variable">initialized</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">startTrace</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">allowTrace</span> <span class="operator">=</span> BuildConfig.TRACE;</span><br><span class="line">    <span class="keyword">if</span> (!allowTrace || initialized) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    initialized = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt; trace = Trace.class;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//noinspection JavaReflectionMemberAccess</span></span><br><span class="line">        <span class="meta">@SuppressLint(&quot;DiscouragedPrivateApi&quot;)</span></span><br><span class="line">        <span class="type">Method</span> <span class="variable">setAppTracingAllowed</span> <span class="operator">=</span> trace.getDeclaredMethod(<span class="string">&quot;setAppTracingAllowed&quot;</span>, <span class="type">boolean</span>.class);</span><br><span class="line">        setAppTracingAllowed.invoke(<span class="literal">null</span>, <span class="literal">true</span>);</span><br><span class="line">        Logger.i(TAG, <span class="string">&quot;startTrace end&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable t) &#123;</span><br><span class="line">        Logger.e(TAG, t);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„<code>BuildConfig.TRACE</code>éœ€è¦åœ¨ App æ¨¡å—çš„æ„å»ºè„šæœ¬ build.gradle çš„<code>buildTypes</code>ä¸­é…ç½®ç”Ÿæˆï¼Œåœ¨çº¿ä¸‹ Release åŒ…å¼€å¯ Traceï¼Œåœ¨å‘å¸ƒåˆ°å¸‚åœºçš„åŒ…ä¸­å…³é—­ Traceï¼Œä»¥å…è¢«é»‘äº§åˆ©ç”¨ã€‚</p><p>ç›¸å¯¹åº”çš„ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´æˆ‘ä»¬çš„å°è£…ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">begin</span><span class="params">(String sectionName)</span> &#123;</span><br><span class="line">    startTrace();</span><br><span class="line">    <span class="keyword">if</span> (initialized) &#123;</span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">end</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (initialized) &#123;</span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">beginAsync</span><span class="params">(String methodName, <span class="type">int</span> cookie)</span> &#123;</span><br><span class="line">    startTrace();</span><br><span class="line">    <span class="keyword">if</span> (initialized) &#123;</span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">endAsync</span><span class="params">(String methodName, <span class="type">int</span> cookie)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (initialized) &#123;</span><br><span class="line">        ...;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Async <span class="title function_">async</span><span class="params">(String biz)</span> &#123;</span><br><span class="line">    startTrace();</span><br><span class="line">    ...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4ã€Trace-åˆ†æ"><a href="#4ã€Trace-åˆ†æ" class="headerlink" title="4ã€Trace åˆ†æ"></a>4ã€Trace åˆ†æ</h2><h3 id="4-1ã€ä½¿ç”¨å›¾å½¢ç•Œé¢åˆ†æ"><a href="#4-1ã€ä½¿ç”¨å›¾å½¢ç•Œé¢åˆ†æ" class="headerlink" title="4.1ã€ä½¿ç”¨å›¾å½¢ç•Œé¢åˆ†æ"></a>4.1ã€ä½¿ç”¨å›¾å½¢ç•Œé¢åˆ†æ</h3><p>æ­£å¼æ“ä½œä¹‹å‰å…ˆæŒæ¡ä¸€äº›åŸºæœ¬æ“ä½œæŠ€å·§ã€‚</p><p>åŸºæœ¬æ“ä½œ 1ï¼Œæ‰“å¼€ Trace æ–‡ä»¶åï¼Œå¯ä»¥æ•´ä½“ä¸Šè§‚å¯Ÿå“ªäº›çº¿ç¨‹æœ‰é—®é¢˜ï¼Œæ¯”å¦‚<code>è€—æ—¶ä¹…</code>ã€<code>Uninterruptiable Sleep (non-IO)</code>ç­‰ï¼Œå®šä½åˆ°æœ‰é—®é¢˜çš„çº¿ç¨‹æˆ–è€… Trace æ®µåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹çº¿ç¨‹å’Œ Trace æ®µè¿›è¡Œæ›´è¯¦ç»†çš„åˆ†æäº†ï¼Œå¦‚å›¾åäº”æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="11.gif"  ><br/>ï¼ˆå›¾åäº”ï¼‰</center><p>åŸºæœ¬æ“ä½œ 2ï¼Œåœ¨å¯¹çº¿ç¨‹å’Œ Trace æ®µè¿›è¡Œè¯¦ç»†åˆ†æä¹‹å‰ï¼Œå¯¹è¦åˆ†æçš„è¿›ç¨‹å’Œçº¿ç¨‹åšä¸‹é’‰æ“ä½œï¼ˆå¦‚å›¾åå…­æ‰€ç¤ºï¼‰ï¼š</p><ol><li>åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»è¦åˆ†æçš„ App è¿›ç¨‹ï¼Œç‚¹å‡»åè¯¥è¿›ç¨‹ä¼šå±•å¼€å­åˆ—è¡¨ï¼Œå±•ç¤ºæ‰€æœ‰çº¿ç¨‹ã€‚</li><li>æ‰¾åˆ°<code>RenderThread</code>ï¼ˆæ¸²æŸ“çº¿ç¨‹ï¼‰å¹¶ç‚¹å‡»åç§°å³ä¾§çš„é’‰å›¾æ ‡ï¼ŒæŠŠè¯¥çº¿ç¨‹é’‰åœ¨åˆ—è¡¨é¡¶éƒ¨ã€‚</li></ol><center><img   width="90%"   src="12.png"  ><br/>ï¼ˆå›¾åå…­ï¼‰</center><p>è¿™æ ·åšçš„ç›®çš„æ˜¯æ–¹ä¾¿è§‚å¯Ÿ<strong>ä¸»çº¿ç¨‹</strong>å’Œ<strong>æ¸²æŸ“çº¿ç¨‹</strong>å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæ‰¾åˆ°æ€§èƒ½ç“¶é¢ˆæ‰€åœ¨ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ä¸€èµ·çœ‹ 3 ä¸ªä¾‹å­ã€‚</p><h4 id="4-1-1ã€Uninterruptible-Sleep-non-IO"><a href="#4-1-1ã€Uninterruptible-Sleep-non-IO" class="headerlink" title="4.1.1ã€Uninterruptible Sleep (non-IO)"></a>4.1.1ã€Uninterruptible Sleep (non-IO)</h4><p>æˆ‘ä»¬çœ‹ä¸€ä¸ªæœ€ç»å…¸çš„<font color="red"><strong>æ–¹æ³•è€—æ—¶åˆ†æ</strong></font>ï¼Œçœ‹è¿‡ Framework æºç çš„åŒå­¦éƒ½çŸ¥é“ç³»ç»Ÿå±‚<code>Choreographer#doFrame()</code>æ˜¯æ‰§è¡Œä¸€å¸§ç»˜åˆ¶ï¼ˆåŒ…æ‹¬<code>layout</code>ã€<code>measure</code>ã€<code>draw</code>ï¼‰ï¼Œå¦‚æœæˆ‘ä»¬é¡µé¢æ“ä½œæ—¶ï¼ˆæ¯”å¦‚æµè§ˆä¿¡æ¯æµï¼‰ç•¥æ˜¾å¡é¡¿ï¼Œé‚£ä¹ˆå¿…å®šå­˜åœ¨æŸä¸€å¸§æˆ–è€…æ›´å¤šå¸§è€—æ—¶ä¹…çš„æƒ…å†µã€‚ç”¨ Perfetto UI æ‰“å¼€ Traceï¼Œä¸€çœ¼å°±èƒ½çœ‹åˆ°æœ‰äº›äº› Trace æ®µæ¯”è¾ƒé•¿ï¼Œé€‰ä¸­è¯¥æ®µ Traceï¼ˆè¿™ä¸ª Trace æ˜¯ç³»ç»Ÿå±‚åŠ çš„ï¼‰ï¼Œå¦‚å›¾åä¸ƒæ‰€ç¤ºï¼š</p><center><img   width="90%"   src="13.png"  ><br/>ï¼ˆå›¾åä¸ƒï¼‰</center><p>è§‚å¯Ÿ Slice Details åä¼šå¾ˆä¸€ç›®äº†ç„¶çš„çœ‹åˆ°è¯¥ Trace çš„è€—æ—¶ï¼š</p><ol><li>çœ‹åˆ°è¿™ä¸€å¸§è€—æ—¶ 177msï¼Œå¾ˆæ˜æ˜¾è¿™ä¹ˆä¹…çš„ä¸€å¸§ä¼šè‚‰çœ¼å¯è§çš„å¡é¡¿ä¸€ä¸‹ã€‚</li><li>æŸ¥çœ‹ Duration åˆ—è¡¨ï¼Œå¯ä»¥çœ‹åˆ°æœ‰æ„å¤–ï¼Œå­˜åœ¨è€—æ—¶è¾ƒä¹…çš„<code>Sleeping</code>å’Œ<code>Uninterruptible Sleep (non-IO)</code>ã€‚</li><li>Running æ¯”è¾ƒä¹…ï¼Œå¯ä»¥ç‚¹å‡»ç®­å¤´å±•å¼€æŸ¥çœ‹ç»†èŠ‚ã€‚</li></ol><p>å¾ˆæ˜æ˜¾ï¼Œä¸»çº¿ç¨‹å­˜åœ¨ä¸ç¬¦åˆé¢„æœŸçš„<code>Uninterruptible Sleep (non-IO)</code>çŠ¶æ€ï¼Œè¿™ä¸ª case ä¸­æ¯”è¾ƒæ˜æ˜¾çš„æ£•è‰²æ®µå°±æ˜¯<code>Uninterruptible Sleep</code>çš„ä¿¡æ¯ï¼ˆä¸æ˜æ˜¾çš„æ”¾å¤§æ¨ªè½´æ®µå°±èƒ½çœ‹åˆ°ï¼‰ã€‚</p><p>é‡ç‚¹æ¥äº†ï¼Œ<font color="red"><strong>å¦‚ä½•å®šä½æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„ Uninterruptible Sleepï¼Ÿ</strong></font>æˆ‘ä»¬å¯ä»¥è¿™æ ·æ“ä½œï¼Œä»¥<code>Uninterruptible Sleep</code>ä¸ºä¸­å¿ƒæ”¾å¤§æ¨ªè½´ï¼Œåˆ°è¶³å¤Ÿå¤§äº†å¯ä»¥çœ‹åˆ° App ä¸»çº¿ç¨‹è¡Œæ…¢æ…¢éœ²å‡º<code>Runnable</code>å’Œ<code>Running</code>ï¼Œå¦‚å›¾åå…«æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="14.png"  ><br/>ï¼ˆå›¾åå…«ï¼‰</center><ol><li><code>Runnable</code>ä¸è¡¨ç¤ºçº¿ç¨‹ï¼Œè€Œæ˜¯è¡¨ç¤ºå½“å‰çº¿ç¨‹å¯è¿è¡Œäº†ã€‚</li><li><code>Running</code>è¡¨ç¤ºå½“å‰çº¿ç¨‹æ­£åœ¨è¿è¡Œã€‚</li></ol><p>æ­¤æ—¶æˆ‘ä»¬é€‰ä¸­è·ç¦»<code>Uninterruptible Sleep</code>æœ€è¿‘çš„<code>Runnable</code>ï¼Œå¦‚å›¾åä¹æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="15.png"  ><br/>ï¼ˆå›¾åä¹ï¼‰</center><p>åœ¨<code>Selection Details</code>ä¸­å¯ä»¥çœ‹åˆ°<code>Waker</code>ä¿¡æ¯ï¼Œå®ƒè¡¨ç¤ºå”¤èµ·å½“å‰çº¿ç¨‹ï¼ˆè¿™é‡Œæ˜¯ä¸»çº¿ç¨‹ï¼‰çš„çº¿ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯<code>dp2ndk</code>çº¿ç¨‹é˜»å¡äº†ä¸»çº¿ç¨‹ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨ App è¿›ç¨‹å­åˆ—è¡¨ä¸­æ‰¾åˆ°<code>dp2ndk</code>çº¿ç¨‹ï¼Œå¹¶é’‰ä½ã€‚æ­¤æ—¶<code>dp2ndk</code>ã€æ¸²æŸ“çº¿ç¨‹ã€ä¸»çº¿ç¨‹ç­‰å°±ä¼šåŒæ—¶é’‰åœ¨é¡¶éƒ¨ï¼Œæ–¹ä¾¿æˆ‘ä»¬åšå¯¹æ¯”ç¡®è®¤ä¿¡æ¯ã€‚</p><p>ä»å›¾åäº”å¯ä»¥çœ‹åˆ°ï¼Œ<code>dp2ndk</code>çº¿ç¨‹å ç”¨äº† CPUï¼Œè¿™é‡Œéœ€è¦åšä¼˜åŒ–ã€‚</p><h4 id="4-1-2ã€monitor-contention-with-owner"><a href="#4-1-2ã€monitor-contention-with-owner" class="headerlink" title="4.1.2ã€monitor contention with owner"></a>4.1.2ã€monitor contention with owner</h4><p>åœ¨ Perfetto UI æ‰“å¼€ Traceï¼Œæ”¾å¤§ç¼©å°æ¨ªè½´åˆ°é€‚å½“å¤§å°ï¼Œæ¨ªå‘æ»‘åŠ¨ Trace æ®µï¼Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼<code>monitor contention with owner [xxx]</code>çš„ Trace æ®µï¼Œå®ƒä¼šé˜»å¡ä¸»çº¿ç¨‹æˆ–è€…æ¸²æŸ“çº¿ç¨‹ï¼Œç‚¹å‡»ä¸»çº¿ç¨‹æˆ–è€…æ¸²æŸ“çº¿ç¨‹åé¢çš„<code>Runnable</code>è§‚å¯Ÿ<code>Waker</code>ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯å“ªä¸ªçº¿ç¨‹é˜»å¡çš„ï¼Œå¦‚å›¾äºŒåæ‰€ç¤ºï¼š</p><center><img   width="90%"   src="16.png"  ><br/>ï¼ˆå›¾äºŒåï¼‰</center><p>æ­¤æ—¶æˆ‘ä»¬é€‰ä¸­è·ç¦»<code>Uninterruptible Sleep</code>æœ€è¿‘çš„<code>Runnable</code>ï¼Œä»å›¾åå…­çš„<code>Slice Details</code>ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ<code>NetworkKit-GRS_</code>çº¿ç¨‹å ç”¨äº† CPUï¼Œè¿™é‡Œéœ€è¦åšä¼˜åŒ–ã€‚</p><h4 id="4-1-3ã€Lock-contention-on-InternTable-lock"><a href="#4-1-3ã€Lock-contention-on-InternTable-lock" class="headerlink" title="4.1.3ã€Lock contention on InternTable lock"></a>4.1.3ã€Lock contention on InternTable lock</h4><p><code>Lock contention on [xxx]</code>çš„ç±»å‹æ¯”è¾ƒå¤šï¼Œéƒ½å±äºé”æ“ä½œï¼Œåœ¨ App å¯åŠ¨è¿‡ç¨‹ä¸­æˆ–è€…é¡µé¢æ“ä½œè¿‡ç¨‹ä¸­éå¸¸å¸¸è§ï¼Œå¦‚å›¾åä¸ƒæ‰€ç¤ºï¼Œå‘ç°æŸä¸ª Trace è€—æ—¶è¾ƒé•¿æ—¶ï¼Œå•ç‹¬é€‰ä¸­è¯¥æ®µ Traceï¼Œåœ¨ Slices ä¸­ä¼šåˆ—å‡ºå­ Trace æ®µåˆ—è¡¨ï¼Œå¯ä»¥æ›´å¥½çš„çœ‹å‡ºè€—æ—¶ Traceã€‚</p><p>ç±»ä¼¼<code>Lock contention on InternTable lock</code>çš„æ¸²æŸ“å¸§ä¼šå½±å“é¡µé¢æµç•…æ€§ï¼Œé€ æˆ App å¡é¡¿ï¼Œå¦‚å›¾äºŒåä¸€æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="17.gif"  ><br/>ï¼ˆå›¾äºŒåä¸€ï¼‰</center><h3 id="4-2ã€ä½¿ç”¨-SQL-èšåˆåˆ†æ"><a href="#4-2ã€ä½¿ç”¨-SQL-èšåˆåˆ†æ" class="headerlink" title="4.2ã€ä½¿ç”¨ SQL èšåˆåˆ†æ"></a>4.2ã€ä½¿ç”¨ SQL èšåˆåˆ†æ</h3><p>å®˜ç½‘æ–‡æ¡£ï¼š</p><ul><li>å¸¸è§æŸ¥è¯¢ï¼š<a class="link"   href="https://perfetto.dev/docs/analysis/common-queries" >https://perfetto.dev/docs/analysis/common-queries<i class="fas fa-external-link-alt"></i></a></li><li>è¯­æ³•ï¼š<a class="link"   href="https://perfetto.dev/docs/analysis/perfetto-sql-syntax" >https://perfetto.dev/docs/analysis/perfetto-sql-syntax<i class="fas fa-external-link-alt"></i></a></li><li>è¡¨å­—æ®µä»‹ç»ï¼š<a class="link"   href="https://perfetto.dev/docs/analysis/sql-tables" >https://perfetto.dev/docs/analysis/sql-tables<i class="fas fa-external-link-alt"></i></a>ã€‚</li></ul><p>ä½¿ç”¨å›¾å½¢ç•Œé¢åªèƒ½ä¸€ä¸ªä¸ª Case å…·ä½“åˆ†æï¼Œå½“æˆ‘ä»¬æ¢³ç†å‡ºå…·ä½“çš„å¤šä¸ª Cas æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦æ‹¿åˆ°èšåˆæ•°æ®ç»™å¯¹åº”åŒäº‹åšä¼˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ SQL æŸ¥è¯¢ã€‚</p><p>ä¾‹å¦‚ï¼Œç»Ÿè®¡åä¸º<code>renderConvertView[smart_ui_jiangliu]</code>çš„ Trace çš„å¹³å‡è€—æ—¶ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> name, <span class="built_in">AVG</span>(dur)<span class="operator">/</span><span class="number">1000</span> <span class="keyword">AS</span> dur <span class="keyword">FROM</span> slice <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;renderConvertView[smart_ui_jiangliu]&#x27;</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> name</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚å›¾äºŒåäºŒæ‰€ç¤ºï¼š</p><center><img   width="90%"   src="18.png"  ><br/>ï¼ˆå›¾äºŒåäºŒï¼‰</center><p>ä¾‹å¦‚ï¼Œç»Ÿè®¡åä¸º<code>Lock contention on thread list lock (owner tid: 4054)</code>çš„ Traceï¼Œå¹¶æŒ‰ç…§è€—æ—¶é™åºæ’åºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ts, dur, name <span class="keyword">FROM</span> slice <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;read from memory&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> dur <span class="keyword">DESC</span></span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚å›¾äºŒåä¸‰æ‰€ç¤ºï¼š</p><center><img   width="90%"   src="19.png"  ><br/>ï¼ˆå›¾äºŒåä¸‰ï¼‰</center><h2 id="5ã€ç»“è¯­"><a href="#5ã€ç»“è¯­" class="headerlink" title="5ã€ç»“è¯­"></a>5ã€ç»“è¯­</h2><p>æœ¬æ–‡ä»‹ç»äº† Perfetto é…ç½®ç”Ÿæˆã€æŠ“å– Traceã€ä½¿ç”¨ Perfetto UI åˆ†æ Trace ä¸‰å—å†…å®¹ã€‚åœ¨ Trace åˆ†ææ—¶ä¸»è¦ä»‹ç»äº†åŸºäº CPU çš„åˆ†æï¼Œæ²¡æœ‰ä»‹ç» GPUã€å†…å­˜ã€ç”µé‡åˆ†æçš„ç»†èŠ‚ï¼Œå› ä¸ºæ—¥å¸¸å·¥ä½œä¸­æœ¬äººç”¨çš„ä¸æ˜¯å¾ˆå¤šï¼Œæ‰€ä»¥æš‚æ—¶å†™ä¸äº†å°±ä¸è¯¯å¯¼è¯»è€…äº†ï¼Œæœ‰æœºä¼šå†è¡¥å……ä¸€ç¯‡æ–‡ç« ã€‚</p><p>æœ¬æ–‡ä»‹ç»çš„å†…å®¹æ˜¯ä¸åˆ°å®˜ç½‘çš„ 1&#x2F;3 çš„ï¼Œä½†æ˜¯ä¸€äº›ç»†èŠ‚ä¹Ÿæ˜¯å®˜ç½‘æ²¡æœ‰çš„ï¼Œå¾ˆå¤šäººåœ¨å®æ“æ—¶å°±å¡åœ¨è¿™äº›ç»†èŠ‚ä¸Šï¼Œè¿™ä¹Ÿæ˜¯æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„åŸå› ã€‚</p><p>æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥åŠ æˆ‘çš„ QQ äº¤æµç¾¤ï¼š<a class="link"   href="https://qm.qq.com/cgi-bin/qm/qr?k=6RdPw9r9yT8nqjEuKJkA-2kHmHwDCVXY&jump_from=webapi&authKey=bBM/fnWLYuyhTSkKofUYaNLQUlMkRuH+fIx7lF6/pkeYylo4MZQxbt0mJKqJo5rq" >46523908<i class="fas fa-external-link-alt"></i></a>ã€‚</p><p>æœ¬æ–‡å®Œï¼Œæ„Ÿè°¢é˜…è¯»ã€‚</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;æœ¬äººç”¨ Perfetto å¿« 2 å¹´äº†ï¼Œå…¬å¸ä¸€äº›åŒäº‹å’Œç½‘å‹éƒ½æ¥å’¨è¯¢è¿‡ä½¿ç”¨å§¿åŠ¿ï¼Œæœ¬äººåªèƒ½æŠŠè‡ªå·±ä¸€ä¸ªç•¥æ˜¾ç²—ç³™ç‚¹çš„ç¬”è®°å‘ç»™åŒäº‹ï¼Œæœ‰ç‚¹ä¸å¤Ÿç»†èŠ‚å’Œä¸å¤Ÿæ·±åº¦ï¼Œäºæ˜¯è¶ç€æ¸…æ˜å‡æœŸï¼Œæˆ‘æŠŠç»éªŒæ€»ç»“æˆä¸€ç¯‡åšå®¢ï¼Œç»“åˆ Perfetto å®˜ç½‘èµ„æ–™å–é•¿è¡¥çŸ­å°½é‡åšåˆ°æ·±å…¥æµ…å‡ºã€‚&lt;/p&gt;</summary>
    
    
    
    <category term="Android" scheme="https://www.yanzhenjie.com/categories/Android/"/>
    
    <category term="æ€§èƒ½ä¼˜åŒ–" scheme="https://www.yanzhenjie.com/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    
    
    <category term="Prefetto" scheme="https://www.yanzhenjie.com/tags/Prefetto/"/>
    
  </entry>
  
  <entry>
    <title>äººå·¥æ™ºèƒ½|GPUåŠ é€ŸPyTorchè®­ç»ƒ</title>
    <link href="https://www.yanzhenjie.com/post/20240313/52aafdd7288f/"/>
    <id>https://www.yanzhenjie.com/post/20240313/52aafdd7288f/</id>
    <published>2024-03-13T13:20:19.000Z</published>
    <updated>2024-12-21T14:20:18.379Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1ã€GPU-çš„å¹¶è¡Œè®¡ç®—"><a href="#1ã€GPU-çš„å¹¶è¡Œè®¡ç®—" class="headerlink" title="1ã€GPU çš„å¹¶è¡Œè®¡ç®—"></a>1ã€GPU çš„å¹¶è¡Œè®¡ç®—</h2><p>æˆ‘åœ¨<a class="link"   href="https://yanzhenjie.blog.csdn.net/article/details/136435820" >äººå·¥æ™ºèƒ½|å„åç§°ä¸æ¦‚å¿µä¹‹ä»‹ç»<i class="fas fa-external-link-alt"></i></a>ä¸€æ–‡ä¸­æåˆ°è¿‡ï¼Œæ·±åº¦å­¦ä¹ æ˜¯ç›®å‰æœ€ä¸»æµçš„äººå·¥æ™ºèƒ½ç®—æ³•ï¼Œä»è¿‡ç¨‹æ¥çœ‹ï¼Œå®ƒåŒ…æ‹¬è®­ç»ƒï¼ˆTrainingï¼‰å’Œæ¨ç†ï¼ˆInferenceï¼‰ä¸¤ä¸ªç¯èŠ‚ã€‚</p><p>åœ¨è®­ç»ƒç¯èŠ‚ï¼Œé€šè¿‡æŠ•å–‚å¤§é‡çš„æ•°æ®ï¼Œè®­ç»ƒå‡ºä¸€ä¸ªå¤æ‚çš„ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚åœ¨æ¨ç†ç¯èŠ‚ï¼Œåˆ©ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œä½¿ç”¨å¤§é‡æ•°æ®æ¨ç†å‡ºå„ç§ç»“è®ºã€‚</p><p>è®­ç»ƒç¯èŠ‚ç”±äºæ¶‰åŠæµ·é‡çš„è®­ç»ƒæ•°æ®å’Œå¤æ‚çš„æ·±åº¦ç¥ç»ç½‘ç»œç»“æ„ï¼Œæ‰€ä»¥è®¡ç®—è§„æ¨¡éå¸¸åºå¤§ï¼Œå¯¹èŠ¯ç‰‡çš„ç®—åŠ›æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜ã€‚è€Œæ¨ç†ç¯èŠ‚ï¼Œå¯¹ç®€å•æŒ‡å®šçš„é‡å¤è®¡ç®—å’Œå®æ—¶æ€§è¦æ±‚å¾ˆé«˜ã€‚æ¨¡å‹æ‰€é‡‡ç”¨çš„å…·ä½“ç®—æ³•ï¼ŒåŒ…æ‹¬çŸ©é˜µç›¸ä¹˜ã€å…¨è¿æ¥å±‚ã€å·ç§¯å±‚ã€æ± åŒ–å±‚ã€æ¿€æ´»å±‚ã€æ‰¹å½’ä¸€åŒ–å±‚å’Œæ¢¯åº¦è¿ç®—ç­‰ï¼Œåˆ†è§£ä¸ºå¤§é‡å¹¶è¡Œä»»åŠ¡ï¼Œå¯ä»¥æœ‰æ•ˆç¼©çŸ­ä»»åŠ¡å®Œæˆçš„æ—¶é—´ã€‚</p><p>æ€»ä¹‹ï¼Œæˆ‘æƒ³è¯´æ˜çš„æ˜¯ï¼š<strong>ç¥ç»ç½‘ç»œæ¨¡å‹çš„è®­ç»ƒéœ€è¦åºå¤§çš„ç®—åŠ›</strong>ã€‚é‚£ä¹ˆå®ƒå’Œ GPU æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼ŸCPU åˆåœ¨åšä»€ä¹ˆï¼Ÿ</p><p><strong>ç†è§£ CPU çš„è§’è‰²</strong>ã€‚å¦‚æœæˆ‘ä»¬æŠŠå¤„ç†å™¨çœ‹æˆæ˜¯ä¸€ä¸ªé¤å…çš„è¯ï¼ŒCPU å°±åƒä¸€ä¸ªæ‹¥æœ‰å‡ ååé«˜çº§å¨å¸ˆçš„å…¨èƒ½å‹é¤å…ï¼Œå®ƒä»€ä¹ˆèœç³»çš„èœéƒ½èƒ½åšã€‚ä½†æ˜¯å› ä¸ºèœç³»ä¼—å¤šã€å·¥åºå¤æ‚å’Œå¨å¸ˆè¾ƒå°‘ï¼Œæ‰€ä»¥éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´åè°ƒå’Œé…èœï¼Œä¸Šèœçš„é€Ÿåº¦ç›¸å¯¹æ¯”è¾ƒæ…¢ã€‚</p><p><strong>ç†è§£ GPU çš„è§’è‰²</strong>ã€‚å¦‚æœæˆ‘ä»¬æŠŠå¤„ç†å™¨çœ‹æˆæ˜¯ä¸€ä¸ªé¤å…çš„è¯ï¼ŒGPU å°±åƒä¸€ä¸ªæ‹¥æœ‰åƒä¸‡ååˆçº§å¨å¸ˆçš„å•ä¸€å‹é¤å…ï¼Œå®ƒåªé€‚åˆåšæŸç§æŒ‡å®šèœç³»çš„èœã€‚ä½†æ˜¯å› ä¸ºèœç³»å•ä¸€ã€å·¥åºç®€å•å’Œå¨å¸ˆè¾ƒå¤šï¼Œæ‰€ä»¥ä»…éœ€è¦å°‘é‡æ—¶é—´é€šçŸ¥ä»»æ„ä¸€ä¸ªå¨å¸ˆåšèœï¼Œä¸Šèœé€Ÿåº¦åè€Œå¿«ã€‚</p><center><img     src="1.png"  ></img></br>ï¼ˆå›¾ä¸€ï¼‰</center><p>å¦‚å›¾ä¸€æ‰€ç¤ºï¼Œå·¦ä¾§ä¸º CPU è§’è‰²ï¼Œå³ä¾§ä¸º GPU è§’è‰²ã€‚GPU å‡­å€Ÿè‡ªèº«å¼ºæ‚çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ä»¥åŠå†…å­˜å¸¦å®½ï¼Œå¯ä»¥å¾ˆå¥½åœ°åº”å¯¹è®­ç»ƒå’Œæ¨ç†ä»»åŠ¡ï¼Œå·²ç»æˆä¸ºä¸šç•Œåœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸçš„é¦–é€‰è§£å†³æ–¹æ¡ˆã€‚å¦‚æœå¯¹æ¨¡å‹è¿›è¡Œåˆç†ä¼˜åŒ–ï¼Œä¸€å— GPU å¯ä»¥æä¾›ç›¸å½“äºå‡ åå— CPU çš„ç®—åŠ›ã€‚</p><blockquote><p>æœ¬å°èŠ‚å†…å®¹å¼•ç”¨è‡ªï¼ˆæœ‰å¤§é‡ä¿®æ”¹ï¼Œä¾µåˆ ï¼‰ï¼š<a class="link"   href="https://www.toutiao.com/article/7319434384707158562" >https://www.toutiao.com/article/7319434384707158562<i class="fas fa-external-link-alt"></i></a></p></blockquote><h2 id="2ã€CUDA-å’Œ-MPS"><a href="#2ã€CUDA-å’Œ-MPS" class="headerlink" title="2ã€CUDA å’Œ MPS"></a>2ã€CUDA å’Œ MPS</h2><p><code>torch.cuda</code>å’Œ<code>torch.mps</code>æ˜¯ PyTorch ä¸­çš„ 2 ä¸ªä¸åŒçš„æ¨¡å—ï¼Œç”¨äºåŠ é€Ÿ PyTorch è®­ç»ƒã€‚å¼€å‘è€…åœ¨å®‰è£… PyTorch æ—¶å°±éœ€è¦æ³¨æ„å®‰è£…æ­£ç¡®çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬è¿›å…¥å®˜ç½‘åå¯ä»¥çœ‹åˆ°æœ¬åœ°éƒ¨ç½²å¼•å¯¼ï¼Œå¹¶ä¸”ä¼šé»˜è®¤é€‰ä¸­æ˜¯å’Œæˆ‘ä»¬ç”µè„‘çš„ç‰ˆæœ¬å¹¶ç»™å‡ºå®‰è£…å‘½ä»¤æˆ–è€…å®‰è£…åŒ…åœ°å€ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨é¼ æ ‡ç‚¹å‡»é€‰æ‹©è‡ªå·±æƒ³è¦å®‰è£…çš„ç‰ˆæœ¬ï¼ˆç³»ç»Ÿã€åŒ…ç®¡ç†ã€è¯­è¨€ã€è®¡ç®—å¹³å°ï¼‰ï¼š</p><center><img     src="2.gif"  ></img></br>ï¼ˆå›¾äºŒï¼‰</center><p>æ¯”å¦‚æœ¬äººä½¿ç”¨çš„ç”µè„‘ä¸º MBP M2ï¼Œå¯ä»¥é€‰æ‹©ç¨³å®šç‰ˆ PyTorchã€MacOSã€Pipã€Pythonã€è®¡ç®—å¹³å°ä¸º Defaultï¼Œå‡ºç»™å‡ºå®‰è£…å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install torch torchvision torchaudio</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMBP M èŠ¯ç‰‡ç³»åˆ—çš„ç”µè„‘ï¼Œè®¡ç®—å¹³å°ä¸­ CUDA ä¼šè¢«ç”»æ¨ªçº¿ï¼Œä¸èƒ½é€‰æ‹©ï¼Œå¦‚æœå¼ºè¡Œé€‰æ‹©åˆ™ä¸èƒ½å®‰è£…ã€‚</p><ul><li>å®˜ç½‘åœ°å€ï¼š<a class="link"   href="https://pytorch.org/get-started/locally/" >https://pytorch.org/get-started/locally/<i class="fas fa-external-link-alt"></i></a></li><li>å­˜æ¡£ç‰ˆæœ¬ï¼š<a class="link"   href="https://pytorch.org/get-started/previous-versions" >https://pytorch.org/get-started/previous-versions<i class="fas fa-external-link-alt"></i></a></li></ul><h3 id="2-1ã€é-M-èŠ¯ç‰‡éªŒè¯-CUDA-å¯ç”¨æ€§"><a href="#2-1ã€é-M-èŠ¯ç‰‡éªŒè¯-CUDA-å¯ç”¨æ€§" class="headerlink" title="2.1ã€é M èŠ¯ç‰‡éªŒè¯ CUDA å¯ç”¨æ€§"></a>2.1ã€é M èŠ¯ç‰‡éªŒè¯ CUDA å¯ç”¨æ€§</h3><p>å¦‚æœæ˜¯é M ç³»åˆ—èŠ¯ç‰‡çš„ç”µè„‘ï¼ˆOS Xã€Linuxã€Windowï¼‰ï¼Œå®‰è£…å‘½ä»¤å¤§æ¦‚ç‡æ˜¯åŒ…å« cadu çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda install pytorch torchvision torchaudio pytorch-cuda=11.8 -c pytorch</span><br><span class="line"></span><br><span class="line">conda install pytorch torchvision torchaudio cudatoolkit -c pytorch</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥ç›´æ¥éªŒè¯ GPU çŠ¶æ€æ˜¯å¦æ­£å¸¸å¯ç”¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">torch.cuda.is_available()</span><br></pre></td></tr></table></figure><p>å¦‚æœæ­£å¸¸å¯ç”¨ï¼Œå°†è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">True</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸æ­£å¸¸ï¼Œå°†è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">False</span><br></pre></td></tr></table></figure><p><code>torch.cuda</code>çš„è¯¦ç»† API æ–‡æ¡£ï¼š<a class="link"   href="https://pytorch.org/docs/master/cuda.html" >https://pytorch.org/docs/master/cuda.html<i class="fas fa-external-link-alt"></i></a></p><h3 id="2-2ã€M-èŠ¯ç‰‡éªŒè¯-MPS-å¯ç”¨æ€§"><a href="#2-2ã€M-èŠ¯ç‰‡éªŒè¯-MPS-å¯ç”¨æ€§" class="headerlink" title="2.2ã€M èŠ¯ç‰‡éªŒè¯ MPS å¯ç”¨æ€§"></a>2.2ã€M èŠ¯ç‰‡éªŒè¯ MPS å¯ç”¨æ€§</h3><p>å¦‚æœæ˜¯ M ç³»åˆ—èŠ¯ç‰‡ï¼Œé‚£ä¹ˆæ˜¯æ— æ³•å®‰è£… CUDA çš„ï¼š</p><center><img     src="3.png"  ></img></br>ï¼ˆå›¾ä¸‰ï¼‰</center><p>å¾ˆæ—©ä¹‹å‰ï¼ŒPyTorch æ˜¯ä¸æ”¯æŒ M èŠ¯ç‰‡çš„ã€‚æˆ‘æŸ¥äº†ä¸‹ç›¸å…³ä¿¡æ¯ï¼Œæ‰¾åˆ° soumith åœ¨ PyTorch é¡¹ç›®ä¸‹è®¨è®ºè¿‡å¯¹ GPU åŠ é€Ÿçš„æ”¯æŒï¼š<a class="link"   href="https://github.com/pytorch/pytorch/issues/47702" >https://github.com/pytorch/pytorch/issues/47702<i class="fas fa-external-link-alt"></i></a>ï¼Œ2020 å¹´ 10 æœˆçš„å›ç­”ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥çœ‹çœ‹ã€‚</p><p>åœ¨ 2022 å¹´ 5 æœˆ 18 æ—¥ï¼ŒPyTorch å‘å¸ƒåšå®¢è¯´ PyTorch v1.12 ç‰ˆæœ¬æ”¯æŒäº† Mac OS çš„ GPU åŠ é€Ÿï¼š<a class="link"   href="https://pytorch.org/blog/introducing-accelerated-pytorch-training-on-mac/" >https://pytorch.org/blog/introducing-accelerated-pytorch-training-on-mac/<i class="fas fa-external-link-alt"></i></a>ã€‚</p><p>è‹¹æœçš„ MPSï¼ˆMetal Performance Shadersï¼‰æ‰©å±•äº† PyTorch æ¡†æ¶ï¼Œå¯ä»¥ä½œä¸º PyTorch çš„åç«¯åŠ é€Ÿ GPU è®­ç»ƒï¼Œå®ƒæä¾›äº†åœ¨ Mac ä¸Šè®¾ç½®å’Œè¿è¡Œæ“ä½œçš„è„šæœ¬å’ŒåŠŸèƒ½ï¼ŒMPS é€šè¿‡é’ˆå¯¹æ¯ä¸ª Metal GPU ç³»åˆ—çš„ç‹¬ç‰¹ç‰¹æ€§è¿›è¡Œäº†å¾®è°ƒçš„å†…æ ¸æ¥ä¼˜åŒ–è®¡ç®—æ€§èƒ½ã€‚</p><p>å¦‚æœä½ å®‰è£…çš„ PyTorch çš„ç‰ˆæœ¬æ˜¯å¤§äºç­‰äº v1.12 çš„ï¼Œé‚£ä¹ˆé»˜è®¤å°±æ”¯æŒåŠ é€Ÿ PyTorch è®­ç»ƒçš„ã€‚</p><p>æ­¤æ—¶å¯ä»¥ç›´æ¥éªŒè¯ GPU çŠ¶æ€æ˜¯å¦æ­£å¸¸å¯ç”¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line">torch.backends.mps.is_available()</span><br></pre></td></tr></table></figure><p>å¦‚æœæ­£å¸¸å¯ç”¨ï¼Œæ­¤æ—¶å°†è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">True</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸æ­£å¸¸ï¼Œæ­¤æ—¶å°†è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">False</span><br></pre></td></tr></table></figure><p><code>torch.mps</code>çš„è¯¦ç»† API æ–‡æ¡£ï¼š</p><ul><li><a class="link"   href="https://pytorch.org/docs/master/mps.html" >https://pytorch.org/docs/master/mps.html<i class="fas fa-external-link-alt"></i></a></li><li><a class="link"   href="https://pytorch.org/docs/master/notes/mps.html" >https://pytorch.org/docs/master/notes/mps.html<i class="fas fa-external-link-alt"></i></a></li></ul><h2 id="3ã€CPU-å’Œ-GPU-çš„åˆ‡æ¢"><a href="#3ã€CPU-å’Œ-GPU-çš„åˆ‡æ¢" class="headerlink" title="3ã€CPU å’Œ GPU çš„åˆ‡æ¢"></a>3ã€CPU å’Œ GPU çš„åˆ‡æ¢</h2><p>é¦–å…ˆéœ€è¦ç¡®å®šåœ¨è®¾å¤‡ä¸Šæœ‰ 1 ä¸ªæˆ–è€…å¤šä¸ª GPU å¯ç”¨ï¼Œåœ¨ 2 ä¸­æˆ‘ä»¬å·²ç»ç¡®è®¤è¿‡äº†ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„æ•°æ®è½¬ç§»åˆ° GPU å¯ä»¥çœ‹åˆ°çš„åœ°æ–¹ï¼Œæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ CPU åšè®¡ç®—é çš„æ˜¯ RAMï¼ŒGPU åšè®¡ç®—é çš„æ˜¯ VRAMï¼ˆVideo Random Access Memoryï¼‰ï¼ŒVRAM æ˜¯ GPU çš„ä¸“ç”¨å†…å­˜ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥è¯´æŠŠæ•°æ®ç§»åŠ¨åˆ° GPU è¿æ¥çš„å†…å­˜ï¼Œæˆ–è€…ç®€ç§°æŠŠæ•°æ®ç§»åŠ¨åˆ° GPUã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºå¼ é‡æ˜¯åœ¨ CPU è®¾å¤‡ä¸Šçš„ï¼ˆæ‰“å°å¼ é‡æ—¶ï¼Œé€šè¿‡å¼ é‡çš„å±æ€§å¯ä»¥çœ‹åˆ°ï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"></span><br><span class="line">x = torch.Tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="built_in">print</span>(x, x.device)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥çœ‹åˆ°è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tensor([1., 2., 3.]) cpu</span><br></pre></td></tr></table></figure><p>ä»¥<code>torch.rand()</code>å‡½æ•°ä¸ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬äº‹å…ˆçŸ¥é“æ­¤æ—¶ GPU çš„å¯ç”¨çŠ¶æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥åˆ›å»ºå³å¯ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> torch.cuda.is_available():</span><br><span class="line">    my_device = torch.device(<span class="string">&#x27;cuda&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> torch.backends.mps.is_available():</span><br><span class="line">    my_device = torch.device(<span class="string">&#x27;mps&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    my_device = torch.device(<span class="string">&#x27;cpu&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Device: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(my_device))</span><br><span class="line"></span><br><span class="line">x = torch.rand(<span class="number">2</span>, <span class="number">2</span>, device=my_device)</span><br><span class="line"><span class="built_in">print</span>(x)</span><br></pre></td></tr></table></figure><p>å¦‚æœ GPU æ”¯æŒ<code>cuda</code>ï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Device: cuda</span><br><span class="line">tensor([[0.0024, 0.6778],</span><br><span class="line">        [0.2441, 0.6812]], device=<span class="string">&#x27;cuda:0&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å¦‚æœ GPU æ”¯æŒ<code>mps</code>ï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Device: mps</span><br><span class="line">tensor([[0.5986, 0.4086],</span><br><span class="line">        [0.0624, 0.7131]], device=<span class="string">&#x27;mps:0&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œæ¯æ¬¡å†™ä¸€å †<code>if else</code>ä¼šæ„Ÿè§‰æ¯”è¾ƒè´¹åŠ²ï¼Œå¯ä»¥ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ç®€å†™å®ƒä»¬ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">device_name = (</span><br><span class="line">    <span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;mps&quot;</span></span><br><span class="line">    <span class="keyword">if</span> torch.backends.mps.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">print</span>(device_name)</span><br></pre></td></tr></table></figure><p>OKï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>.to</code>å‡½æ•°è®©å¼ é‡åœ¨ CPU å’Œ GPU ä¹‹é—´è¿›è¡Œåˆ‡æ¢äº†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆæ‹¿åˆ°å¤„ç†å™¨åç§°</span></span><br><span class="line">device_name = (</span><br><span class="line">    <span class="string">&quot;cuda&quot;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&quot;mps&quot;</span></span><br><span class="line">    <span class="keyword">if</span> torch.backends.mps.is_available() <span class="keyword">else</span> <span class="string">&quot;cpu&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜å¤„ç†å™¨</span></span><br><span class="line">cpu_device = torch.device(<span class="string">&quot;cpu&quot;</span>)</span><br><span class="line">gpu_device = torch.device(device_name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å£°æ˜å¼ é‡</span></span><br><span class="line">x = torch.Tensor([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°CPU</span></span><br><span class="line">x = x.to(cpu_device)</span><br><span class="line"><span class="built_in">print</span>(x, x.device)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°GPU</span></span><br><span class="line">x = x.to(gpu_device)</span><br><span class="line"><span class="built_in">print</span>(x, x.device)</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å¯ä»¥çœ‹åˆ°è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tensor([1., 2., 3.]) cpu</span><br><span class="line">tensor([1., 2., 3.], device=<span class="string">&#x27;mps:0&#x27;</span>) mps:0</span><br></pre></td></tr></table></figure><p>PyTorch å®˜ç½‘ä¸€ä¸ªå¾ˆè€çš„æ–‡æ¡£ï¼Œä½†ä¸åŠæœ¬æ–‡æ–°ï¼š<a class="link"   href="https://pytorch.org/tutorials/beginner/introyt/tensors_deeper_tutorial.html#moving-to-gpu" >https://pytorch.org/tutorials/beginner/introyt/tensors_deeper_tutorial.html#moving-to-gpu<i class="fas fa-external-link-alt"></i></a></p><p>æœ‰å…´è¶£ä¸€èµ·äº¤æµå­¦ä¹ çš„ï¼Œå¯ä»¥åŠ æˆ‘çš„QQç¾¤ï¼š874450808</p><p>æœ¬æ–‡å®Œï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1ã€GPU-çš„å¹¶è¡Œè®¡ç®—&quot;&gt;&lt;a href=&quot;#1ã€GPU-çš„å¹¶è¡Œè®¡ç®—&quot; class=&quot;headerlink&quot; title=&quot;1ã€GPU çš„å¹¶è¡Œè®¡ç®—&quot;&gt;&lt;/a&gt;1ã€GPU çš„å¹¶è¡Œè®¡ç®—&lt;/h2&gt;&lt;p&gt;æˆ‘åœ¨&lt;a class=&quot;link&quot;   href=&quot;https://</summary>
      
    
    
    
    <category term="äººå·¥æ™ºèƒ½" scheme="https://www.yanzhenjie.com/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
    
    <category term="PyTorch" scheme="https://www.yanzhenjie.com/tags/PyTorch/"/>
    
  </entry>
  
  <entry>
    <title>äººå·¥æ™ºèƒ½|å„åç§°ä¸æ¦‚å¿µè®¤è¯†</title>
    <link href="https://www.yanzhenjie.com/post/20240304/287dcf5e8988/"/>
    <id>https://www.yanzhenjie.com/post/20240304/287dcf5e8988/</id>
    <published>2024-03-04T13:22:23.000Z</published>
    <updated>2024-12-21T14:21:39.574Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>é€‚è½è‹è€…ï¼Œä¸‰é¤è€Œåï¼Œè…¹çŠ¹æœç„¶ï¼›é€‚ç™¾é‡Œè€…ï¼Œå®¿èˆ‚ç²®ï¼›é€‚åƒé‡Œè€…ï¼Œä¸‰æœˆèšç²®ã€‚<br>â€”â€”åº„å‘¨ã€Šé€é¥æ¸¸ã€‹</p></blockquote><p>ä¸Šæ–‡å¼•ç”¨äº†æˆ˜å›½ä¸­æœŸå…ˆç§¦é“å®¶å­¦æ´¾çš„ä»£è¡¨äººç‰©åº„å­çš„é€é¥æ¸¸é€‰æ®µï¼Œç¿»è¯‘ä¸ºç™½è¯æ–‡å¤§è‡´å«ä¹‰æ˜¯ï¼šåˆ°è¿‘éƒŠå»çš„äººï¼Œåªå¸¦å½“å¤©åƒçš„ä¸‰é¤ç²®é£Ÿï¼Œå›æ¥è‚šå­è¿˜æ˜¯é¥±é¥±çš„ï¼›åˆ°ç™¾é‡Œå¤–çš„äººï¼Œè¦ç”¨ä¸€æ•´å¤œæ—¶é—´èˆ‚ç±³å‡†å¤‡å¹²ç²®ï¼›åˆ°åƒé‡Œå¤–çš„äººï¼Œè¦ç”¨ä¸‰ä¸ªæœˆæ¥èšé›†ç²®è‰ã€‚</p><p>æˆ‘ç›¸ä¿¡ï¼Œçœ‹åˆ°è¿™ç¯‡æ–‡ç« çš„äººï¼Œä¸€å®šæ˜¯è‡´åƒé‡Œè€…ã€‚</p><p>æˆ‘æœ€æ—©æ¥è§¦äººå·¥æ™ºèƒ½ç›¸å…³æ¦‚å¿µçš„æ—¶å€™å¤§æ¦‚æ˜¯2019å¹´ï¼Œé‚£æ—¶Googleæ›´æ–°äº†TensorFlowï¼Œå½“æ—¶åˆ¤æ–­äººå·¥æ™ºèƒ½åœ¨æœªæ¥è‚¯å®šä¼šè¶Šæ¥è¶Šç«ï¼Œå°±å»ºäº†ä¸ªäººå·¥æ™ºèƒ½äº¤æµç¾¤ï¼Œæ²¡å‡ å¤©500äººçš„ç¾¤å°±æ»¡å‘˜äº†ã€‚</p><p>äºæ˜¯ï¼Œæˆ‘ä»¬å¼€å§‹å…¥é—¨äº†ã€‚åˆšå…¥é—¨çš„æ—¶å€™é‡åˆ°äº†å¾ˆå¤šä¸äººå·¥æ™ºèƒ½ç›¸å…³çš„æ¦‚å¿µï¼Œéƒ½ä¸å¤ªäº†è§£ä»€ä¹ˆæ„æ€ï¼Œå­¦ä¹ æ—¶è„‘è¢‹å°±æ¯”è¾ƒæ··ä¹±ï¼Œå¹¸å¥½æˆ‘åœ¨CSé¢†åŸŸæœ‰å¤šå¹´æ·±è€•ç»éªŒï¼ŒçŸ¥é“å…¥é—¨ä¸€ä¸ªæ–°é¢†åŸŸæ—¶æœ€å¥½æ˜¯å¯¹å…¶æœ‰å®è§‚çš„è®¤è¯†ï¼Œç„¶åå†æœ‰è®¡åˆ’çš„å­¦ä¹ ç»†åˆ†é¢†åŸŸã€‚è¿™ä¹Ÿæ˜¯æˆ‘å‘è¿™ç¯‡æ–‡ç« çš„åŸå› ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©åˆ°åæ¥çš„å…¥é—¨è€…ã€‚</p><h2 id="1ã€äººå·¥æ™ºèƒ½ç›¸å…³æ¦‚å¿µ"><a href="#1ã€äººå·¥æ™ºèƒ½ç›¸å…³æ¦‚å¿µ" class="headerlink" title="1ã€äººå·¥æ™ºèƒ½ç›¸å…³æ¦‚å¿µ"></a>1ã€äººå·¥æ™ºèƒ½ç›¸å…³æ¦‚å¿µ</h2><p>å…³äºäººå·¥æ™ºèƒ½çš„å‘å±•å†å²å°±ä¸å†ä»‹ç»äº†ï¼Œä»äººå·¥æ™ºèƒ½çš„å®šä¹‰å’Œå†å²å‘å±•æ¥çœ‹ï¼Œå®ƒæ˜¯ä¸€é—¨å†…å®¹å¹¿æ³›çš„å­¦ç§‘ã€‚å› æ­¤ï¼Œåœ¨æ—¥å¸¸äº¤æµä¸­ï¼Œå¤§å®¶å¸¸å¸¸å­˜åœ¨å°†äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ã€ç›‘ç£å­¦ä¹ ã€å¼ºåŒ–å­¦ä¹ ã€ä¸»åŠ¨å­¦ä¹ ç­‰æ··ç”¨çš„æƒ…å†µã€‚</p><p>å®é™…ä¸Šï¼Œæœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒèƒ½å¤Ÿä»æ•°æ®ä¸­è‡ªåŠ¨åˆ†æè·å¾—è§„å¾‹ï¼Œå¯¹æœªçŸ¥æ•°æ®è¿›è¡Œé¢„æµ‹ã€‚è€Œäººå·¥ç¥ç»ç½‘ç»œåˆ™æ˜¯äººç±»æ¨¡ä»¿ç”Ÿç‰©ç¥ç»ç½‘ç»œçš„ç»“æ„å’ŒåŠŸèƒ½æä¾›çš„ä¸€ç§è®¡ç®—æ¨¡å‹ï¼Œå±äºæœºå™¨å­¦ä¹ ç®—æ³•çš„ä¸€ç§ã€‚2012å¹´ï¼ŒAlexNetè·å¾—ImageNetæŒ‘æˆ˜èµ›å† å†›åï¼Œæ·±åº¦å­¦ä¹ å°±æˆä¸ºäº†çƒ­é—¨çš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚</p><h3 id="1-1ã€äººå·¥æ™ºèƒ½çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ"><a href="#1-1ã€äººå·¥æ™ºèƒ½çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ" class="headerlink" title="1.1ã€äººå·¥æ™ºèƒ½çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ"></a>1.1ã€äººå·¥æ™ºèƒ½çš„å‡ ä¸ªé‡è¦æ¦‚å¿µ</h3><h4 id="1-1-1ã€ç›‘ç£å­¦ä¹ "><a href="#1-1-1ã€ç›‘ç£å­¦ä¹ " class="headerlink" title="1.1.1ã€ç›‘ç£å­¦ä¹ "></a>1.1.1ã€ç›‘ç£å­¦ä¹ </h4><p>ç›‘ç£å­¦ä¹ çš„ä»»åŠ¡æ˜¯å­¦ä¹ ä¸€ä¸ªæ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹å¯ä»¥å¤„ç†ä»»æ„çš„ä¸€ä¸ªè¾“å…¥ï¼Œå¹¶ä¸”é’ˆå¯¹æ¯ä¸ªè¾“å…¥éƒ½å¯ä»¥æ˜ å°„è¾“å‡ºä¸€ä¸ªé¢„æµ‹ç»“æœï¼Œè¿™é‡Œæ¨¡å‹å°±ç›¸å½“äºæ•°å­¦ä¸­ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥å°±ç›¸å½“äºæ•°å­¦ä¸­çš„<strong>X</strong>ï¼Œè€Œé¢„æµ‹çš„ç»“æœå°±ç›¸å½“äºæ•°å­¦ä¸­çš„<strong>Y</strong>ï¼Œå¯¹äºæ¯ä¸€ä¸ª<strong>X</strong>ï¼Œéƒ½å¯ä»¥é€šè¿‡ä¸€ä¸ªæ˜ å°„å‡½æ•°æ˜ å°„å‡ºä¸€ä¸ªç»“æœã€‚</p><h4 id="1-1-2ã€éç›‘ç£å­¦ä¹ "><a href="#1-1-2ã€éç›‘ç£å­¦ä¹ " class="headerlink" title="1.1.2ã€éç›‘ç£å­¦ä¹ "></a>1.1.2ã€éç›‘ç£å­¦ä¹ </h4><p>éç›‘ç£å­¦ä¹ æ˜¯æŒ‡ç›´æ¥å¯¹æ²¡æœ‰æ ‡è®°çš„è®­ç»ƒæ•°æ®è¿›è¡Œå»ºæ¨¡å­¦ä¹ ã€‚æ³¨æ„ï¼Œåœ¨è¿™é‡Œçš„æ•°æ®æ˜¯æ²¡æœ‰æ ‡è®°çš„æ•°æ®ï¼Œä¸ç›‘ç£å­¦ä¹ æœ€åŸºæœ¬çš„åŒºåˆ«ä¹‹ä¸€å°±æ˜¯å»ºæ¨¡çš„æ•°æ®æ˜¯å¦æœ‰æ ‡ç­¾ã€‚ä¾‹å¦‚èšç±»ï¼ˆå°†ç‰©ç†æˆ–æŠ½è±¡å¯¹è±¡çš„é›†åˆåˆ†æˆç”±ç±»ä¼¼çš„å¯¹è±¡ç»„æˆçš„å¤šä¸ªç±»çš„è¿‡ç¨‹ï¼‰å°±æ˜¯ä¸€ç§å…¸å‹çš„éç›‘ç£å­¦ä¹ ï¼Œåˆ†ç±»å°±æ˜¯ä¸€ç§å…¸å‹çš„ç›‘ç£å­¦ä¹ ã€‚</p><h4 id="1-1-3ã€åŠç›‘ç£å­¦ä¹ "><a href="#1-1-3ã€åŠç›‘ç£å­¦ä¹ " class="headerlink" title="1.1.3ã€åŠç›‘ç£å­¦ä¹ "></a>1.1.3ã€åŠç›‘ç£å­¦ä¹ </h4><p>å½“æœ‰æ ‡è®°çš„æ•°æ®å¾ˆå°‘ã€æœªè¢«æ ‡è®°çš„æ•°æ®å¾ˆå¤šï¼Œäººå·¥æ ‡è®°åˆæ¯”è¾ƒæ˜‚è´µæ—¶ï¼Œå¯ä»¥æ ¹æ®ä¸€äº›æ¡ä»¶ï¼ˆæŸ¥è¯¢ç®—æ³•ï¼‰æŸ¥è¯¢ä¸€äº›æ•°æ®ï¼Œè®©ä¸“å®¶è¿›è¡Œæ ‡è®°ï¼Œè¿™æ˜¯åŠç›‘ç£å­¦ä¹ ä¸å…¶ä»–ç®—æ³•çš„æœ¬è´¨åŒºåˆ«ã€‚æ‰€ä»¥è¯´å¯¹ä¸»åŠ¨å­¦ä¹ çš„ç ”ç©¶ä¸»è¦æ˜¯è®¾è®¡ä¸€ç§æ¡†æ¶æ¨¡å‹ï¼Œè¿ç”¨æ–°çš„æŸ¥è¯¢ç®—æ³•æŸ¥è¯¢éœ€è¦ä¸“å®¶æ¥äººå·¥æ ‡æ³¨çš„æ•°æ®ï¼Œæœ€åç”¨æŸ¥è¯¢åˆ°çš„æ ·æœ¬è®­ç»ƒåˆ†ç±»æ¨¡å‹æ¥æé«˜æ¨¡å‹çš„ç²¾ç¡®åº¦ã€‚</p><h4 id="1-1-4ã€ä¸»åŠ¨å­¦ä¹ "><a href="#1-1-4ã€ä¸»åŠ¨å­¦ä¹ " class="headerlink" title="1.1.4ã€ä¸»åŠ¨å­¦ä¹ "></a>1.1.4ã€ä¸»åŠ¨å­¦ä¹ </h4><p>å½“ä½¿ç”¨ä¸€äº›ä¼ ç»Ÿçš„ç›‘ç£å­¦ä¹ æ–¹æ³•åšåˆ†ç±»å¤„ç†æ—¶ï¼Œé€šå¸¸æ˜¯è®­ç»ƒæ ·æœ¬çš„è§„æ¨¡è¶Šå¤§ï¼Œåˆ†ç±»çš„æ•ˆæœå°±è¶Šå¥½ã€‚ä½†æ˜¯åœ¨ç°å®ä¸­çš„å¾ˆå¤šåœºæ™¯ä¸­ï¼Œæ ‡è®°æ ·æœ¬çš„è·å–æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œå› ä¸ºè¿™éœ€è¦é¢†åŸŸå†…çš„ä¸“å®¶æ¥è¿›è¡Œäººå·¥æ ‡æ³¨ï¼Œæ‰€èŠ±è´¹çš„æ—¶é—´æˆæœ¬å’Œç»æµæˆæœ¬éƒ½å¾ˆå¤§ã€‚è€Œä¸”ï¼Œå¦‚æœè®­ç»ƒæ ·æœ¬çš„è§„æ¨¡è¿‡äºåºå¤§ï¼Œåˆ™è®­ç»ƒèŠ±è´¹çš„æ—¶é—´ä¹Ÿä¼šæ¯”è¾ƒå¤šã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šæœ‰æ²¡æœ‰ä¸€ç§æœ‰æ•ˆåŠæ³•ï¼Œèƒ½å¤Ÿä½¿ç”¨è¾ƒå°‘çš„è®­ç»ƒæ ·æœ¬æ¥è·å¾—æ€§èƒ½è¾ƒå¥½çš„åˆ†ç±»å™¨å‘¢?ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä¸»åŠ¨å­¦ä¹ ï¼ˆActiveLearningï¼‰æä¾›äº†è¿™ç§å¯èƒ½ï¼Œä¸»åŠ¨å­¦ä¹ é€šè¿‡ä¸€å®šçš„ç®—æ³•æŸ¥è¯¢å‡ºæœ€æœ‰ç”¨çš„æœªæ ‡è®°æ ·æœ¬ï¼Œå¹¶äº¤ç”±ä¸“å®¶è¿›è¡Œæ ‡è®°ï¼Œç„¶åç”¨æŸ¥è¯¢åˆ°çš„æ ·æœ¬è®­ç»ƒåˆ†ç±»æ¨¡å‹æ¥æé«˜æ¨¡å‹çš„ç²¾ç¡®åº¦ã€‚</p><p>åœ¨äººç±»çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸åˆ©ç”¨å·²æœ‰çš„ç»éªŒæ¥å­¦ä¹ æ–°çš„çŸ¥è¯†ï¼Œåˆä¾é è·å¾—çš„çŸ¥è¯†æ¥æ€»ç»“å’Œç§¯ç´¯ç»éªŒï¼Œç»éªŒä¸çŸ¥è¯†ä¸æ–­äº¤äº’ã€‚åŒæ ·ï¼Œæœºå™¨å­¦ä¹ å°±æ˜¯æ¨¡æ‹Ÿäººç±»å­¦ä¹ çš„è¿‡ç¨‹ï¼Œåˆ©ç”¨å·²æœ‰çš„çŸ¥è¯†è®­ç»ƒå‡ºæ¨¡å‹å»è·å–æ–°çš„çŸ¥è¯†ã€‚å¹¶é€šè¿‡ä¸æ–­ç§¯ç´¯çš„ä¿¡æ¯å»ä¿®æ­£æ¨¡å‹ï¼Œä»¥å¾—åˆ°æ›´åŠ å‡†ç¡®æœ‰ç”¨çš„æ–°æ¨¡å‹ã€‚ä¸åŒäºè¢«åŠ¨åœ°æ¥å—çŸ¥è¯†ï¼Œä¸»åŠ¨å­¦ä¹ èƒ½å¤Ÿæœ‰é€‰æ‹©æ€§åœ°è·å–çŸ¥è¯†ã€‚</p><h3 id="1-2ã€æœºå™¨å­¦ä¹ çš„åˆ†ç±»"><a href="#1-2ã€æœºå™¨å­¦ä¹ çš„åˆ†ç±»" class="headerlink" title="1.2ã€æœºå™¨å­¦ä¹ çš„åˆ†ç±»"></a>1.2ã€æœºå™¨å­¦ä¹ çš„åˆ†ç±»</h3><p>æ ¹æ®ä¸åŒçš„åˆ’åˆ†è§’åº¦ï¼Œå¯ä»¥å°†æœºå™¨å­¦ä¹ åˆ’åˆ†ä¸ºä¸åŒçš„ç±»å‹ã€‚</p><h4 id="1-2-1ã€æŒ‰ä»»åŠ¡ç±»å‹åˆ’åˆ†"><a href="#1-2-1ã€æŒ‰ä»»åŠ¡ç±»å‹åˆ’åˆ†" class="headerlink" title="1.2.1ã€æŒ‰ä»»åŠ¡ç±»å‹åˆ’åˆ†"></a>1.2.1ã€æŒ‰ä»»åŠ¡ç±»å‹åˆ’åˆ†</h4><p>æœºå™¨å­¦ä¹ æ¨¡å‹æŒ‰ä»»åŠ¡ç±»å‹å¯ä»¥åˆ†ä¸ºå›å½’æ¨¡å‹ã€åˆ†ç±»æ¨¡å‹å’Œç»“æ„åŒ–å­¦ä¹ æ¨¡å‹ã€‚å…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š  </p><ol><li>å›å½’æ¨¡å‹ï¼šåˆå«é¢„æµ‹æ¨¡å‹ï¼Œè¾“å‡ºçš„æ˜¯ä¸€ä¸ªä¸èƒ½æšä¸¾çš„æ•°å€¼ã€‚  </li><li>åˆ†ç±»æ¨¡å‹ï¼šåˆåˆ†ä¸ºäºŒåˆ†ç±»æ¨¡å‹å’Œå¤šåˆ†ç±»æ¨¡å‹ï¼Œå¸¸è§çš„äºŒåˆ†ç±»é—®é¢˜æœ‰åƒåœ¾é‚®ä»¶è¿‡æ»¤ï¼Œå¸¸è§çš„å¤šåˆ†ç±»é—®é¢˜æœ‰æ–‡æ¡£è‡ªåŠ¨å½’ç±»ã€‚  </li><li>ç»“æ„åŒ–å­¦ä¹ æ¨¡å‹ï¼šæ­¤ç±»å‹çš„è¾“å‡ºä¸å†æ˜¯ä¸€ä¸ªå›ºå®šé•¿åº¦çš„å€¼ï¼Œå¦‚å›¾ç‰‡è¯­ä¹‰åˆ†æè¾“å‡ºæ˜¯å›¾ç‰‡çš„æ–‡å­—æè¿°ã€‚</li></ol><h4 id="1-2-2ã€æŒ‰æ–¹æ³•åˆ’åˆ†"><a href="#1-2-2ã€æŒ‰æ–¹æ³•åˆ’åˆ†" class="headerlink" title="1.2.2ã€æŒ‰æ–¹æ³•åˆ’åˆ†"></a>1.2.2ã€æŒ‰æ–¹æ³•åˆ’åˆ†</h4><p>æœºå™¨å­¦ä¹ æŒ‰æ–¹æ³•å¯ä»¥åˆ†ä¸ºçº¿æ€§æ¨¡å‹å’Œéçº¿æ€§æ¨¡å‹ï¼Œå…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š  </p><ol><li>çº¿æ€§æ¨¡å‹ï¼šè™½ç„¶æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å…¶ä½œç”¨ä¸å¯å¿½è§†ï¼Œçº¿æ€§æ¨¡å‹æ˜¯éçº¿æ€§æ¨¡å‹çš„åŸºç¡€ï¼Œå¾ˆå¤šéçº¿æ€§æ¨¡å‹éƒ½æ˜¯åœ¨çº¿æ€§æ¨¡å‹çš„åŸºç¡€ä¸Šå˜æ¢è€Œæ¥çš„ã€‚  </li><li>éçº¿æ€§æ¨¡å‹ï¼šåˆå¯ä»¥åˆ†ä¸ºä¼ ç»Ÿæœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚SVMã€KNNã€å†³ç­–æ ‘ç­‰ï¼‰å’Œæ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</li></ol><h4 id="1-2-3ã€æŒ‰å­¦ä¹ ç†è®ºåˆ’åˆ†"><a href="#1-2-3ã€æŒ‰å­¦ä¹ ç†è®ºåˆ’åˆ†" class="headerlink" title="1.2.3ã€æŒ‰å­¦ä¹ ç†è®ºåˆ’åˆ†"></a>1.2.3ã€æŒ‰å­¦ä¹ ç†è®ºåˆ’åˆ†</h4><p>æœºå™¨å­¦ä¹ æ¨¡å‹å¯ä»¥åˆ†ä¸º<strong>æœ‰ç›‘ç£å­¦ä¹ </strong>ã€<strong>åŠç›‘ç£å­¦ä¹ </strong>ã€<strong>æ— ç›‘ç£å­¦ä¹ </strong>ã€<strong>è¿ç§»å­¦ä¹ </strong>å’Œ<strong>å¼ºåŒ–å­¦ä¹ </strong>ï¼Œå…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š  </p><ol><li>è®­ç»ƒæ ·æœ¬å¸¦æœ‰æ ‡ç­¾æ—¶æ˜¯æœ‰ç›‘ç£å­¦ä¹ ã€‚  </li><li>è®­ç»ƒæ ·æœ¬éƒ¨åˆ†æœ‰æ ‡ç­¾ã€éƒ¨åˆ†æ— æ ‡ç­¾æ—¶æ˜¯åŠç›‘ç£å­¦ä¹ ã€‚  </li><li>è®­ç»ƒæ ·æœ¬å…¨éƒ¨æ— æ ‡ç­¾æ—¶æ˜¯æ— ç›‘ç£å­¦ä¹ ã€‚  </li><li>è¿ç§»å­¦ä¹ å°±æ˜¯æŠŠå·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹å‚æ•°è¿ç§»åˆ°æ–°çš„æ¨¡å‹ä¸Šï¼Œä»¥å¸®åŠ©æ–°æ¨¡å‹è®­ç»ƒã€‚  </li><li>å¼ºåŒ–å­¦ä¹ æ˜¯ä¸€ä¸ªå­¦ä¹ æœ€ä¼˜ç­–ç•¥ï¼ˆPolicyï¼Œå¯ä»¥è®©æœ¬ä½“ï¼ˆAgentï¼‰åœ¨ç‰¹å®šç¯å¢ƒï¼ˆEnvironmentï¼‰ä¸­ï¼Œæ ¹æ®å½“å‰çŠ¶æ€ï¼ˆStateï¼‰åšå‡ºè¡ŒåŠ¨ï¼ˆActionï¼‰ï¼Œä»è€Œè·å¾—æœ€å¤§å›æŠ¥ï¼ˆRewardï¼‰ï¼Œ<strong>å¼ºåŒ–å­¦ä¹ å’Œæœ‰ç›‘ç£å­¦ä¹ æœ€å¤§çš„ä¸åŒ</strong>æ˜¯ï¼šæ¯æ¬¡çš„å†³å®šæ²¡æœ‰å¯¹ä¸é”™ï¼Œåªæ˜¯å¸Œæœ›è·å¾—æœ€å¤šçš„ç´¯ç§¯å¥–åŠ±ã€‚</li></ol><h3 id="1-3ã€æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ "><a href="#1-3ã€æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ " class="headerlink" title="1.3ã€æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ "></a>1.3ã€æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ </h3><p>æœºå™¨å­¦ä¹ æ˜¯ä¸€ç§å®ç°äººå·¥æ™ºèƒ½çš„æ–¹æ³•ï¼Œè€Œæ·±åº¦å­¦ä¹ æ˜¯ä¸€ç§å®ç°æœºå™¨å­¦ä¹ çš„æŠ€æœ¯ã€‚æ·±åº¦å­¦ä¹ æœ¬æ¥å¹¶ä¸æ˜¯ä¸€ç§ç‹¬ç«‹çš„å­¦ä¹ æ–¹æ³•ï¼Œå…¶æœ¬èº«ä¹Ÿä¼šç”¨åˆ°æœ‰ç›‘ç£å’Œæ— ç›‘ç£çš„å­¦ä¹ æ–¹æ³•æ¥è®­ç»ƒæ·±åº¦ç¥ç»ç½‘ç»œã€‚ä½†ç”±äºè¿‘å‡ å¹´è¯¥é¢†åŸŸå‘å±•è¿…çŒ›ï¼Œä¸€äº›ç‰¹æœ‰çš„å­¦ä¹ æ‰‹æ®µç›¸ç»§è¢«æå‡ºï¼ˆå¦‚æ®‹å·®ç½‘ç»œç­‰ï¼‰ï¼Œå› æ­¤è¶Šæ¥è¶Šå¤šçš„äººå°†å…¶å•ç‹¬çœ‹ä½œä¸€ç§å­¦ä¹ çš„æ–¹æ³•ã€‚</p><p>å‡è®¾éœ€è¦è¯†åˆ«æŸä¸ªç…§ç‰‡æ˜¯ç‹—è¿˜æ˜¯çŒ«ï¼Œå¦‚æœæ˜¯ç”¨ä¼ ç»Ÿæœºå™¨å­¦ä¹ çš„æ–¹æ³•ï¼Œé¦–å…ˆä¼šå®šä¹‰ä¸€äº›ç‰¹å¾ï¼Œå¦‚æœ‰æ²¡æœ‰èƒ¡é¡»ã€è€³æœµã€é¼»å­å’Œå˜´å·´çš„ç‰¹å¾ç­‰ã€‚æ€»ä¹‹ï¼Œé¦–å…ˆè¦ç¡®å®šç›¸åº”çš„â€œé¢éƒ¨ç‰¹å¾â€ä½œä¸ºæœºå™¨å­¦ä¹ çš„ç‰¹å¾ï¼Œä»¥æ­¤å°†å¯¹è±¡è¿›è¡Œåˆ†ç±»è¯†åˆ«ã€‚è€Œæ·±åº¦å­¦ä¹ çš„æ–¹æ³•åˆ™æ›´è¿›ä¸€æ­¥ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰¾å‡ºè¿™ä¸ªåˆ†ç±»é—®é¢˜æ‰€éœ€è¦çš„é‡è¦ç‰¹å¾ï¼Œè€Œä¼ ç»Ÿæœºå™¨å­¦ä¹ åˆ™éœ€è¦äººå·¥åœ°ç»™å‡ºç‰¹å¾ã€‚</p><p>æˆ‘çš„ç†è§£æ˜¯ï¼Œå…¶å®æ·±åº¦å­¦ä¹ å¹¶ä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç®—æ³•ï¼Œåœ¨è®­ç»ƒç¥ç»ç½‘ç»œçš„æ—¶å€™ä¹Ÿé€šå¸¸ä¼šç”¨åˆ°ç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ã€‚ä½†æ˜¯ç”±äºä¸€äº›ç‹¬ç‰¹çš„å­¦ä¹ æ–¹æ³•è¢«æå‡ºï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯å•ç‹¬çš„ä¸€ç§å­¦ä¹ ç®—æ³•ã€‚æ·±åº¦å­¦ä¹ å¯ä»¥å¤§è‡´ç†è§£æˆåŒ…å«å¤šä¸ªéšå«å±‚çš„ç¥ç»ç½‘ç»œç»“æ„ï¼Œæ·±åº¦å­¦ä¹ çš„æ·±æŒ‡çš„å°±æ˜¯éšè—å±‚çš„æ·±åº¦ã€‚</p><h2 id="2ã€ç¥ç»ç½‘ç»œ"><a href="#2ã€ç¥ç»ç½‘ç»œ" class="headerlink" title="2ã€ç¥ç»ç½‘ç»œ"></a>2ã€ç¥ç»ç½‘ç»œ</h2><h3 id="2-1ã€CNN"><a href="#2-1ã€CNN" class="headerlink" title="2.1ã€CNN"></a>2.1ã€CNN</h3><p>CNNæ˜¯å·ç§¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Neural Networkï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§ä¸“é—¨ä¸ºå¤„ç†å…·æœ‰ç½‘æ ¼ç»“æ„çš„æ•°æ®ï¼ˆå¦‚å›¾åƒï¼‰è€Œè®¾è®¡çš„æ·±åº¦å­¦ä¹ æ¶æ„ã€‚CNNåœ¨å›¾åƒå¤„ç†å’Œè®¡ç®—æœºè§†è§‰é¢†åŸŸç‰¹åˆ«æˆåŠŸï¼Œå¹¿æ³›åº”ç”¨äºå›¾åƒè¯†åˆ«ã€ç‰©ä½“æ£€æµ‹ã€å›¾åƒåˆ†ç±»ã€å›¾åƒåˆ†å‰²ã€è§†é¢‘åˆ†æå’Œè‡ªç„¶è¯­è¨€å¤„ç†ç­‰ä»»åŠ¡ã€‚</p><p>CNNçš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨å·ç§¯è¿ç®—æ¥è‡ªåŠ¨å’Œæœ‰æ•ˆåœ°æå–å›¾åƒä¸­çš„å±€éƒ¨ç‰¹å¾ï¼Œæ— éœ€æ‰‹åŠ¨ç‰¹å¾å·¥ç¨‹ã€‚å·ç§¯å±‚é€šè¿‡æ»¤æ³¢å™¨ï¼ˆä¹Ÿå«å·ç§¯æ ¸æˆ–æƒé‡ï¼‰åœ¨è¾“å…¥å›¾åƒä¸Šæ»‘åŠ¨ï¼Œè®¡ç®—å±€éƒ¨åŒºåŸŸçš„ç‚¹ç§¯ï¼Œå¹¶ç”Ÿæˆç‰¹å¾å›¾ï¼ˆfeature mapï¼‰æ¥è¡¨ç¤ºç‰¹å®šçš„è§†è§‰ç‰¹å¾ï¼Œå¦‚è¾¹ç¼˜ã€è§’ç‚¹æˆ–æ›´å¤æ‚çš„çº¹ç†å’Œå½¢çŠ¶ã€‚</p><p>CNNé€šå¸¸ç”±ä»¥ä¸‹å‡ ç§ç±»å‹çš„å±‚ç»„æˆï¼š  </p><ol><li>å·ç§¯å±‚ï¼ˆConvolutional Layerï¼‰ï¼šä½¿ç”¨å·ç§¯æ ¸æå–è¾“å…¥æ•°æ®çš„ç‰¹å¾ã€‚</li><li>æ¿€æ´»å±‚ï¼ˆActivation Layerï¼‰ï¼šé€šå¸¸æ˜¯éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œå¦‚ReLUï¼Œå®ƒå¢åŠ äº†æ¨¡å‹çš„éçº¿æ€§èƒ½åŠ›ï¼Œä½¿å¾—ç½‘ç»œèƒ½å¤Ÿæ•æ‰æ›´å¤æ‚çš„ç‰¹å¾ã€‚</li><li>æ± åŒ–å±‚ï¼ˆPooling Layerï¼‰ï¼šé‡‡ç”¨ä¸‹é‡‡æ ·æ“ä½œï¼ˆå¦‚æœ€å¤§æ± åŒ–æˆ–å¹³å‡æ± åŒ–ï¼‰æ¥å‡å°‘ç‰¹å¾å›¾çš„ç©ºé—´å°ºå¯¸ï¼Œå‡å°‘å‚æ•°æ•°é‡ï¼Œä»¥åŠå¢åŠ æ¨¡å‹çš„ä¸å˜æ€§ç‰¹æ€§ã€‚</li><li>å…¨è¿æ¥å±‚ï¼ˆFully Connected Layerï¼‰ï¼šé€šå¸¸æ”¾åœ¨ç½‘ç»œçš„æœ€åå‡ å±‚ï¼Œè¿™äº›å±‚å¯å°†å­¦ä¹ åˆ°çš„é«˜å±‚ç‰¹å¾æ˜ å°„åˆ°æœ€ç»ˆçš„è¾“å‡ºï¼Œä¾‹å¦‚åˆ†ç±»çš„ç±»åˆ«ã€‚</li><li>å½’ä¸€åŒ–å±‚ï¼ˆNormalization Layerï¼‰ï¼šä¾‹å¦‚æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰ï¼Œç”¨äºè°ƒæ•´ç¥ç»ç½‘ç»œä¸­é—´å±‚çš„æ¿€æ´»å€¼åˆ†å¸ƒï¼Œä»¥æé«˜è®­ç»ƒé€Ÿåº¦å’Œç¨³å®šæ€§ã€‚</li><li>ä¸¢å¼ƒå±‚ï¼ˆDropout Layerï¼‰ï¼šéšæœºä¸¢å¼ƒç½‘ç»œä¸­çš„éƒ¨åˆ†æ¿€æ´»å€¼ï¼Œä»¥é¿å…è¿‡æ‹Ÿåˆã€‚</li></ol><h3 id="2-2ã€RNN"><a href="#2-2ã€RNN" class="headerlink" title="2.2ã€RNN"></a>2.2ã€RNN</h3><p>RNNæ˜¯å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Networkï¼‰çš„ç¼©å†™ï¼Œæ˜¯ä¸€ç§ä¸“é—¨è®¾è®¡æ¥å¤„ç†åºåˆ—æ•°æ®çš„äººå·¥ç¥ç»ç½‘ç»œã€‚ä¸ä¼ ç»Ÿçš„å‰é¦ˆç¥ç»ç½‘ç»œä¸åŒï¼ŒRNNèƒ½å¤Ÿå¤„ç†ä»»æ„é•¿åº¦çš„åºåˆ—ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰å†…éƒ¨çŠ¶æ€ï¼ˆmemoryï¼‰æ¥å­˜å‚¨å‰é¢çš„ä¿¡æ¯ã€‚</p><p>RNNè®¾è®¡ç”¨äºå¤„ç†åºåˆ—æ•°æ®å’Œæ—¶é—´åºåˆ—æ•°æ®ï¼Œèƒ½å¤Ÿå¯¹åºåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œå»ºæ¨¡ï¼Œè€ƒè™‘åˆ°æ—¶é—´ä¸Šçš„ä¾èµ–å…³ç³»ã€‚RNNçš„å…³é”®åœ¨äºå®ƒä»¬çš„å¾ªç¯è¿æ¥ï¼Œè¿™ä½¿å¾—ç½‘ç»œèƒ½å¤Ÿå°†ä¿¡æ¯ä»å‰åºæ­¥éª¤ä¼ é€’åˆ°å½“å‰æ­¥éª¤ï¼Œä»è€Œä¿æŒå¯¹å…ˆå‰å…ƒç´ çš„â€œè®°å¿†â€ã€‚RNNåœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ã€è¯­éŸ³è¯†åˆ«ã€æ—¶é—´åºåˆ—é¢„æµ‹ç­‰ä»»åŠ¡ä¸­éå¸¸æœ‰æ•ˆã€‚</p><p>RNNçš„ä¸»è¦é—®é¢˜æ˜¯é•¿æœŸä¾èµ–é—®é¢˜ï¼Œå³éš¾ä»¥æ•æ‰é•¿åºåˆ—ä¸­çš„ä¾èµ–å…³ç³»ï¼Œè¿™é€šå¸¸è¡¨ç°ä¸ºæ¢¯åº¦æ¶ˆå¤±æˆ–æ¢¯åº¦çˆ†ç‚¸ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç ”ç©¶è€…å¼€å‘äº†LSTMï¼ˆé•¿çŸ­æœŸè®°å¿†ï¼‰å’ŒGRUï¼ˆé—¨æ§å¾ªç¯å•å…ƒï¼‰ç­‰æ›´é«˜çº§çš„å¾ªç¯ç¥ç»ç½‘ç»œå˜ä½“ã€‚</p><h3 id="2-3ã€CNNä¸RNNçš„åŒºåˆ«"><a href="#2-3ã€CNNä¸RNNçš„åŒºåˆ«" class="headerlink" title="2.3ã€CNNä¸RNNçš„åŒºåˆ«"></a>2.3ã€CNNä¸RNNçš„åŒºåˆ«</h3><ol><li>æ•°æ®ç±»å‹ï¼šCNNä¸»è¦ç”¨äºå›¾åƒæ•°æ®ï¼Œè€ŒRNNä¸»è¦ç”¨äºåºåˆ—æ•°æ®ã€‚</li><li>æ¶æ„ï¼šCNNä½¿ç”¨å·ç§¯å±‚æ¥æå–ç©ºé—´ç‰¹å¾ï¼Œè€ŒRNNåŒ…å«å¾ªç¯æ¥å¤„ç†æ—¶é—´åºåˆ—ã€‚</li><li>åº”ç”¨åœºæ™¯ï¼šCNNé€šå¸¸ç”¨äºå›¾åƒå’Œè§†é¢‘å¤„ç†ä»»åŠ¡ï¼Œå¦‚å›¾åƒåˆ†ç±»ã€å¯¹è±¡æ£€æµ‹å’Œå›¾åƒåˆ†å‰²ã€‚RNNç»å¸¸ç”¨äºå¤„ç†æ—¶é—´ç›¸å…³çš„ä»»åŠ¡ï¼Œå¦‚è¯­è¨€æ¨¡å‹ã€æœºå™¨ç¿»è¯‘ã€è¯­éŸ³åˆ°æ–‡æœ¬è½¬æ¢ã€‚</li><li>è®°å¿†èƒ½åŠ›ï¼šCNNæ²¡æœ‰å†…éƒ¨çŠ¶æ€ï¼Œä¸ä¿å­˜å…ˆå‰çš„è¾“å…¥ä¿¡æ¯ï¼Œè€ŒRNNé€šè¿‡éšè—çŠ¶æ€ä¿æŒå¯¹è¿‡å»ä¿¡æ¯çš„è®°å¿†ã€‚</li><li>å‚æ•°å…±äº«ï¼šCNNé€šè¿‡æ»‘åŠ¨å·ç§¯æ ¸å®ç°å‚æ•°å…±äº«ï¼Œè€ŒRNNåœ¨æ—¶é—´æ­¥ä¹‹é—´å…±äº«å‚æ•°ã€‚</li><li>å˜ä½“å’Œæ”¹è¿›ï¼šCNNå¯ä»¥é€šè¿‡æ·»åŠ ç‰¹æ®Šå±‚ï¼ˆå¦‚æ‰¹å½’ä¸€åŒ–å±‚ï¼‰è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œè€ŒRNNçš„æ”¹è‰¯é€šå¸¸æ¶‰åŠæ”¹å˜å¾ªç¯å•å…ƒçš„ç»“æ„ï¼ˆå¦‚ä½¿ç”¨LSTMæˆ–GRUï¼‰ã€‚</li></ol><h3 id="2-4ã€å…¶ä»–"><a href="#2-4ã€å…¶ä»–" class="headerlink" title="2.4ã€å…¶ä»–"></a>2.4ã€å…¶ä»–</h3><ol><li>å¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMLPï¼‰:<ul><li>ä¹Ÿç§°ä¸ºå¯†é›†æˆ–å…¨è¿æ¥ç½‘ç»œï¼Œæ˜¯ç¥ç»ç½‘ç»œçš„æœ€åŸºæœ¬å½¢å¼ã€‚</li><li>æ¯ä¸ªç¥ç»å…ƒä¸å‰ä¸€å±‚çš„æ‰€æœ‰ç¥ç»å…ƒè¿æ¥ï¼Œæ²¡æœ‰å¾ªç¯æˆ–å·ç§¯ç»“æ„ã€‚</li><li>ä¸»è¦ç”¨äºè¡¨æ ¼æ•°æ®æˆ–ä¸éœ€è¦æ•è·ç©ºé—´æˆ–æ—¶é—´ä¾èµ–æ€§çš„é—®é¢˜ã€‚</li></ul></li><li>è‡ªç¼–ç å™¨ï¼ˆAutoencodersï¼ŒAEï¼‰:<ul><li>ç”¨äºæ— ç›‘ç£å­¦ä¹ ï¼Œä¸»è¦ç”¨äºé™ç»´å’Œç‰¹å¾å­¦ä¹ ã€‚</li><li>ç”±ç¼–ç å™¨å’Œè§£ç å™¨ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¼–ç å™¨å°†è¾“å…¥å‹ç¼©æˆä¸€ä¸ªä½ç»´è¡¨ç¤ºï¼Œè§£ç å™¨å°†è¯¥è¡¨ç¤ºé‡æ„å›åŸå§‹è¾“å…¥ã€‚</li></ul></li><li>å˜åˆ†è‡ªç¼–ç å™¨ï¼ˆVariational Autoencodersï¼ŒVAEï¼‰:<ul><li>ç±»ä¼¼äºä¼ ç»Ÿè‡ªç¼–ç å™¨ï¼Œä½†å®ƒä»¬äº§ç”Ÿçš„æ˜¯è¾“å…¥æ•°æ®çš„æ¦‚ç‡åˆ†å¸ƒã€‚</li><li>é€šå¸¸ç”¨äºç”Ÿæˆæ¨¡å‹ï¼Œå¯ä»¥ç”Ÿæˆæ–°çš„ã€ä¸è®­ç»ƒæ•°æ®ç±»ä¼¼çš„å®ä¾‹ã€‚</li></ul></li><li>ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGenerative Adversarial Networks, GANï¼‰:<ul><li>åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªç”Ÿæˆå™¨å’Œä¸€ä¸ªé‰´åˆ«å™¨ã€‚</li><li>ç”Ÿæˆå™¨å°è¯•ç”Ÿæˆé€¼çœŸçš„æ•°æ®ï¼Œé‰´åˆ«å™¨å°è¯•åŒºåˆ†çœŸå®æ•°æ®å’Œç”Ÿæˆå™¨ç”Ÿæˆçš„æ•°æ®ã€‚</li><li>é€šå¸¸ç”¨äºå›¾åƒç”Ÿæˆã€é£æ ¼è½¬æ¢ç­‰ã€‚</li></ul></li><li>é•¿çŸ­æœŸè®°å¿†ç½‘ç»œï¼ˆLong Short-Term Memoryï¼ŒLSTMï¼‰:<ul><li>ä¸€ç§ç‰¹æ®Šçš„RNNï¼Œé€šè¿‡å¼•å…¥é—¨æ§åˆ¶åˆ¶è§£å†³äº†ä¼ ç»ŸRNNçš„æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚</li><li>åœ¨åºåˆ—é¢„æµ‹å’Œè‡ªç„¶è¯­è¨€å¤„ç†é¢†åŸŸå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚</li></ul></li><li>é—¨æ§å¾ªç¯å•å…ƒï¼ˆGated Recurrent Unitï¼ŒGRUï¼‰:<ul><li>ç±»ä¼¼äºLSTMï¼Œä½†ç»“æ„ä¸Šæ›´ç®€å•ï¼Œå‚æ•°æ›´å°‘ã€‚</li><li>ç”¨é—¨æ§æœºåˆ¶æ¥æ§åˆ¶ä¿¡æ¯æµï¼ŒåŒæ ·é€‚ç”¨äºå¤„ç†åºåˆ—æ•°æ®ã€‚</li></ul></li><li>Transformers:<ul><li>ä¾§é‡äºè‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆself-attentionï¼‰ï¼Œèƒ½å¤Ÿå¤„ç†æ•´ä¸ªè¾“å…¥åºåˆ—å¹¶æ•è·è¿œç¨‹ä¾èµ–æ€§ã€‚</li><li>åœ¨NLPé¢†åŸŸå–å¾—äº†æ˜¾è‘—çš„æˆåŠŸï¼Œå¦‚BERTã€GPTç­‰æ¨¡å‹éƒ½æ˜¯åŸºäºTransformeræ¶æ„ã€‚</li></ul></li><li>å›¾ç¥ç»ç½‘ç»œï¼ˆGraph Neural Networksï¼ŒGNNï¼‰:<ul><li>ç”¨äºå¤„ç†å›¾å½¢æ•°æ®ï¼Œå¦‚ç¤¾äº¤ç½‘ç»œã€åˆ†å­ç»“æ„æˆ–ä»»ä½•å…¶ä»–éæ¬§å‡ é‡Œå¾—æ•°æ®ã€‚</li><li>èƒ½å¤Ÿæ•è·èŠ‚ç‚¹ä¹‹é—´çš„è¿æ¥å…³ç³»å’Œç½‘ç»œç»“æ„ä¿¡æ¯ã€‚</li></ul></li><li>å·ç§¯å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Recurrent Neural Networks, CRNNï¼‰:<ul><li>ç»“åˆäº†CNNå’ŒRNNçš„ç‰¹ç‚¹ï¼Œç”¨äºå¤„ç†å…·æœ‰ç©ºé—´å’Œæ—¶é—´ç»´åº¦çš„æ•°æ®ï¼Œå¦‚è§†é¢‘åˆ†ææˆ–å›¾åƒåºåˆ—ã€‚</li></ul></li><li>Capsule Networks (CapsNets):<ul><li>è¯•å›¾è§£å†³CNNåœ¨å›¾åƒå¤„ç†ä¸­çš„ä¸€äº›é™åˆ¶ï¼Œå¦‚ç©ºé—´å±‚æ¬¡å…³ç³»å’Œè§†è§’ä¸å˜æ€§é—®é¢˜ã€‚</li><li>åŒ…å«â€œèƒ¶å›Šâ€ï¼Œå…¶ä¸­åŒ…å«äº†å…³äºå¯¹è±¡çŠ¶æ€çš„ä¿¡æ¯ï¼Œä»¥åŠåŠ¨æ€è·¯ç”±åè®®ã€‚</li></ul></li></ol><h2 id="3ã€æ¨¡å‹æ ¼å¼è½¬æ¢"><a href="#3ã€æ¨¡å‹æ ¼å¼è½¬æ¢" class="headerlink" title="3ã€æ¨¡å‹æ ¼å¼è½¬æ¢"></a>3ã€æ¨¡å‹æ ¼å¼è½¬æ¢</h2><h3 id="3-1ã€ONNX"><a href="#3-1ã€ONNX" class="headerlink" title="3.1ã€ONNX"></a>3.1ã€ONNX</h3><p>å…¨ç§°Open Neural Network Exchangeï¼Œæ˜¯å¾®è½¯ä¸»å¯¼çš„ä¸€ä¸ªå¼€æ”¾å¼æ·±åº¦å­¦ä¹ ç¥ç»ç½‘ç»œæ¨¡å‹æ ¼å¼ã€‚è¯¥æ ¼å¼æ—¨åœ¨é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„æ¨¡å‹æ ‡å‡†ï¼Œä¿ƒè¿›ä¸åŒäººå·¥æ™ºèƒ½æ¡†æ¶ä¹‹é—´çš„äº’æ“ä½œæ€§ï¼Œä»è€Œå»ºç«‹ä¸€ä¸ªå¼ºå¤§çš„äººå·¥æ™ºèƒ½ç”Ÿæ€ã€‚æ˜¯ä¸€ä¸ªç”¨äºè¡¨ç¤ºæ·±åº¦å­¦ä¹ æ¨¡å‹çš„å¼€æ”¾æ ‡å‡†ï¼Œå®ƒè¢«è®¾è®¡æˆå…è®¸æ¨¡å‹åœ¨ä¸åŒçš„æ·±åº¦å­¦ä¹ æ¡†æ¶ä¹‹é—´è¿›è¡Œè½¬æ¢å’Œäº’æ“ä½œã€‚æ”¯æŒTensorFlowã€Kerasã€PyTorchã€Caffeã€CNTKã€MXNetã€Apache SINGAçš„è½¬æ¢ï¼Œå¹¶ä¸”åœ¨ä¸è¿™äº›æ¡†æ¶çš„é›†æˆä¸­æ‰®æ¼”â€œä¸­é—´äººâ€çš„è§’è‰²ã€‚</p><p>å®˜ç½‘ï¼š<a class="link"   href="https://onnx.ai/" >https://onnx.ai/<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/onnx/onnx/" >https://github.com/onnx/onnx/<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="3-2ã€å…¶ä»–"><a href="#3-2ã€å…¶ä»–" class="headerlink" title="3.2ã€å…¶ä»–"></a>3.2ã€å…¶ä»–</h3><p>é™¤äº†ONNXï¼Œç›®å‰æ²¡æœ‰å¹¿æ³›æ¥å—çš„ã€ç±»ä¼¼èŒƒå›´çš„é€šç”¨æ ‡å‡†ï¼Œä½†æœ‰ä¸€äº›å…¶ä»–å·¥å…·å’Œåº“å¯ä»¥ç”¨äºæ¨¡å‹è½¬æ¢å’Œä¼˜åŒ–ï¼š</p><ol><li>MMDNNï¼ˆModel Management on Deep Neural Networkï¼‰ï¼š<ul><li>ç”±å¾®è½¯å¼€å‘ï¼Œå®ƒæ˜¯ä¸€ä¸ªè·¨æ¡†æ¶çš„æ·±åº¦å­¦ä¹ æ¨¡å‹è½¬æ¢å·¥å…·ã€‚</li><li>æ”¯æŒå¤šç§æ ¼å¼ä¹‹é—´çš„è½¬æ¢ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºTensorFlowã€Kerasã€PyTorchã€Caffeå’ŒCNTKã€‚</li></ul></li><li>TVMï¼š<ul><li>ä¸€ä¸ªå¼€æºæœºå™¨å­¦ä¹ ç¼–è¯‘å™¨æ ˆï¼Œç”¨äºä»å¤šç§æ¡†æ¶ï¼ˆåŒ…æ‹¬PyTorchã€TensorFlowã€MXNetå’ŒKerasï¼‰ç¼–è¯‘å’Œä¼˜åŒ–æ¨¡å‹ï¼Œä»¥ä¾¿åœ¨å„ç§ç¡¬ä»¶ä¸Šè¿è¡Œã€‚</li><li>å®ƒæä¾›äº†ä¸€ä¸ªä¸­é—´è¡¨ç¤ºï¼ˆIRï¼‰æ¥ä¼˜åŒ–æ¨¡å‹ï¼Œå¹¶å¯ä»¥å°†æ¨¡å‹ç¼–è¯‘æˆé«˜æ•ˆçš„å¯æ‰§è¡Œä»£ç ã€‚</li></ul></li><li>CoreMLToolsï¼š<ul><li>Appleæä¾›çš„ä¸€å¥—å·¥å…·ï¼Œç”¨äºå°†å¤šç§æ·±åº¦å­¦ä¹ æ¨¡å‹è½¬æ¢ä¸ºè‹¹æœè®¾å¤‡çš„Core MLæ ¼å¼ã€‚</li><li>æ”¯æŒTensorFlowã€Kerasã€Caffeå’Œå…¶ä»–æ¡†æ¶çš„æ¨¡å‹è½¬æ¢ã€‚</li></ul></li><li>TF-TRT (TensorFlow-TensorRT Integration)ï¼š<ul><li>TensorFlowå’ŒNVIDIA TensorRTçš„é›†æˆï¼Œç”¨äºåŠ é€ŸTensorFlowæ¨¡å‹åœ¨NVIDIA GPUä¸Šçš„æ¨ç†ã€‚</li><li>å®ƒè‡ªåŠ¨ä¼˜åŒ–å’Œè½¬æ¢TensorFlowå›¾ä»¥åˆ©ç”¨TensorRTçš„ä¼˜åŒ–ã€‚</li></ul></li><li>XLA (Accelerated Linear Algebra)ï¼š<ul><li>TensorFlowæä¾›çš„ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œå¯ä»¥ä¼˜åŒ–TensorFlowæ¨¡å‹çš„è®¡ç®—å›¾ï¼Œä»¥æé«˜æ‰§è¡Œæ•ˆç‡å’Œæ¨ç†é€Ÿåº¦ã€‚</li></ul></li><li>OpenVINO Toolkitï¼š<ul><li>ç”±Intelæ¨å‡ºï¼Œç”¨äºä¼˜åŒ–å’Œéƒ¨ç½²æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚</li><li>æ”¯æŒå¤šç§æ ¼å¼çš„æ¨¡å‹ï¼ŒåŒ…æ‹¬ONNXã€TensorFlowå’ŒCaffeï¼Œå¹¶ä¸”ä¸“é—¨ä¼˜åŒ–äº†åœ¨Intelç¡¬ä»¶ï¼ˆå¦‚CPUã€GPUå’ŒVPUï¼‰ä¸Šè¿è¡Œã€‚</li></ul></li></ol><p>å°½ç®¡ä¸Šè¿°å·¥å…·å’Œåº“å¯èƒ½ä¸å¦‚ONNXé‚£æ ·ä¸“æ³¨äºæ¨¡å‹æ ¼å¼çš„æ ‡å‡†åŒ–ï¼Œä½†å®ƒä»¬æä¾›äº†åœ¨ä¸åŒæ¡†æ¶å’Œå¹³å°ä¹‹é—´è½¬æ¢ã€ä¼˜åŒ–å’Œéƒ¨ç½²æ¨¡å‹çš„åŠŸèƒ½ã€‚è¿™äº›å·¥å…·å„æœ‰ä¾§é‡ç‚¹ï¼Œé€‰æ‹©æ—¶åº”è€ƒè™‘æ¨¡å‹çš„åŸå§‹æ¡†æ¶ã€ç›®æ ‡éƒ¨ç½²å¹³å°å’Œæ€§èƒ½è¦æ±‚ã€‚</p><h2 id="4ã€æ¨¡å‹å¯è§†åŒ–å·¥å…·"><a href="#4ã€æ¨¡å‹å¯è§†åŒ–å·¥å…·" class="headerlink" title="4ã€æ¨¡å‹å¯è§†åŒ–å·¥å…·"></a>4ã€æ¨¡å‹å¯è§†åŒ–å·¥å…·</h2><h3 id="4-1ã€Netron"><a href="#4-1ã€Netron" class="headerlink" title="4.1ã€Netron"></a>4.1ã€Netron</h3><p>åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼ŒNetronæ˜¯ä¸€ä¸ªå›¾å½¢åŒ–çš„å·¥å…·ï¼Œç”¨äºå¯è§†åŒ–å’Œæ¢ç´¢æ·±åº¦å­¦ä¹ å’Œæœºå™¨å­¦ä¹ æ¨¡å‹çš„ç»“æ„ã€‚å®ƒæ”¯æŒå¤šç§ä¸åŒçš„æ¨¡å‹æ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬å¸¸è§çš„æ¡†æ¶å¦‚TensorFlowã€Kerasã€PyTorchã€Caffeã€ONNXã€CoreMLç­‰ã€‚</p><ul><li>æ¨¡å‹å¯è§†åŒ–ï¼šé€šè¿‡Netronï¼Œç”¨æˆ·å¯ä»¥ç›´è§‚åœ°æŸ¥çœ‹æ¨¡å‹çš„å±‚æ¬¡ç»“æ„ã€æ¯å±‚çš„å‚æ•°å’Œå½¢çŠ¶ã€è¿æ¥æ¨¡å¼ç­‰ä¿¡æ¯ã€‚</li><li>è·¨å¹³å°å…¼å®¹æ€§ï¼šNetronå¯ä»¥ä½œä¸ºWebåº”ç”¨ç¨‹åºåœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä½œä¸ºæ¡Œé¢åº”ç”¨ç¨‹åºåœ¨Windowsã€macOSå’ŒLinuxä¸Šè¿è¡Œã€‚</li><li>ç®€å•æ˜“ç”¨ï¼šç”¨æˆ·åªéœ€å°†æ¨¡å‹æ–‡ä»¶æ‹–æ”¾åˆ°Netronä¸­ï¼Œå°±å¯ä»¥æŸ¥çœ‹æ¨¡å‹çš„ç»“æ„ã€‚æ²¡æœ‰å¤æ‚çš„å®‰è£…æˆ–é…ç½®è¿‡ç¨‹ã€‚</li><li>æ¨¡å‹æ¢ç´¢ï¼šNetronå…è®¸ç”¨æˆ·äº¤äº’å¼åœ°æ¢ç´¢æ¨¡å‹çš„ç»†èŠ‚ï¼Œä¾‹å¦‚ç‚¹å‡»ä¸åŒçš„å±‚æ¥æŸ¥çœ‹å…¶å±æ€§å’Œå‚æ•°ã€‚</li><li>æ¨¡å‹å…±äº«ï¼šç”±äºNetronæä¾›äº†å›¾å½¢åŒ–çš„æ¨¡å‹è¡¨ç¤ºï¼Œå®ƒå¯ä»¥å¸®åŠ©å›¢é˜Ÿæˆå‘˜æˆ–åˆä½œä¼™ä¼´ä¹‹é—´æ›´å®¹æ˜“åœ°è®¨è®ºå’Œå…±äº«æ¨¡å‹è®¾è®¡ã€‚</li><li>æ— éœ€è¿è¡Œæ¨¡å‹ï¼šNetronç”¨äºé™æ€åˆ†æï¼Œå› æ­¤ä¸éœ€è¦è¿è¡Œæ¨¡å‹æˆ–å®‰è£…æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚</li></ul><p>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/lutzroeder/netron/" >https://github.com/lutzroeder/netron/<i class="fas fa-external-link-alt"></i></a><br>è½¯ä»¶ä¸‹è½½ï¼š<a class="link"   href="https://github.com/lutzroeder/netron/releases" >https://github.com/lutzroeder/netron/releases<i class="fas fa-external-link-alt"></i></a><br>ç½‘é¡µç‰ˆï¼š<a class="link"   href="https://netron.app/" >https://netron.app/<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="4-2ã€å…¶ä»–"><a href="#4-2ã€å…¶ä»–" class="headerlink" title="4.2ã€å…¶ä»–"></a>4.2ã€å…¶ä»–</h3><ol><li>TensorBoardï¼š<ul><li>TensorFlowæä¾›çš„ä¸€ä¸ªå¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥å±•ç¤ºæ¨¡å‹çš„è®¡ç®—å›¾ï¼Œç›‘æ§è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§æŒ‡æ ‡ï¼Œå¦‚æŸå¤±å’Œå‡†ç¡®ç‡ï¼Œå¹¶åˆ†ææ¨¡å‹çš„å‚æ•°å’Œæ€§èƒ½ã€‚</li><li>æ”¯æŒæ ‡é‡ã€å›¾åƒã€éŸ³é¢‘ã€ç›´æ–¹å›¾å’ŒåµŒå…¥å‘é‡ç­‰æ•°æ®çš„å¯è§†åŒ–ã€‚</li></ul></li><li>TensorWatchï¼š<ul><li>å¾®è½¯æ¨å‡ºçš„ä¸€ä¸ªçµæ´»çš„å¯è§†åŒ–å·¥å…·ï¼Œä¸»è¦ç”¨äºPyTorchã€‚</li><li>æ”¯æŒå®æ—¶çš„æ•°æ®æµå¯è§†åŒ–ï¼Œå¯ä»¥åœ¨Jupyter Notebookä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºç‹¬ç«‹çš„å®æ—¶å›¾è¡¨ã€‚</li></ul></li><li>Visdomï¼š<ul><li>ç”±Facebookç ”ç©¶å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªçµæ´»çš„å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥ç”¨äºåˆ›å»ºã€ç»„ç»‡å’Œåˆ†äº«å®æ—¶æ•°æ®çš„å¯è§†åŒ–ã€‚</li><li>æ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„å¯è§†åŒ–ï¼ŒåŒ…æ‹¬æ•°å€¼ã€å›¾åƒã€æ–‡æœ¬ã€éŸ³é¢‘å’Œè§†é¢‘æ•°æ®ã€‚</li></ul></li><li>Weights &amp; Biasesï¼š<ul><li>ä¸€ä¸ªæœºå™¨å­¦ä¹ å®éªŒè·Ÿè¸ªå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©è®°å½•å’Œå¯è§†åŒ–æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ã€‚</li><li>æä¾›äº†ä¸€ä¸ªåœ¨çº¿å¹³å°ï¼Œé€‚ç”¨äºå¤šç§æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæ”¯æŒè¶…å‚æ•°ä¼˜åŒ–ã€æ¨¡å‹ç‰ˆæœ¬æ§åˆ¶å’Œåä½œã€‚</li></ul></li><li>What-If Toolï¼š<ul><li>ä¸€ä¸ªäº¤äº’å¼å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºåˆ†ææœºå™¨å­¦ä¹ æ¨¡å‹çš„è¡Œä¸ºï¼Œå°¤å…¶æ˜¯åœ¨è§£é‡Šæ¨¡å‹é¢„æµ‹å’Œå…¬å¹³æ€§æ–¹é¢ã€‚</li><li>å¯ä»¥ä¸TensorBoardé…åˆä½¿ç”¨ï¼Œå¹¶æ”¯æŒå¤šç§æ•°æ®æ ¼å¼å’Œæ¨¡å‹ç±»å‹ã€‚</li></ul></li><li>PlotNeuralNetï¼š<ul><li>ä¸€ä¸ªLaTeXä»£ç åº“ï¼Œç”¨äºä»ä»£ç ä¸­ç”Ÿæˆå·ç§¯ç¥ç»ç½‘ç»œçš„é«˜è´¨é‡æ¶æ„å›¾ã€‚</li><li>éœ€è¦LaTeXç¯å¢ƒæ¥ç¼–è¯‘æˆå›¾å½¢ï¼Œå¹¶å…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ¨¡å‹çš„å¤–è§‚å’Œå¸ƒå±€ã€‚</li></ul></li><li>NN-SVGï¼š<ul><li>ä¸€ä¸ªåœ¨çº¿å·¥å…·ï¼Œç”¨äºå¿«é€Ÿç”Ÿæˆç¥ç»ç½‘ç»œæ¶æ„çš„SVGå›¾åƒã€‚</li><li>ç”¨æˆ·å¯ä»¥è°ƒæ•´å±‚æ•°ã€ç¥ç»å…ƒæ•°é‡å’Œå…¶ä»–å±æ€§ï¼Œç„¶åä¸‹è½½ç”Ÿæˆçš„å›¾åƒã€‚</li></ul></li></ol><h2 id="5ã€æ·±åº¦å­¦ä¹ æ¡†æ¶"><a href="#5ã€æ·±åº¦å­¦ä¹ æ¡†æ¶" class="headerlink" title="5ã€æ·±åº¦å­¦ä¹ æ¡†æ¶"></a>5ã€æ·±åº¦å­¦ä¹ æ¡†æ¶</h2><p>æœ¬æ–‡ä»‹ç»äº†ç›®å‰æ¯”è¾ƒä¸»æµçš„ã€æˆ‘ä¸ªäººæ¯”è¾ƒæ„Ÿå…´è¶£ä¸€äº›æ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚</p><h3 id="5-1ã€TensorFlow"><a href="#5-1ã€TensorFlow" class="headerlink" title="5.1ã€TensorFlow"></a>5.1ã€TensorFlow</h3><ul><li>å‘å±•è€…ä¸ç¤¾åŒºï¼š ç”±Googleçš„Google Brainå›¢é˜Ÿå¼€å‘ï¼Œæœ‰ç€éå¸¸æ´»è·ƒçš„ç¤¾åŒºå’Œå¹¿æ³›çš„å·¥ä¸šæ”¯æŒã€‚</li><li>æ¥å£ä¸ä½¿ç”¨ï¼š æä¾›äº†Pythonã€C++ç­‰å¤šç§è¯­è¨€çš„APIï¼Œä»¥åŠé«˜å±‚APIå¦‚tf.kerasï¼Œé€‚åˆå„ç§ç”¨æˆ·éœ€æ±‚ã€‚</li><li>è®¾è®¡å’Œç‰¹ç‚¹ï¼š åˆç‰ˆåŸºäºé™æ€è®¡ç®—å›¾ï¼Œä½†ä»TensorFlow 2.0å¼€å§‹ï¼Œé»˜è®¤æ”¯æŒåŠ¨æ€è®¡ç®—å›¾ï¼ˆEager Executionï¼‰ã€‚</li><li>æ‰©å±•æ€§å’Œéƒ¨ç½²ï¼š æ”¯æŒå¤šç§ç¡¬ä»¶å¹³å°ï¼ŒåŒ…æ‹¬GPUå’ŒTPUï¼Œæä¾›äº†TensorFlow Liteä¾›ç§»åŠ¨å’ŒåµŒå…¥å¼è®¾å¤‡ä½¿ç”¨ã€‚</li><li>åº”ç”¨èŒƒå›´ï¼š é€‚ç”¨äºå¹¿æ³›çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œä»ç ”ç©¶åˆ°ä¼ä¸šçº§ç”Ÿäº§å‡æœ‰å¹¿æ³›åº”ç”¨ã€‚</li></ul><p>TensorFlowå®˜ç½‘ï¼š<a class="link"   href="https://www.tensorflow.org/" >https://www.tensorflow.org/<i class="fas fa-external-link-alt"></i></a><br>TensorFlow Liteå®˜ç½‘ï¼š<a class="link"   href="https://www.tensorflow.org/lite" >https://www.tensorflow.org/lite<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/tensorflow/tensorflow" >https://github.com/tensorflow/tensorflow<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="5-2ã€Keras"><a href="#5-2ã€Keras" class="headerlink" title="5.2ã€Keras"></a>5.2ã€Keras</h3><ul><li>å‘å±•è€…ä¸ç¤¾åŒºï¼š æœ€åˆç”±FranÃ§ois Cholletå•ç‹¬å¼€å‘ï¼Œç°åœ¨æ˜¯TensorFlowçš„å®˜æ–¹é«˜çº§APIã€‚</li><li>æ¥å£ä¸ä½¿ç”¨ï¼š æä¾›äº†é«˜åº¦æŠ½è±¡åŒ–çš„APIï¼Œä½¿å¾—æ„å»ºå’Œè®­ç»ƒæ¨¡å‹å˜å¾—ç®€å•å¿«æ·ï¼Œé€‚åˆåˆå­¦è€…å’Œå¿«é€ŸåŸå‹è®¾è®¡ã€‚</li><li>è®¾è®¡å’Œç‰¹ç‚¹ï¼š ä½œä¸ºTensorFlowçš„ä¸€éƒ¨åˆ†ï¼Œä¸TensorFlowç´§å¯†é›†æˆï¼ŒåŒæ—¶ä¿æŒäº†ç‹¬ç«‹æ€§å’Œæ¨¡å—åŒ–ã€‚</li><li>æ‰©å±•æ€§å’Œéƒ¨ç½²ï¼š ä½œä¸ºTensorFlowçš„ä¸€éƒ¨åˆ†ï¼Œäº«å—TensorFlowçš„æ‰©å±•æ€§å’Œéƒ¨ç½²èƒ½åŠ›ã€‚</li><li>åº”ç”¨èŒƒå›´ï¼š Keraséå¸¸é€‚åˆæ•™å­¦å’Œå¿«é€Ÿå¼€å‘ï¼Œä½†å¯¹äºä¸€äº›éœ€è¦é«˜åº¦å®šåˆ¶åŒ–çš„å¤æ‚æ¨¡å‹ï¼Œå¯èƒ½ä¼šä½¿ç”¨TensorFlowçš„ä½çº§APIã€‚</li></ul><p>Kerasåœ¨2017å¹´è¢«é›†æˆè¿›TensorFlowï¼Œåœ¨TensorFlow 2.0ç‰ˆæœ¬ä¸­ï¼ŒKerasè¢«æ­£å¼ç¡®ç«‹ä¸ºTensorFlowçš„é«˜çº§APIï¼Œå³tf.kerasã€‚</p><p>å®˜ç½‘ï¼š<a class="link"   href="https://keras.io/" >https://keras.io/<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/keras-team/keras" >https://github.com/keras-team/keras<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="5-3ã€PyTorch"><a href="#5-3ã€PyTorch" class="headerlink" title="5.3ã€PyTorch"></a>5.3ã€PyTorch</h3><ul><li>å‘å±•è€…ä¸ç¤¾åŒºï¼š ç”±Facebookçš„AIç ”ç©¶å›¢é˜Ÿå¼€å‘ï¼Œå¹¶ä¸”åœ¨å­¦æœ¯ç•Œæœ‰å¾ˆå¤§å½±å“åŠ›å’Œå¼ºå¤§çš„ç¤¾åŒºã€‚</li><li>æ¥å£ä¸ä½¿ç”¨ï¼š æä¾›äº†ä»¥Pythonä¸ºä¸­å¿ƒçš„APIï¼Œå……åˆ†åˆ©ç”¨äº†Pythonçš„åŠ¨æ€ç‰¹æ€§ï¼Œä½¿åŸå‹è®¾è®¡å’Œå®éªŒæ›´åŠ è‡ªç„¶ã€‚</li><li>è®¾è®¡å’Œç‰¹ç‚¹ï¼š é‡‡ç”¨åŠ¨æ€è®¡ç®—å›¾ï¼Œå³å®šä¹‰å³è¿è¡Œï¼ˆdefine-by-runï¼‰æ–¹å¼ï¼Œéå¸¸é€‚åˆç ”ç©¶å’ŒåŠ¨æ€å˜åŒ–çš„æ¨¡å‹ã€‚</li><li>æ‰©å±•æ€§å’Œéƒ¨ç½²ï¼š å¯ä»¥å¯¼å‡ºä¸ºONNXæ ¼å¼ï¼Œä¸å…¶ä»–å·¥å…·é…åˆå®ç°è·¨å¹³å°éƒ¨ç½²ã€‚æœ‰ä¸€å®šçš„ç§»åŠ¨ç«¯æ”¯æŒã€‚</li><li>åº”ç”¨èŒƒå›´ï¼š åœ¨å­¦æœ¯ç ”ç©¶ä¸­éå¸¸å—æ¬¢è¿ï¼Œä¹Ÿé€‚ç”¨äºå·¥ä¸šåº”ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¿«é€ŸåŸå‹è®¾è®¡å’Œè¿­ä»£ä¸­ã€‚</li></ul><p>å®˜ç½‘ï¼š<a class="link"   href="https://pytorch.org/" >https://pytorch.org/<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/pytorch/pytorch" >https://github.com/pytorch/pytorch<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="5-4ã€Caffe"><a href="#5-4ã€Caffe" class="headerlink" title="5.4ã€Caffe"></a>5.4ã€Caffe</h3><ul><li>å‘å±•è€…ä¸ç¤¾åŒºï¼š ç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡çš„BVLCå›¢é˜Ÿå¼€å‘ï¼Œç¤¾åŒºç›¸å¯¹äºTensorFlowå’ŒPyTorchè¾ƒå°ã€‚</li><li>æ¥å£ä¸ä½¿ç”¨ï¼š ä¸»è¦ä½¿ç”¨é…ç½®æ–‡ä»¶å®šä¹‰æ¨¡å‹ç»“æ„ï¼ŒåŒæ—¶æä¾›äº†Pythonå’ŒC++çš„APIï¼Œä½†æ²¡æœ‰TensorFlowå’ŒPyTorché‚£ä¹ˆçµæ´»ã€‚</li><li>è®¾è®¡å’Œç‰¹ç‚¹ï¼š é«˜æ€§èƒ½çš„å‰å‘ä¼ æ’­å’Œé€Ÿåº¦ä¼˜åŒ–ï¼Œé€‚åˆäºå›¾åƒåˆ†ç±»å’Œå…¶ä»–è§†è§‰ä»»åŠ¡ã€‚</li><li>æ‰©å±•æ€§å’Œéƒ¨ç½²ï¼š ä¸»è¦ä¼˜åŒ–äº†åœ¨GPUä¸Šçš„éƒ¨ç½²ï¼Œä½†åœ¨ç§»åŠ¨ç«¯å’ŒåµŒå…¥å¼è®¾å¤‡æ”¯æŒæ–¹é¢ä¸å¦‚TensorFlowå’ŒPyTorchã€‚</li><li>åº”ç”¨èŒƒå›´ï¼š å› å…¶é«˜æ•ˆçš„æ€§èƒ½ï¼ŒCaffeç»å¸¸ç”¨äºå·¥ä¸šäº§å“å’Œç§‘ç ”ä¸­çš„æ¨¡å‹è®­ç»ƒå’Œéƒ¨ç½²ï¼Œå°¤å…¶æ˜¯è®¡ç®—æœºè§†è§‰ä»»åŠ¡ã€‚</li></ul><p>å®˜ç½‘ï¼š<a class="link"   href="https://caffe.berkeleyvision.org/" >https://caffe.berkeleyvision.org/<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/BVLC/caffe" >https://github.com/BVLC/caffe<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="5-5ã€Core-ML"><a href="#5-5ã€Core-ML" class="headerlink" title="5.5ã€Core ML"></a>5.5ã€Core ML</h3><p>Core ML å¹¶ä¸æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒæ˜¯è‹¹æœå…¬å¸å¼€å‘çš„ä¸“æœ‰æ¡†æ¶ï¼Œç”¨äºåœ¨ iOSã€macOSã€tvOS å’Œ watchOS ä¸Šè¿è¡Œæœºå™¨å­¦ä¹ æ¨¡å‹ã€‚ç”±äºå®ƒæ˜¯ä¸“æœ‰çš„ï¼Œæ²¡æœ‰å…¬å¼€çš„æºä»£ç å¯ä¾›ä¸‹è½½æˆ–ä¿®æ”¹ã€‚</p><p>è‹¹æœå…¬å¸çš„ Core ML å®˜æ–¹ä¸»é¡µæä¾›äº†å…³äº Core ML çš„è¯¦ç»†ä¿¡æ¯å’Œæ–‡æ¡£ï¼ŒåŒ…æ‹¬å¦‚ä½•å¼€å§‹ä½¿ç”¨ Core MLã€å¦‚ä½•è½¬æ¢å’Œè®­ç»ƒæ¨¡å‹ã€ä»¥åŠ Core ML æ”¯æŒçš„æ¨¡å‹æ ¼å¼ç­‰ã€‚</p><p>å®˜ç½‘ï¼š<a class="link"   href="https://developer.apple.com/machine-learning/" >https://developer.apple.com/machine-learning/<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="5-6ã€æ€»ç»“æ·±åº¦å­¦ä¹ æ¡†æ¶"><a href="#5-6ã€æ€»ç»“æ·±åº¦å­¦ä¹ æ¡†æ¶" class="headerlink" title="5.6ã€æ€»ç»“æ·±åº¦å­¦ä¹ æ¡†æ¶"></a>5.6ã€æ€»ç»“æ·±åº¦å­¦ä¹ æ¡†æ¶</h3><p>æ€»çš„æ¥è¯´ï¼Œæˆ‘ä¸ªäººæ¯”è¾ƒæ¨èTensorFlowå’ŒPyTorchï¼Œå®ƒä»¬éƒ½æ˜¯å®Œæ•´çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œæ”¯æŒå¹¿æ³›çš„åº”ç”¨ï¼Œå¹¶ä¸”å®ƒä»¬çš„ç¤¾åŒºå’Œå·¥å…·éƒ½åœ¨ä¸æ–­å‘å±•ã€‚Caffeåœ¨æŸäº›ç‰¹å®šçš„é¢†åŸŸå¦‚è®¡ç®—æœºè§†è§‰ä¸­ä»ç„¶æ˜¯ä¸€ä¸ªé«˜æ•ˆå¯é çš„é€‰æ‹©ï¼Œå°½ç®¡å®ƒçš„æµè¡Œåº¦å¯èƒ½ä¸å¦‚å‰ä¸¤è€…ã€‚è€ŒKerasæä¾›äº†ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„æ¥å£ï¼Œä½¿å¾—æ·±åº¦å­¦ä¹ æ›´åŠ å®¹æ˜“ä¸Šæ‰‹ï¼Œæ˜¯å­¦ä¹ å’Œå¿«é€Ÿå¼€å‘çš„é¦–é€‰ã€‚</p><h2 id="6ã€å›½å†…æ·±åº¦å­¦ä¹ æ¨ç†å¼•æ“"><a href="#6ã€å›½å†…æ·±åº¦å­¦ä¹ æ¨ç†å¼•æ“" class="headerlink" title="6ã€å›½å†…æ·±åº¦å­¦ä¹ æ¨ç†å¼•æ“"></a>6ã€å›½å†…æ·±åº¦å­¦ä¹ æ¨ç†å¼•æ“</h2><p>ä¸»è¦ä»‹ç»å‡ ä¸ªå›½å†…å¼€æºçš„æ·±åº¦å­¦ä¹ æ¨ç†å¼•æ“ã€‚</p><h3 id="6-1ã€MNN"><a href="#6-1ã€MNN" class="headerlink" title="6.1ã€MNN"></a>6.1ã€MNN</h3><p>MNNï¼ˆMobile Neural Networkï¼‰ç”±é˜¿é‡Œå·´å·´å‡ºå“ï¼Œæ˜¯ä¸€ä¸ªè½»é‡çº§ã€é«˜æ€§èƒ½çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œ<strong>ä¸“é—¨é’ˆå¯¹ç§»åŠ¨ç«¯å’Œè¾¹ç¼˜è®¾å¤‡</strong>è®¾è®¡ã€‚MNNçš„ç›®æ ‡æ˜¯å¸®åŠ©å¼€å‘è€…å’Œä¼ä¸šèƒ½å¤Ÿ<strong>åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šé«˜æ•ˆåœ°éƒ¨ç½²</strong>å’Œè¿è¡Œæ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯åœ¨èµ„æºæœ‰é™çš„ç¯å¢ƒä¸‹ã€‚</p><ul><li>è½»é‡åŒ–ï¼šMNNä¸“ä¸ºç§»åŠ¨è®¾å¤‡ä¼˜åŒ–ï¼Œæ‹¥æœ‰è¾ƒå°çš„è¿è¡Œæ—¶åº“ï¼Œèƒ½å¤Ÿå‡å°‘åº”ç”¨çš„èµ„æºæ¶ˆè€—ã€‚</li><li>è·¨å¹³å°æ”¯æŒï¼šMNNæ”¯æŒåŒ…æ‹¬Androidã€iOSä»¥åŠLinuxç­‰å¤šä¸ªå¹³å°ï¼ŒåŒæ—¶æ”¯æŒARMã€x86ã€MIPSç­‰ä¸åŒæ¶æ„çš„å¤„ç†å™¨ã€‚</li><li>é«˜æ€§èƒ½ï¼šMNNé’ˆå¯¹ç§»åŠ¨ç«¯å¤„ç†å™¨è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å¯¹ARM CPUçš„NEONæŒ‡ä»¤é›†ä¼˜åŒ–ã€å¯¹GPUçš„OpenCLå’ŒMetalä¼˜åŒ–ï¼Œä»¥åŠå¯¹NPUï¼ˆç¥ç»ç½‘ç»œå¤„ç†å•å…ƒï¼‰çš„é€‚é…ï¼Œå¯å……åˆ†åˆ©ç”¨è®¾å¤‡çš„è®¡ç®—èµ„æºã€‚</li><li>æ˜“ç”¨æ€§ï¼šMNNæä¾›äº†ç®€æ´çš„APIï¼Œä¾¿äºå¼€å‘è€…å¿«é€Ÿé›†æˆå’Œä½¿ç”¨ã€‚å®ƒæ”¯æŒONNXã€Caffeã€TensorFlowç­‰å¤šç§æ¨¡å‹æ ¼å¼ï¼Œæ–¹ä¾¿å¼€å‘è€…å¯¼å…¥å’Œè½¬æ¢å·²æœ‰æ¨¡å‹ã€‚</li><li>å¤šåç«¯æ”¯æŒï¼šMNNå¯ä»¥æ ¹æ®ä¸åŒçš„ç¡¬ä»¶æ¡ä»¶è‡ªåŠ¨é€‰æ‹©æœ€ä½³çš„è®¡ç®—åç«¯æ‰§è¡Œè®¡ç®—ä»»åŠ¡ï¼ŒåŒ…æ‹¬CPUã€GPUã€NPUç­‰ã€‚</li><li>è‡ªåŠ¨è°ƒåº¦å’Œå†…å­˜å¤ç”¨ï¼šMNNå†…éƒ¨å®ç°äº†æ™ºèƒ½çš„ç®—å­è°ƒåº¦å’Œå†…å­˜ç®¡ç†ï¼Œå‡å°‘å†…å­˜å ç”¨å’Œè®¡ç®—å»¶è¿Ÿã€‚</li><li>è‡ªå®šä¹‰ç®—å­ï¼šå¦‚æœé‡åˆ°MNNä¸æ”¯æŒçš„ç®—å­ï¼Œå¼€å‘è€…è¿˜å¯ä»¥è‡ªå®šä¹‰ç®—å­ä»¥æ»¡è¶³ç‰¹æ®Šéœ€æ±‚ã€‚</li></ul><p>å®˜ç½‘ï¼š<a class="link"   href="https://www.mnn.zone/" >https://www.mnn.zone/<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/alibaba/MNN" >https://github.com/alibaba/MNN<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="6-2ã€NCNN"><a href="#6-2ã€NCNN" class="headerlink" title="6.2ã€NCNN"></a>6.2ã€NCNN</h3><p>NCNNï¼ˆNeural Network Inference Frameworkï¼‰ç”±è…¾è®¯å‡ºå“ï¼Œæ˜¯è…¾è®¯ä¼˜å›¾å®éªŒå®¤å¼€å‘çš„é«˜æ€§èƒ½ç¥ç»ç½‘ç»œå‰å‘æ¨ç†æ¡†æ¶ï¼Œ<strong>ä¸“ä¸ºç§»åŠ¨ç«¯å’Œè¾¹ç¼˜è®¾å¤‡è®¾è®¡</strong>ï¼Œå…·æœ‰è½»é‡çº§å’Œé«˜æ•ˆç‡çš„ç‰¹ç‚¹ã€‚</p><ul><li>è½»é‡çº§ï¼šNCNN è®¾è®¡ç›®æ ‡æ˜¯ä¿æŒè¶³å¤Ÿçš„è½»é‡çº§ï¼Œä»¥ä¾¿äºåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå¿«é€Ÿéƒ¨ç½²å’Œæ‰§è¡Œã€‚</li><li>é«˜æ€§èƒ½ï¼šå®ƒé€šè¿‡ä¼˜åŒ–æ‰§è¡Œé€Ÿåº¦æ¥å°½å¯èƒ½åˆ©ç”¨ç§»åŠ¨è®¾å¤‡çš„è®¡ç®—èµ„æºï¼ŒåŒ…æ‹¬å¯¹ ARM CPU çš„ NEON æŒ‡ä»¤é›†ã€Vulkan è®¡ç®—ç€è‰²å™¨ã€OpenCL å’Œå¤šçº¿ç¨‹çš„æ”¯æŒã€‚</li><li>ä¸ä¾èµ–ç¬¬ä¸‰æ–¹åº“ï¼šNCNN å°½é‡å‡å°‘ä¾èµ–ï¼Œä¸éœ€è¦ä¾èµ– BLAS æˆ– CNN ç­‰ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™ä½¿å¾—åœ¨ç§»åŠ¨ç«¯éƒ¨ç½²æ—¶æ›´åŠ ç®€æ´å’Œæ–¹ä¾¿ã€‚</li><li>æ”¯æŒå¤šç§æ¨¡å‹æ ¼å¼ï¼šæä¾›äº†å·¥å…·æ¥è½¬æ¢åŒ…æ‹¬ Caffeã€ONNXã€PyTorch å’Œ TensorFlow åœ¨å†…çš„å¤šç§æ¨¡å‹åˆ° NCNN çš„æ ¼å¼ã€‚</li><li>æ˜“äºé›†æˆï¼šNCNN æä¾›äº†ç®€å•è€Œç›´è§‚çš„ APIï¼Œä½¿å¾—å°†é¢„è®­ç»ƒæ¨¡å‹é›†æˆåˆ°ç§»åŠ¨åº”ç”¨å˜å¾—éå¸¸ç®€å•ã€‚</li><li>è·¨å¹³å°æ”¯æŒï¼šæ”¯æŒåœ¨ Androidã€iOSã€Windows å’Œ Linux ç­‰å¤šç§å¹³å°ä¸Šè¿è¡Œã€‚</li></ul><p>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/Tencent/ncnn" >https://github.com/Tencent/ncnn<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="6-3ã€MindSpore"><a href="#6-3ã€MindSpore" class="headerlink" title="6.3ã€MindSpore"></a>6.3ã€MindSpore</h3><p>MindSporeæ˜¯åä¸ºæ¨å‡ºçš„ä¸€ä¸ªå…¨åœºæ™¯æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œ<strong>ç§»åŠ¨ç«¯éƒ¨ç½²éœ€è¦ä½¿ç”¨MindSpore Lite</strong>ã€‚</p><ul><li>è½»é‡çº§ï¼šç›¸è¾ƒäºå®Œæ•´ç‰ˆçš„MindSporeï¼ŒLiteç‰ˆæœ¬æ›´å°å·§ï¼Œé€‚ç”¨äºè®¡ç®—èƒ½åŠ›å’Œå­˜å‚¨ç©ºé—´å—é™çš„ç§»åŠ¨è®¾å¤‡ã€‚</li><li>è·¨å¹³å°æ”¯æŒï¼šæ”¯æŒAndroidå’ŒiOSç­‰ç§»åŠ¨æ“ä½œç³»ç»Ÿï¼Œæ–¹ä¾¿å¼€å‘è€…å°†AIæ¨¡å‹éƒ¨ç½²åˆ°å„ç§æ™ºèƒ½æ‰‹æœºå’Œå¹³æ¿ç”µè„‘ä¸Šã€‚</li><li>ä¼˜åŒ–çš„æ€§èƒ½ï¼šé’ˆå¯¹ç§»åŠ¨å’Œç«¯ä¾§è®¾å¤‡è¿›è¡Œäº†æ€§èƒ½ä¼˜åŒ–ï¼Œä»¥æé«˜è¿ç®—é€Ÿåº¦å’Œæ•ˆç‡ï¼Œå‡å°‘åŠŸè€—ã€‚</li><li>æ˜“ç”¨çš„å·¥å…·é“¾ï¼šæä¾›å·¥å…·é“¾æ”¯æŒï¼ŒåŒ…æ‹¬æ¨¡å‹è½¬æ¢å·¥å…·ï¼Œå¯ä»¥å°†MindSporeæˆ–å…¶ä»–æ¡†æ¶ï¼ˆå¦‚ONNXï¼‰çš„æ¨¡å‹è½¬æ¢ä¸ºMindSpore Liteæ¨¡å‹ã€‚</li><li>ä¸°å¯Œçš„ç®—å­åº“ï¼šåŒ…å«äº†ä¸°å¯Œçš„ç®—å­ï¼ˆæ“ä½œï¼‰ï¼Œä»¥æ”¯æŒå¤šç§AIåœºæ™¯ä¸‹çš„è®¡ç®—éœ€æ±‚ã€‚</li></ul><p>MindSporeå®˜ç½‘ï¼š<a class="link"   href="https://www.mindspore.cn/" >https://www.mindspore.cn/<i class="fas fa-external-link-alt"></i></a><br>MindSpore Liteå®˜ç½‘ï¼š<a class="link"   href="https://www.mindspore.cn/lite" >https://www.mindspore.cn/lite<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/mindspore-ai/mindspore" >https://github.com/mindspore-ai/mindspore<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="6-4ã€mace"><a href="#6-4ã€mace" class="headerlink" title="6.4ã€mace"></a>6.4ã€mace</h3><p>MACEï¼ˆMobile AI Compute Engineï¼‰æ˜¯å°ç±³å¼€æºçš„ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¨ç†æ¡†æ¶ï¼Œä¸“é—¨è®¾è®¡ç”¨äº<strong>åœ¨ç§»åŠ¨ç«¯å’ŒåµŒå…¥å¼è®¾å¤‡ä¸Šä¼˜åŒ–å’Œè¿è¡Œ</strong>æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚MACEæ”¯æŒå¤šç§å¹³å°ï¼ŒåŒ…æ‹¬Androidå’ŒiOSè®¾å¤‡ï¼Œä»¥åŠæ”¯æŒARMæ¶æ„çš„Linuxè®¾å¤‡ã€‚</p><ul><li>è·¨å¹³å°ï¼šæä¾›å¯¹Androidå’ŒiOSæ“ä½œç³»ç»Ÿçš„æ”¯æŒï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°å°†è®­ç»ƒå¥½çš„æ¨¡å‹éƒ¨ç½²åˆ°å¤šç§ç§»åŠ¨è®¾å¤‡ä¸Šã€‚</li><li>å¤šåç«¯æ”¯æŒï¼šæ”¯æŒåœ¨CPUã€GPUå’ŒDSPç­‰å¤šç§è®¡ç®—å•å…ƒä¸Šè¿è¡Œæ¨¡å‹ï¼Œåˆ©ç”¨OpenCLå’ŒOpenGLç­‰æŠ€æœ¯å®ç°è·¨è®¾å¤‡çš„é€šç”¨æ€§å’Œé«˜æ€§èƒ½ã€‚</li><li>æ¨¡å‹è½¬æ¢å·¥å…·ï¼šåŒ…å«æ¨¡å‹è½¬æ¢å™¨ï¼Œå¯ä»¥å°†Caffeã€TensorFlowã€ONNXç­‰æ ¼å¼çš„æ¨¡å‹è½¬æ¢ä¸ºMACEæ”¯æŒçš„æ ¼å¼ã€‚</li><li>ä¼˜åŒ–çš„æ€§èƒ½ï¼šé’ˆå¯¹ç§»åŠ¨è®¾å¤‡çš„è®¡ç®—èµ„æºè¿›è¡Œä¼˜åŒ–ï¼Œæé«˜æ¨¡å‹è¿è¡Œæ•ˆç‡ï¼Œå‡å°‘å»¶è¿Ÿå’ŒåŠŸè€—ã€‚</li><li>æ˜“ç”¨æ€§ï¼šæä¾›äº†æ˜“äºä½¿ç”¨çš„æ¥å£å’Œè¯¦ç»†çš„æ–‡æ¡£ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿä¸Šæ‰‹å¹¶éƒ¨ç½²ä»–ä»¬çš„æ¨¡å‹ã€‚</li><li>ç®—å­åº“ï¼šåŒ…å«äº†ä¸°å¯Œçš„é¢„å®šä¹‰ç®—å­ï¼ˆoperationsï¼‰ï¼Œæ»¡è¶³å¸¸è§æ·±åº¦å­¦ä¹ æ¨¡å‹çš„éœ€æ±‚ã€‚</li></ul><p>å®˜ç½‘ï¼š<a class="link"   href="https://mace.readthedocs.io/" >https://mace.readthedocs.io/<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/XiaoMi/mace" >https://github.com/XiaoMi/mace<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="6-5ã€PaddlePaddle"><a href="#6-5ã€PaddlePaddle" class="headerlink" title="6.5ã€PaddlePaddle"></a>6.5ã€PaddlePaddle</h3><p>PaddlePaddleæ˜¯ç”±ç™¾åº¦æ¨å‡ºçš„å¼€æºæ·±åº¦å­¦ä¹ å¹³å°ï¼Œæ”¯æŒå¤šç§æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå¹¶ä¸”ç‰¹åˆ«ä¼˜åŒ–äº†åœ¨ç™¾åº¦å¤§è§„æ¨¡åº”ç”¨ä¸­çš„ä¸€äº›å®ç”¨åŠŸèƒ½ã€‚</p><ul><li>è·¨å¹³å°å…¼å®¹æ€§ï¼šæ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬<strong>Android</strong>ã€<strong>iOS</strong>ã€Linuxç­‰ï¼Œå¹¶æ”¯æŒARMã€X86ã€OpenCLã€Metalã€CUDAç­‰å¤šç§åç«¯ã€‚</li><li>è½»é‡åŒ–è®¾è®¡ï¼šä¸ºäº†é€‚åº”ç§»åŠ¨ç«¯å’ŒåµŒå…¥å¼è®¾å¤‡çš„æ€§èƒ½å’Œå­˜å‚¨é™åˆ¶ï¼ŒPaddlePaddle Liteä¼˜åŒ–äº†å†…å­˜å ç”¨å’Œè¿è¡Œé€Ÿåº¦ï¼Œä½¿ä¹‹æˆä¸ºä¸€ä¸ªè½»é‡çº§æ¨ç†å¼•æ“ã€‚</li><li>ä¼˜åŒ–çš„æ€§èƒ½ï¼šé€šè¿‡å†…æ ¸çº§ä¼˜åŒ–ã€ç®—å­èåˆã€å†…å­˜å¤ç”¨ç­‰æŠ€æœ¯å®ç°äº†é«˜æ€§èƒ½çš„æ·±åº¦å­¦ä¹ æ¨¡å‹æ¨ç†ã€‚</li><li>æ˜“äºé›†æˆï¼šæä¾›äº†ç®€æ´çš„APIæ¥å£ï¼Œä¾¿äºå°†PaddlePaddle Liteé›†æˆåˆ°ç§»åŠ¨ç«¯åº”ç”¨ä¸­ã€‚</li><li>æ¨¡å‹è½¬æ¢å·¥å…·ï¼šé…å¤‡äº†æ¨¡å‹ä¼˜åŒ–å·¥å…·ï¼Œå¯ä»¥å°†PaddlePaddleæ ¼å¼çš„æ¨¡å‹è½¬æ¢ä¸ºPaddlePaddle Liteæ”¯æŒçš„æ ¼å¼ï¼Œå¹¶å¯¹æ¨¡å‹è¿›è¡Œä¼˜åŒ–ä»¥æé«˜åœ¨ç«¯ä¾§è®¾å¤‡ä¸Šçš„æ€§èƒ½ã€‚</li></ul><p>å®˜ç½‘ï¼š<a class="link"   href="https://www.paddlepaddle.org.cn/" >https://www.paddlepaddle.org.cn/<i class="fas fa-external-link-alt"></i></a><br>PaddlePaddleå¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/PaddlePaddle" >https://github.com/PaddlePaddle<i class="fas fa-external-link-alt"></i></a><br>Paddle-Liteå¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/PaddlePaddle/Paddle-Lite" >https://github.com/PaddlePaddle/Paddle-Lite<i class="fas fa-external-link-alt"></i></a></p><h3 id="6-6ã€MegEngine"><a href="#6-6ã€MegEngine" class="headerlink" title="6.6ã€MegEngine"></a>6.6ã€MegEngine</h3><p>MegEngineæ˜¯æ—·è§†å…¬å¸è‡ªä¸»ç ”å‘çš„æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œäº2020å¹´3æœˆ25æ—¥å…¨é¢å¼€æºã€‚MegEngine è‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œæ˜“ç”¨æ€§ï¼Œæ”¯æŒå¹¿æ³›çš„AIåº”ç”¨ï¼Œä»å›¾åƒå’Œè§†é¢‘åˆ†æåˆ°è¯­éŸ³è¯†åˆ«å’Œè‡ªç„¶è¯­è¨€å¤„ç†ã€‚</p><ul><li>æ˜“ç”¨æ€§ï¼šæä¾›äº† Python APIï¼Œä½¿å¾—æ„å»ºå’Œè®­ç»ƒæ¨¡å‹çš„è¿‡ç¨‹å˜å¾—ç®€å•ç›´è§‚ã€‚</li><li>é«˜æ€§èƒ½ï¼šé€šè¿‡é«˜æ•ˆçš„å¼ é‡æ“ä½œå’Œè‡ªåŠ¨å¾®åˆ†ç³»ç»Ÿï¼Œä»¥åŠä¼˜åŒ–åçš„å†…å­˜ä½¿ç”¨å’Œè®¡ç®—å›¾æ‰§è¡Œï¼ŒMegEngine æ—¨åœ¨æä¾›é«˜æ•ˆçš„æ¨¡å‹è®­ç»ƒå’Œæ¨ç†ã€‚</li><li>åˆ†å¸ƒå¼è®­ç»ƒï¼šæ”¯æŒå¤šGPUå’Œè·¨èŠ‚ç‚¹çš„åˆ†å¸ƒå¼è®­ç»ƒï¼Œä½¿å¾—å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†å’Œå¤æ‚æ¨¡å‹æˆä¸ºå¯èƒ½ã€‚</li><li>æ¨¡å‹è½¬æ¢å’Œä¼˜åŒ–ï¼šMegEngine æä¾›äº†ä¸€ç³»åˆ—ç”¨äºæ¨¡å‹ä¼˜åŒ–å’Œé‡åŒ–çš„å·¥å…·ï¼Œä»¥å‡å°æ¨¡å‹å¤§å°å¹¶åŠ å¿«æ¨ç†é€Ÿåº¦ï¼Œé€‚åº”å„ç§è®¡ç®—ç¯å¢ƒã€‚</li></ul><p>å®˜ç½‘ï¼š<a class="link"   href="https://www.megengine.org.cn/" >https://www.megengine.org.cn/<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/MegEngine/MegEngine" >https://github.com/MegEngine/MegEngine<i class="fas fa-external-link-alt"></i></a>  </p><h3 id="6-7ã€OneFlow"><a href="#6-7ã€OneFlow" class="headerlink" title="6.7ã€OneFlow"></a>6.7ã€OneFlow</h3><p>OneFlow æ˜¯OneFlow Inc.ï¼ˆä¸€æµç§‘æŠ€æœ‰é™å…¬å¸ï¼‰å¼€å‘ç—…å¼€æºçš„ï¼ŒOneFlow æ—¨åœ¨ä¸ºç”¨æˆ·æä¾›æ˜“ç”¨ã€é«˜æ•ˆå’Œå¯æ‰©å±•çš„æ·±åº¦å­¦ä¹ å·¥å…·ï¼Œç‰¹åˆ«å¼ºè°ƒåœ¨å¤§è§„æ¨¡åˆ†å¸ƒå¼ç¯å¢ƒä¸­çš„æ€§èƒ½å’Œçµæ´»æ€§ã€‚</p><ul><li>æ€§èƒ½ä¼˜åŒ–ï¼šOneFlow è®¾è®¡äº†æ–°é¢–çš„åº•å±‚æ¡†æ¶ï¼Œç”¨äºæé«˜è®¡ç®—å’Œå†…å­˜åˆ©ç”¨ç‡ï¼Œå°¤å…¶å…³æ³¨å¤§è§„æ¨¡åˆ†å¸ƒå¼è®­ç»ƒçš„æ€§èƒ½ä¼˜åŒ–ã€‚</li><li>æ˜“ç”¨æ€§ï¼šæä¾›äº†ç±»ä¼¼äº PyTorch çš„æ¥å£ï¼Œä½¿ç”¨æˆ·å¯ä»¥è½»æ¾è¿ç§»ç°æœ‰çš„ PyTorch ä»£ç ï¼ŒåŒæ—¶ä¿æŒæ€§èƒ½ä¼˜åŠ¿ã€‚</li><li>åŠ¨é™æ€å›¾å…¼å®¹ï¼šæ”¯æŒåŠ¨æ€å›¾å’Œé™æ€å›¾ä¸¤ç§ç¼–ç¨‹èŒƒå¼ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚çµæ´»é€‰æ‹©ã€‚</li><li>åˆ†å¸ƒå¼è®­ç»ƒï¼šå†…ç½®äº†å…ˆè¿›çš„åˆ†å¸ƒå¼è®­ç»ƒç­–ç•¥ï¼Œæ”¯æŒå„ç§åˆ†å¸ƒå¼è®­ç»ƒåœºæ™¯ï¼ŒåŒ…æ‹¬æ•°æ®å¹¶è¡Œã€æ¨¡å‹å¹¶è¡Œå’Œæµæ°´çº¿å¹¶è¡Œã€‚</li><li>è‡ªåŠ¨æ··åˆç²¾åº¦ï¼šæ”¯æŒè‡ªåŠ¨æ··åˆç²¾åº¦è®­ç»ƒï¼Œèƒ½å¤Ÿåœ¨ä¿æŒæ¨¡å‹ç²¾åº¦çš„åŒæ—¶å‡å°‘å†…å­˜æ¶ˆè€—å’Œæé«˜è®­ç»ƒé€Ÿåº¦ã€‚</li></ul><p>å®˜ç½‘ï¼š<a class="link"   href="https://oneflow.org/" >https://oneflow.org<i class="fas fa-external-link-alt"></i></a><br>å¼€æºåœ°å€ï¼š<a class="link"   href="https://github.com/Oneflow-Inc/oneflow" >https://github.com/Oneflow-Inc/oneflow<i class="fas fa-external-link-alt"></i></a>  </p><p>æœ¬æ–‡å®Œã€‚</p><blockquote><p>ç‰¹åˆ«è¯´æ˜ï¼šæœ¬æ–‡éƒ¨åˆ†å†…å®¹æ¥è‡ªAIå¤§æ¨¡å‹ï¼Œå¦‚æœ‰é”™è¯¯è¯·è¯„è®ºæŒ‡å‡ºï¼Œä¸èƒœæ„Ÿæ¿€ï¼</p></blockquote><hr><p>æœ¬æ–‡å‚è€ƒäº†ä»¥ä¸‹æ–‡çŒ®ï¼š</p><ul><li>ã€ŠTensorFlow Liteç§»åŠ¨ç«¯æ·±åº¦å­¦ä¹ ã€‹â€”â€”æœ±å…ƒæ¶›</li><li>ã€ŠPyTorchç¥ç»ç½‘ç»œå®æˆ˜ã€‹â€”â€”ä¸›æ™“å³°ã€å½­ç¨‹å¨ã€ç« å†›</li></ul>]]></content>
    
    
    <summary type="html">é€‚è½è‹è€…ï¼Œä¸‰é¤è€Œåï¼Œè…¹çŠ¹æœç„¶ï¼›é€‚ç™¾é‡Œè€…ï¼Œå®¿èˆ‚ç²®ï¼›é€‚åƒé‡Œè€…ï¼Œä¸‰æœˆèšç²®ã€‚ä¸Šæ–‡ä¸ºæˆ˜å›½ä¸­æœŸå…ˆç§¦é“å®¶å­¦æ´¾çš„ä»£è¡¨äººç‰©åº„å­çš„é€é¥æ¸¸é€‰æ®µï¼Œç¿»è¯‘ä¸ºç™½è¯æ–‡å¤§è‡´å«ä¹‰æ˜¯ï¼šåˆ°è¿‘éƒŠå»çš„äººï¼Œåªå¸¦å½“å¤©åƒçš„ä¸‰é¤ç²®é£Ÿï¼Œå›æ¥è‚šå­è¿˜æ˜¯é¥±é¥±çš„ï¼›åˆ°ç™¾é‡Œå¤–çš„äººï¼Œè¦ç”¨ä¸€æ•´å¤œæ—¶é—´èˆ‚ç±³å‡†å¤‡å¹²ç²®ï¼›åˆ°åƒé‡Œå¤–çš„äººï¼Œè¦ç”¨ä¸‰ä¸ªæœˆæ¥èšé›†ç²®è‰ã€‚</summary>
    
    
    
    <category term="äººå·¥æ™ºèƒ½" scheme="https://www.yanzhenjie.com/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"/>
    
    
    <category term="PyTorch" scheme="https://www.yanzhenjie.com/tags/PyTorch/"/>
    
    <category term="CNN" scheme="https://www.yanzhenjie.com/tags/CNN/"/>
    
    <category term="RNN" scheme="https://www.yanzhenjie.com/tags/RNN/"/>
    
    <category term="TensorFlow" scheme="https://www.yanzhenjie.com/tags/TensorFlow/"/>
    
  </entry>
  
</feed>
